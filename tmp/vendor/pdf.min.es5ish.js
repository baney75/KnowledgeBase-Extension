var Qr=Object.defineProperty;var Zr=(x,l,t)=>l in x?Qr(x,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):x[l]=t;var te=(x,l,t)=>(Zr(x,typeof l!="symbol"?l+"":l,t),t),Le=(x,l,t)=>{if(!l.has(x))throw TypeError("Cannot "+t)};var a=(x,l,t)=>(Le(x,l,"read from private field"),t?t.call(x):l.get(x)),$=(x,l,t)=>{if(l.has(x))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(x):l.set(x,t)},st=(x,l,t,r)=>(Le(x,l,"write to private field"),r?r.call(x,t):l.set(x,t),t);var Ae=(x,l,t,r)=>({set _(n){st(x,l,n,t)},get _(){return a(x,l,r)}}),Z=(x,l,t)=>(Le(x,l,"access private method"),t);(function(l,t){typeof exports=="object"&&typeof module=="object"?module.exports=l.pdfjsLib=t():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>l.pdfjsLib=t()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=l.pdfjsLib=t():l["pdfjs-dist/build/pdf"]=l.pdfjsLib=t()})(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(x,l,t)=>{var T,M;Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.TextRenderingMode=l.RenderingIntentFlag=l.PromiseCapability=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.MAX_IMAGE_SIZE_TO_CACHE=l.LINE_FACTOR=l.LINE_DESCENT_FACTOR=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.BASELINE_FACTOR=l.AnnotationType=l.AnnotationReplyType=l.AnnotationPrefix=l.AnnotationMode=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationEditorType=l.AnnotationEditorPrefix=l.AnnotationEditorParamsType=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.assert=function(e,s){e||b(s)},l.bytesToString=u,l.createValidAbsoluteUrl=function(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e)return null;try{if(c&&typeof e=="string"){if(c.addDefaultProtocol&&e.startsWith("www.")){const O=e.match(/\./g);(O==null?void 0:O.length)>=2&&(e=`http://${e}`)}if(c.tryConvertEncoding)try{e=_(e)}catch{}}const f=s?new URL(e,s):new URL(e);if(function(R){switch(R==null?void 0:R.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(f))return f}catch{}return null},l.getModificationDate=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},l.getUuid=function(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const e=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(e);else for(let s=0;s<32;s++)e[s]=Math.floor(255*Math.random());return u(e)},l.getVerbosityLevel=function(){return h},l.info=function(e){h>=n.INFOS&&console.log(`Info: ${e}`)},l.isArrayBuffer=function(e){return typeof e=="object"&&(e==null?void 0:e.byteLength)!==void 0},l.isArrayEqual=function(e,s){if(e.length!==s.length)return!1;for(let c=0,f=e.length;c<f;c++)if(e[c]!==s[c])return!1;return!0},l.isNodeJS=void 0,l.normalizeUnicode=function(e){return P||(P=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,I=new Map([["\uFB05","\u017Ft"]])),e.replaceAll(P,(s,c,f)=>c?c.normalize("NFKC"):I.get(f))},l.objectFromMap=function(e){const s=Object.create(null);for(const[c,f]of e)s[c]=f;return s},l.objectSize=function(e){return Object.keys(e).length},l.setVerbosityLevel=function(e){Number.isInteger(e)&&(h=e)},l.shadow=d,l.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},l.stringToBytes=g,l.stringToPDFString=function(e){if(e[0]>="\xEF"){let c;if(e[0]==="\xFE"&&e[1]==="\xFF"?c="utf-16be":e[0]==="\xFF"&&e[1]==="\xFE"?c="utf-16le":e[0]==="\xEF"&&e[1]==="\xBB"&&e[2]==="\xBF"&&(c="utf-8"),c)try{const f=new TextDecoder(c,{fatal:!0}),O=g(e);return f.decode(O)}catch(f){m(`stringToPDFString: "${f}".`)}}const s=[];for(let c=0,f=e.length;c<f;c++){const O=v[e.charCodeAt(c)];s.push(O?String.fromCharCode(O):e.charAt(c))}return s.join("")},l.stringToUTF8String=_,l.unreachable=b,l.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},l.warn=m,t(2),t(84),t(86),t(87),t(89),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);const r=!(typeof process!="object"||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&process.type!=="browser");l.isNodeJS=r,l.IDENTITY_MATRIX=[1,0,0,1,0,0],l.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],l.MAX_IMAGE_SIZE_TO_CACHE=1e7,l.LINE_FACTOR=1.35,l.LINE_DESCENT_FACTOR=.35,l.BASELINE_FACTOR=.25925925925925924,l.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},l.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},l.AnnotationEditorPrefix="pdfjs_internal_editor_",l.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},l.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},l.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},l.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},l.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},l.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},l.AnnotationReplyType={GROUP:"Group",REPLY:"R"},l.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},l.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},l.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},l.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},l.PageActionEventType={O:"PageOpen",C:"PageClose"};const n={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=n,l.CMapCompressionType={NONE:0,BINARY:1},l.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},l.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let h=n.WARNINGS;function m(i){h>=n.WARNINGS&&console.log(`Warning: ${i}`)}function b(i){throw new Error(i)}function d(i,e,s){let c=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Object.defineProperty(i,e,{value:s,enumerable:!c,configurable:!0,writable:!1}),s}const o=function(){function e(s,c){this.constructor===e&&b("Cannot initialize BaseException."),this.message=s,this.name=c}return e.prototype=new Error,e.constructor=e,e}();l.BaseException=o,l.PasswordException=class extends o{constructor(e,s){super(e,"PasswordException"),this.code=s}},l.UnknownErrorException=class extends o{constructor(e,s){super(e,"UnknownErrorException"),this.details=s}},l.InvalidPDFException=class extends o{constructor(e){super(e,"InvalidPDFException")}},l.MissingPDFException=class extends o{constructor(e){super(e,"MissingPDFException")}},l.UnexpectedResponseException=class extends o{constructor(e,s){super(e,"UnexpectedResponseException"),this.status=s}},l.FormatError=class extends o{constructor(e){super(e,"FormatError")}},l.AbortException=class extends o{constructor(e){super(e,"AbortException")}};function u(i){typeof i=="object"&&(i==null?void 0:i.length)!==void 0||b("Invalid argument for bytesToString");const e=i.length,s=8192;if(e<s)return String.fromCharCode.apply(null,i);const c=[];for(let f=0;f<e;f+=s){const O=Math.min(f+s,e),R=i.subarray(f,O);c.push(String.fromCharCode.apply(null,R))}return c.join("")}function g(i){typeof i!="string"&&b("Invalid argument for stringToBytes");const e=i.length,s=new Uint8Array(e);for(let c=0;c<e;++c)s[c]=255&i.charCodeAt(c);return s}l.FeatureTest=class{static get isLittleEndian(){return d(this,"isLittleEndian",function(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}())}static get isEvalSupported(){return d(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return d(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?d(this,"platform",{isWin:!1,isMac:!1}):d(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var e,s;return d(this,"isCSSRoundSupported",(s=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:s.call(e,"width: round(1.5px, 1px)"))}};const A=[...Array(256).keys()].map(i=>i.toString(16).padStart(2,"0"));l.Util=class{static makeHexColor(e,s,c){return`#${A[e]}${A[s]}${A[c]}`}static scaleMinMax(e,s){let c;e[0]?(e[0]<0&&(c=s[0],s[0]=s[1],s[1]=c),s[0]*=e[0],s[1]*=e[0],e[3]<0&&(c=s[2],s[2]=s[3],s[3]=c),s[2]*=e[3],s[3]*=e[3]):(c=s[0],s[0]=s[2],s[2]=c,c=s[1],s[1]=s[3],s[3]=c,e[1]<0&&(c=s[2],s[2]=s[3],s[3]=c),s[2]*=e[1],s[3]*=e[1],e[2]<0&&(c=s[0],s[0]=s[1],s[1]=c),s[0]*=e[2],s[1]*=e[2]),s[0]+=e[4],s[1]+=e[4],s[2]+=e[5],s[3]+=e[5]}static transform(e,s){return[e[0]*s[0]+e[2]*s[1],e[1]*s[0]+e[3]*s[1],e[0]*s[2]+e[2]*s[3],e[1]*s[2]+e[3]*s[3],e[0]*s[4]+e[2]*s[5]+e[4],e[1]*s[4]+e[3]*s[5]+e[5]]}static applyTransform(e,s){return[e[0]*s[0]+e[1]*s[2]+s[4],e[0]*s[1]+e[1]*s[3]+s[5]]}static applyInverseTransform(e,s){const c=s[0]*s[3]-s[1]*s[2];return[(e[0]*s[3]-e[1]*s[2]+s[2]*s[5]-s[4]*s[3])/c,(-e[0]*s[1]+e[1]*s[0]+s[4]*s[1]-s[5]*s[0])/c]}static getAxialAlignedBoundingBox(e,s){const c=this.applyTransform(e,s),f=this.applyTransform(e.slice(2,4),s),O=this.applyTransform([e[0],e[3]],s),R=this.applyTransform([e[2],e[1]],s);return[Math.min(c[0],f[0],O[0],R[0]),Math.min(c[1],f[1],O[1],R[1]),Math.max(c[0],f[0],O[0],R[0]),Math.max(c[1],f[1],O[1],R[1])]}static inverseTransform(e){const s=e[0]*e[3]-e[1]*e[2];return[e[3]/s,-e[1]/s,-e[2]/s,e[0]/s,(e[2]*e[5]-e[4]*e[3])/s,(e[4]*e[1]-e[5]*e[0])/s]}static singularValueDecompose2dScale(e){const s=[e[0],e[2],e[1],e[3]],c=e[0]*s[0]+e[1]*s[2],f=e[0]*s[1]+e[1]*s[3],O=e[2]*s[0]+e[3]*s[2],R=e[2]*s[1]+e[3]*s[3],K=(c+R)/2,X=Math.sqrt((c+R)**2-4*(c*R-O*f))/2,et=K+X||1,lt=K-X||1;return[Math.sqrt(et),Math.sqrt(lt)]}static normalizeRect(e){const s=e.slice(0);return e[0]>e[2]&&(s[0]=e[2],s[2]=e[0]),e[1]>e[3]&&(s[1]=e[3],s[3]=e[1]),s}static intersect(e,s){const c=Math.max(Math.min(e[0],e[2]),Math.min(s[0],s[2])),f=Math.min(Math.max(e[0],e[2]),Math.max(s[0],s[2]));if(c>f)return null;const O=Math.max(Math.min(e[1],e[3]),Math.min(s[1],s[3])),R=Math.min(Math.max(e[1],e[3]),Math.max(s[1],s[3]));return O>R?null:[c,O,f,R]}static bezierBoundingBox(e,s,c,f,O,R,K,X){const et=[],lt=[[],[]];let V,H,p,y,S,N,q,Q;for(let F=0;F<2;++F)if(F===0?(H=6*e-12*c+6*O,V=-3*e+9*c-9*O+3*K,p=3*c-3*e):(H=6*s-12*f+6*R,V=-3*s+9*f-9*R+3*X,p=3*f-3*s),Math.abs(V)<1e-12){if(Math.abs(H)<1e-12)continue;y=-p/H,0<y&&y<1&&et.push(y)}else q=H*H-4*p*V,Q=Math.sqrt(q),q<0||(S=(-H+Q)/(2*V),0<S&&S<1&&et.push(S),N=(-H-Q)/(2*V),0<N&&N<1&&et.push(N));let W,L=et.length;const C=L;for(;L--;)y=et[L],W=1-y,lt[0][L]=W*W*W*e+3*W*W*y*c+3*W*y*y*O+y*y*y*K,lt[1][L]=W*W*W*s+3*W*W*y*f+3*W*y*y*R+y*y*y*X;return lt[0][C]=e,lt[1][C]=s,lt[0][C+1]=K,lt[1][C+1]=X,lt[0].length=lt[1].length=C+2,[Math.min(...lt[0]),Math.min(...lt[1]),Math.max(...lt[0]),Math.max(...lt[1])]}};const v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function _(i){return decodeURIComponent(escape(i))}l.PromiseCapability=(M=class{constructor(){$(this,T,!1);this.promise=new Promise((e,s)=>{this.resolve=c=>{st(this,T,!0),e(c)},this.reject=c=>{st(this,T,!0),s(c)}})}get settled(){return a(this,T)}},T=new WeakMap,M);let P=null,I=null;l.AnnotationPrefix="pdfjs_internal_id_"},(x,l,t)=>{var r=t(3),n=t(4),h=t(69),m=t(70),b="WebAssembly",d=n[b],o=Error("e",{cause:7}).cause!==7,u=function(A,v){var _={};_[A]=m(A,v,o),r({global:!0,constructor:!0,arity:1,forced:o},_)},g=function(A,v){if(d&&d[A]){var _={};_[A]=m(b+"."+A,v,o),r({target:b,stat:!0,constructor:!0,arity:1,forced:o},_)}};u("Error",function(A){return function(_){return h(A,this,arguments)}}),u("EvalError",function(A){return function(_){return h(A,this,arguments)}}),u("RangeError",function(A){return function(_){return h(A,this,arguments)}}),u("ReferenceError",function(A){return function(_){return h(A,this,arguments)}}),u("SyntaxError",function(A){return function(_){return h(A,this,arguments)}}),u("TypeError",function(A){return function(_){return h(A,this,arguments)}}),u("URIError",function(A){return function(_){return h(A,this,arguments)}}),g("CompileError",function(A){return function(_){return h(A,this,arguments)}}),g("LinkError",function(A){return function(_){return h(A,this,arguments)}}),g("RuntimeError",function(A){return function(_){return h(A,this,arguments)}})},(x,l,t)=>{var r=t(4),n=t(5).f,h=t(44),m=t(48),b=t(38),d=t(56),o=t(68);x.exports=function(u,g){var A,v,_,P,I,T=u.target,M=u.global,i=u.stat;if(A=M?r:i?r[T]||b(T,{}):(r[T]||{}).prototype)for(v in g){if(P=g[v],_=u.dontCallGetSet?(I=n(A,v))&&I.value:A[v],!o(M?v:T+(i?".":"#")+v,u.forced)&&_!==void 0){if(typeof P==typeof _)continue;d(P,_)}(u.sham||_&&_.sham)&&h(P,"sham",!0),m(A,v,P,u)}}},function(x){var l=function(t){return t&&t.Math===Math&&t};x.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof global=="object"&&global)||function(){return this}()||this||Function("return this")()},(x,l,t)=>{var r=t(6),n=t(8),h=t(10),m=t(11),b=t(12),d=t(18),o=t(39),u=t(42),g=Object.getOwnPropertyDescriptor;l.f=r?g:function(v,_){if(v=b(v),_=d(_),u)try{return g(v,_)}catch{}if(o(v,_))return m(!n(h.f,v,_),v[_])}},(x,l,t)=>{var r=t(7);x.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},x=>{x.exports=function(l){try{return!!l()}catch{return!0}}},(x,l,t)=>{var r=t(9),n=Function.prototype.call;x.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},(x,l,t)=>{var r=t(7);x.exports=!r(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")})},(x,l)=>{var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,n=r&&!t.call({1:2},1);l.f=n?function(m){var b=r(this,m);return!!b&&b.enumerable}:t},x=>{x.exports=function(l,t){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:t}}},(x,l,t)=>{var r=t(13),n=t(16);x.exports=function(h){return r(n(h))}},(x,l,t)=>{var r=t(14),n=t(7),h=t(15),m=Object,b=r("".split);x.exports=n(function(){return!m("z").propertyIsEnumerable(0)})?function(d){return h(d)==="String"?b(d,""):m(d)}:m},(x,l,t)=>{var r=t(9),n=Function.prototype,h=n.call,m=r&&n.bind.bind(h,h);x.exports=r?m:function(b){return function(){return h.apply(b,arguments)}}},(x,l,t)=>{var r=t(14),n=r({}.toString),h=r("".slice);x.exports=function(m){return h(n(m),8,-1)}},(x,l,t)=>{var r=t(17),n=TypeError;x.exports=function(h){if(r(h))throw n("Can't call method on "+h);return h}},x=>{x.exports=function(l){return l==null}},(x,l,t)=>{var r=t(19),n=t(23);x.exports=function(h){var m=r(h,"string");return n(m)?m:m+""}},(x,l,t)=>{var r=t(8),n=t(20),h=t(23),m=t(30),b=t(33),d=t(34),o=TypeError,u=d("toPrimitive");x.exports=function(g,A){if(!n(g)||h(g))return g;var v,_=m(g,u);if(_){if(A===void 0&&(A="default"),v=r(_,g,A),!n(v)||h(v))return v;throw o("Can't convert object to primitive value")}return A===void 0&&(A="number"),b(g,A)}},(x,l,t)=>{var r=t(21),n=t(22),h=n.all;x.exports=n.IS_HTMLDDA?function(m){return typeof m=="object"?m!==null:r(m)||m===h}:function(m){return typeof m=="object"?m!==null:r(m)}},(x,l,t)=>{var r=t(22),n=r.all;x.exports=r.IS_HTMLDDA?function(h){return typeof h=="function"||h===n}:function(h){return typeof h=="function"}},x=>{var l=typeof document=="object"&&document.all,t=l===void 0&&l!==void 0;x.exports={all:l,IS_HTMLDDA:t}},(x,l,t)=>{var r=t(24),n=t(21),h=t(25),m=t(26),b=Object;x.exports=m?function(d){return typeof d=="symbol"}:function(d){var o=r("Symbol");return n(o)&&h(o.prototype,b(d))}},(x,l,t)=>{var r=t(4),n=t(21);x.exports=function(h,m){return arguments.length<2?(b=r[h],n(b)?b:void 0):r[h]&&r[h][m];var b}},(x,l,t)=>{var r=t(14);x.exports=r({}.isPrototypeOf)},(x,l,t)=>{var r=t(27);x.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(x,l,t)=>{var r=t(28),n=t(7),h=t(4).String;x.exports=!!Object.getOwnPropertySymbols&&!n(function(){var m=Symbol("symbol detection");return!h(m)||!(Object(m)instanceof Symbol)||!Symbol.sham&&r&&r<41})},(x,l,t)=>{var r,n,h=t(4),m=t(29),b=h.process,d=h.Deno,o=b&&b.versions||d&&d.version,u=o&&o.v8;u&&(n=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!n&&m&&(!(r=m.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=m.match(/Chrome\/(\d+)/))&&(n=+r[1]),x.exports=n},x=>{x.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},(x,l,t)=>{var r=t(31),n=t(17);x.exports=function(h,m){var b=h[m];return n(b)?void 0:r(b)}},(x,l,t)=>{var r=t(21),n=t(32),h=TypeError;x.exports=function(m){if(r(m))return m;throw h(n(m)+" is not a function")}},x=>{var l=String;x.exports=function(t){try{return l(t)}catch{return"Object"}}},(x,l,t)=>{var r=t(8),n=t(21),h=t(20),m=TypeError;x.exports=function(b,d){var o,u;if(d==="string"&&n(o=b.toString)&&!h(u=r(o,b))||n(o=b.valueOf)&&!h(u=r(o,b))||d!=="string"&&n(o=b.toString)&&!h(u=r(o,b)))return u;throw m("Can't convert object to primitive value")}},(x,l,t)=>{var r=t(4),n=t(35),h=t(39),m=t(41),b=t(27),d=t(26),o=r.Symbol,u=n("wks"),g=d?o.for||o:o&&o.withoutSetter||m;x.exports=function(A){return h(u,A)||(u[A]=b&&h(o,A)?o[A]:g("Symbol."+A)),u[A]}},(x,l,t)=>{var r=t(36),n=t(37);(x.exports=function(h,m){return n[h]||(n[h]=m!==void 0?m:{})})("versions",[]).push({version:"3.32.2",mode:r?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},x=>{x.exports=!1},(x,l,t)=>{var r=t(4),n=t(38),h="__core-js_shared__",m=r[h]||n(h,{});x.exports=m},(x,l,t)=>{var r=t(4),n=Object.defineProperty;x.exports=function(h,m){try{n(r,h,{value:m,configurable:!0,writable:!0})}catch{r[h]=m}return m}},(x,l,t)=>{var r=t(14),n=t(40),h=r({}.hasOwnProperty);x.exports=Object.hasOwn||function(b,d){return h(n(b),d)}},(x,l,t)=>{var r=t(16),n=Object;x.exports=function(h){return n(r(h))}},(x,l,t)=>{var r=t(14),n=0,h=Math.random(),m=r(1 .toString);x.exports=function(b){return"Symbol("+(b===void 0?"":b)+")_"+m(++n+h,36)}},(x,l,t)=>{var r=t(6),n=t(7),h=t(43);x.exports=!r&&!n(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!==7})},(x,l,t)=>{var r=t(4),n=t(20),h=r.document,m=n(h)&&n(h.createElement);x.exports=function(b){return m?h.createElement(b):{}}},(x,l,t)=>{var r=t(6),n=t(45),h=t(11);x.exports=r?function(m,b,d){return n.f(m,b,h(1,d))}:function(m,b,d){return m[b]=d,m}},(x,l,t)=>{var r=t(6),n=t(42),h=t(46),m=t(47),b=t(18),d=TypeError,o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,g="enumerable",A="configurable",v="writable";l.f=r?h?function(P,I,T){if(m(P),I=b(I),m(T),typeof P=="function"&&I==="prototype"&&"value"in T&&v in T&&!T[v]){var M=u(P,I);M&&M[v]&&(P[I]=T.value,T={configurable:A in T?T[A]:M[A],enumerable:g in T?T[g]:M[g],writable:!1})}return o(P,I,T)}:o:function(P,I,T){if(m(P),I=b(I),m(T),n)try{return o(P,I,T)}catch{}if("get"in T||"set"in T)throw d("Accessors not supported");return"value"in T&&(P[I]=T.value),P}},(x,l,t)=>{var r=t(6),n=t(7);x.exports=r&&n(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},(x,l,t)=>{var r=t(20),n=String,h=TypeError;x.exports=function(m){if(r(m))return m;throw h(n(m)+" is not an object")}},(x,l,t)=>{var r=t(21),n=t(45),h=t(49),m=t(38);x.exports=function(b,d,o,u){u||(u={});var g=u.enumerable,A=u.name!==void 0?u.name:d;if(r(o)&&h(o,A,u),u.global)g?b[d]=o:m(d,o);else{try{u.unsafe?b[d]&&(g=!0):delete b[d]}catch{}g?b[d]=o:n.f(b,d,{value:o,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return b}},(x,l,t)=>{var r=t(14),n=t(7),h=t(21),m=t(39),b=t(6),d=t(50).CONFIGURABLE,o=t(51),u=t(52),g=u.enforce,A=u.get,v=String,_=Object.defineProperty,P=r("".slice),I=r("".replace),T=r([].join),M=b&&!n(function(){return _(function(){},"length",{value:8}).length!==8}),i=String(String).split("String"),e=x.exports=function(s,c,f){P(v(c),0,7)==="Symbol("&&(c="["+I(v(c),/^Symbol\(([^)]*)\)/,"$1")+"]"),f&&f.getter&&(c="get "+c),f&&f.setter&&(c="set "+c),(!m(s,"name")||d&&s.name!==c)&&(b?_(s,"name",{value:c,configurable:!0}):s.name=c),M&&f&&m(f,"arity")&&s.length!==f.arity&&_(s,"length",{value:f.arity});try{f&&m(f,"constructor")&&f.constructor?b&&_(s,"prototype",{writable:!1}):s.prototype&&(s.prototype=void 0)}catch{}var O=g(s);return m(O,"source")||(O.source=T(i,typeof c=="string"?c:"")),s};Function.prototype.toString=e(function(){return h(this)&&A(this).source||o(this)},"toString")},(x,l,t)=>{var r=t(6),n=t(39),h=Function.prototype,m=r&&Object.getOwnPropertyDescriptor,b=n(h,"name"),d=b&&function(){}.name==="something",o=b&&(!r||r&&m(h,"name").configurable);x.exports={EXISTS:b,PROPER:d,CONFIGURABLE:o}},(x,l,t)=>{var r=t(14),n=t(21),h=t(37),m=r(Function.toString);n(h.inspectSource)||(h.inspectSource=function(b){return m(b)}),x.exports=h.inspectSource},(x,l,t)=>{var r,n,h,m=t(53),b=t(4),d=t(20),o=t(44),u=t(39),g=t(37),A=t(54),v=t(55),_="Object already initialized",P=b.TypeError,I=b.WeakMap;if(m||g.state){var T=g.state||(g.state=new I);T.get=T.get,T.has=T.has,T.set=T.set,r=function(i,e){if(T.has(i))throw P(_);return e.facade=i,T.set(i,e),e},n=function(i){return T.get(i)||{}},h=function(i){return T.has(i)}}else{var M=A("state");v[M]=!0,r=function(i,e){if(u(i,M))throw P(_);return e.facade=i,o(i,M,e),e},n=function(i){return u(i,M)?i[M]:{}},h=function(i){return u(i,M)}}x.exports={set:r,get:n,has:h,enforce:function(i){return h(i)?n(i):r(i,{})},getterFor:function(i){return function(e){var s;if(!d(e)||(s=n(e)).type!==i)throw P("Incompatible receiver, "+i+" required");return s}}}},(x,l,t)=>{var r=t(4),n=t(21),h=r.WeakMap;x.exports=n(h)&&/native code/.test(String(h))},(x,l,t)=>{var r=t(35),n=t(41),h=r("keys");x.exports=function(m){return h[m]||(h[m]=n(m))}},x=>{x.exports={}},(x,l,t)=>{var r=t(39),n=t(57),h=t(5),m=t(45);x.exports=function(b,d,o){for(var u=n(d),g=m.f,A=h.f,v=0;v<u.length;v++){var _=u[v];r(b,_)||o&&r(o,_)||g(b,_,A(d,_))}}},(x,l,t)=>{var r=t(24),n=t(14),h=t(58),m=t(67),b=t(47),d=n([].concat);x.exports=r("Reflect","ownKeys")||function(u){var g=h.f(b(u)),A=m.f;return A?d(g,A(u)):g}},(x,l,t)=>{var r=t(59),n=t(66).concat("length","prototype");l.f=Object.getOwnPropertyNames||function(m){return r(m,n)}},(x,l,t)=>{var r=t(14),n=t(39),h=t(12),m=t(60).indexOf,b=t(55),d=r([].push);x.exports=function(o,u){var g,A=h(o),v=0,_=[];for(g in A)!n(b,g)&&n(A,g)&&d(_,g);for(;u.length>v;)n(A,g=u[v++])&&(~m(_,g)||d(_,g));return _}},(x,l,t)=>{var r=t(12),n=t(61),h=t(64),m=function(b){return function(d,o,u){var g,A=r(d),v=h(A),_=n(u,v);if(b&&o!=o){for(;v>_;)if((g=A[_++])!=g)return!0}else for(;v>_;_++)if((b||_ in A)&&A[_]===o)return b||_||0;return!b&&-1}};x.exports={includes:m(!0),indexOf:m(!1)}},(x,l,t)=>{var r=t(62),n=Math.max,h=Math.min;x.exports=function(m,b){var d=r(m);return d<0?n(d+b,0):h(d,b)}},(x,l,t)=>{var r=t(63);x.exports=function(n){var h=+n;return h!=h||h===0?0:r(h)}},x=>{var l=Math.ceil,t=Math.floor;x.exports=Math.trunc||function(n){var h=+n;return(h>0?t:l)(h)}},(x,l,t)=>{var r=t(65);x.exports=function(n){return r(n.length)}},(x,l,t)=>{var r=t(62),n=Math.min;x.exports=function(h){return h>0?n(r(h),9007199254740991):0}},x=>{x.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(x,l)=>{l.f=Object.getOwnPropertySymbols},(x,l,t)=>{var r=t(7),n=t(21),h=/#|\.prototype\./,m=function(g,A){var v=d[b(g)];return v===u||v!==o&&(n(A)?r(A):!!A)},b=m.normalize=function(g){return String(g).replace(h,".").toLowerCase()},d=m.data={},o=m.NATIVE="N",u=m.POLYFILL="P";x.exports=m},(x,l,t)=>{var r=t(9),n=Function.prototype,h=n.apply,m=n.call;x.exports=typeof Reflect=="object"&&Reflect.apply||(r?m.bind(h):function(){return m.apply(h,arguments)})},(x,l,t)=>{var r=t(24),n=t(39),h=t(44),m=t(25),b=t(71),d=t(56),o=t(74),u=t(75),g=t(76),A=t(80),v=t(81),_=t(6),P=t(36);x.exports=function(I,T,M,i){var e="stackTraceLimit",s=i?2:1,c=I.split("."),f=c[c.length-1],O=r.apply(null,c);if(O){var R=O.prototype;if(!P&&n(R,"cause")&&delete R.cause,!M)return O;var K=r("Error"),X=T(function(et,lt){var V=g(i?lt:et,void 0),H=i?new O(et):new O;return V!==void 0&&h(H,"message",V),v(H,X,H.stack,2),this&&m(R,this)&&u(H,this,X),arguments.length>s&&A(H,arguments[s]),H});if(X.prototype=R,f!=="Error"?b?b(X,K):d(X,K,{name:!0}):_&&e in O&&(o(X,O,e),o(X,O,"prepareStackTrace")),d(X,O),!P)try{R.name!==f&&h(R,"name",f),R.constructor=X}catch{}return X}}},(x,l,t)=>{var r=t(72),n=t(47),h=t(73);x.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m,b=!1,d={};try{(m=r(Object.prototype,"__proto__","set"))(d,[]),b=d instanceof Array}catch{}return function(u,g){return n(u),h(g),b?m(u,g):u.__proto__=g,u}}():void 0)},(x,l,t)=>{var r=t(14),n=t(31);x.exports=function(h,m,b){try{return r(n(Object.getOwnPropertyDescriptor(h,m)[b]))}catch{}}},(x,l,t)=>{var r=t(21),n=String,h=TypeError;x.exports=function(m){if(typeof m=="object"||r(m))return m;throw h("Can't set "+n(m)+" as a prototype")}},(x,l,t)=>{var r=t(45).f;x.exports=function(n,h,m){m in n||r(n,m,{configurable:!0,get:function(){return h[m]},set:function(b){h[m]=b}})}},(x,l,t)=>{var r=t(21),n=t(20),h=t(71);x.exports=function(m,b,d){var o,u;return h&&r(o=b.constructor)&&o!==d&&n(u=o.prototype)&&u!==d.prototype&&h(m,u),m}},(x,l,t)=>{var r=t(77);x.exports=function(n,h){return n===void 0?arguments.length<2?"":h:r(n)}},(x,l,t)=>{var r=t(78),n=String;x.exports=function(h){if(r(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return n(h)}},(x,l,t)=>{var r=t(79),n=t(21),h=t(15),m=t(34)("toStringTag"),b=Object,d=h(function(){return arguments}())==="Arguments";x.exports=r?h:function(o){var u,g,A;return o===void 0?"Undefined":o===null?"Null":typeof(g=function(v,_){try{return v[_]}catch{}}(u=b(o),m))=="string"?g:d?h(u):(A=h(u))==="Object"&&n(u.callee)?"Arguments":A}},(x,l,t)=>{var r={};r[t(34)("toStringTag")]="z",x.exports=String(r)==="[object z]"},(x,l,t)=>{var r=t(20),n=t(44);x.exports=function(h,m){r(m)&&"cause"in m&&n(h,"cause",m.cause)}},(x,l,t)=>{var r=t(44),n=t(82),h=t(83),m=Error.captureStackTrace;x.exports=function(b,d,o,u){h&&(m?m(b,d):r(b,"stack",n(o,u)))}},(x,l,t)=>{var r=t(14),n=Error,h=r("".replace),m=String(n("zxcasd").stack),b=/\n\s*at [^:]*:[^\n]*/,d=b.test(m);x.exports=function(o,u){if(d&&typeof o=="string"&&!n.prepareStackTrace)for(;u--;)o=h(o,b,"");return o}},(x,l,t)=>{var r=t(7),n=t(11);x.exports=!r(function(){var h=Error("a");return"stack"in h?(Object.defineProperty(h,"stack",n(1,7)),h.stack!==7):!0})},(x,l,t)=>{var r=t(48),n=t(14),h=t(77),m=t(85),b=URLSearchParams,d=b.prototype,o=n(d.append),u=n(d.delete),g=n(d.forEach),A=n([].push),v=new b("a=1&a=2&b=3");v.delete("a",1),v.delete("b",void 0),v+""!="a=2"&&r(d,"delete",function(_){var P=arguments.length,I=P<2?void 0:arguments[1];if(P&&I===void 0)return u(this,_);var T=[];g(this,function(R,K){A(T,{key:K,value:R})}),m(P,1);for(var M,i=h(_),e=h(I),s=0,c=0,f=!1,O=T.length;s<O;)M=T[s++],f||M.key===i?(f=!0,u(this,M.key)):c++;for(;c<O;)(M=T[c++]).key===i&&M.value===e||o(this,M.key,M.value)},{enumerable:!0,unsafe:!0})},x=>{var l=TypeError;x.exports=function(t,r){if(t<r)throw l("Not enough arguments");return t}},(x,l,t)=>{var r=t(48),n=t(14),h=t(77),m=t(85),b=URLSearchParams,d=b.prototype,o=n(d.getAll),u=n(d.has),g=new b("a=1");!g.has("a",2)&&g.has("a",void 0)||r(d,"has",function(v){var _=arguments.length,P=_<2?void 0:arguments[1];if(_&&P===void 0)return u(this,v);var I=o(this,v);m(_,1);for(var T=h(P),M=0;M<I.length;)if(I[M++]===T)return!0;return!1},{enumerable:!0,unsafe:!0})},(x,l,t)=>{var r=t(6),n=t(14),h=t(88),m=URLSearchParams.prototype,b=n(m.forEach);r&&!("size"in m)&&h(m,"size",{get:function(){var o=0;return b(this,function(){o++}),o},configurable:!0,enumerable:!0})},(x,l,t)=>{var r=t(49),n=t(45);x.exports=function(h,m,b){return b.get&&r(b.get,m,{getter:!0}),b.set&&r(b.set,m,{setter:!0}),n.f(h,m,b)}},(x,l,t)=>{var r=t(3),n=t(40),h=t(64),m=t(90),b=t(92);r({target:"Array",proto:!0,arity:1,forced:t(7)(function(){return[].push.call({length:4294967296},1)!==4294967297})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(d){return d instanceof TypeError}}()},{push:function(o){var u=n(this),g=h(u),A=arguments.length;b(g+A);for(var v=0;v<A;v++)u[g]=arguments[v],g++;return m(u,g),g}})},(x,l,t)=>{var r=t(6),n=t(91),h=TypeError,m=Object.getOwnPropertyDescriptor,b=r&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(d){return d instanceof TypeError}}();x.exports=b?function(d,o){if(n(d)&&!m(d,"length").writable)throw h("Cannot set read only .length");return d.length=o}:function(d,o){return d.length=o}},(x,l,t)=>{var r=t(15);x.exports=Array.isArray||function(h){return r(h)==="Array"}},x=>{var l=TypeError;x.exports=function(t){if(t>9007199254740991)throw l("Maximum allowed index exceeded");return t}},(x,l,t)=>{var r=t(94),n=t(98).findLast,h=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLast",function(b){return n(h(this),b,arguments.length>1?arguments[1]:void 0)})},(x,l,t)=>{var r,n,h,m=t(95),b=t(6),d=t(4),o=t(21),u=t(20),g=t(39),A=t(78),v=t(32),_=t(44),P=t(48),I=t(88),T=t(25),M=t(96),i=t(71),e=t(34),s=t(41),c=t(52),f=c.enforce,O=c.get,R=d.Int8Array,K=R&&R.prototype,X=d.Uint8ClampedArray,et=X&&X.prototype,lt=R&&M(R),V=K&&M(K),H=Object.prototype,p=d.TypeError,y=e("toStringTag"),S=s("TYPED_ARRAY_TAG"),N="TypedArrayConstructor",q=m&&!!i&&A(d.opera)!=="Opera",Q=!1,W={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},C=function(E){var B=M(E);if(u(B)){var U=O(B);return U&&g(U,N)?U[N]:C(B)}},F=function(E){if(!u(E))return!1;var B=A(E);return g(W,B)||g(L,B)};for(r in W)(h=(n=d[r])&&n.prototype)?f(h)[N]=n:q=!1;for(r in L)(h=(n=d[r])&&n.prototype)&&(f(h)[N]=n);if((!q||!o(lt)||lt===Function.prototype)&&(lt=function(){throw p("Incorrect invocation")},q))for(r in W)d[r]&&i(d[r],lt);if((!q||!V||V===H)&&(V=lt.prototype,q))for(r in W)d[r]&&i(d[r].prototype,V);if(q&&M(et)!==V&&i(et,V),b&&!g(V,y)){Q=!0,I(V,y,{configurable:!0,get:function(){return u(this)?this[S]:void 0}});for(r in W)d[r]&&_(d[r],S,r)}x.exports={NATIVE_ARRAY_BUFFER_VIEWS:q,TYPED_ARRAY_TAG:Q&&S,aTypedArray:function(E){if(F(E))return E;throw p("Target is not a typed array")},aTypedArrayConstructor:function(E){if(o(E)&&(!i||T(lt,E)))return E;throw p(v(E)+" is not a typed array constructor")},exportTypedArrayMethod:function(E,B,U,D){if(b){if(U)for(var z in W){var Y=d[z];if(Y&&g(Y.prototype,E))try{delete Y.prototype[E]}catch{try{Y.prototype[E]=B}catch{}}}V[E]&&!U||P(V,E,U?B:q&&K[E]||B,D)}},exportTypedArrayStaticMethod:function(E,B,U){var D,z;if(b){if(i){if(U){for(D in W)if((z=d[D])&&g(z,E))try{delete z[E]}catch{}}if(lt[E]&&!U)return;try{return P(lt,E,U?B:q&&lt[E]||B)}catch{}}for(D in W)!(z=d[D])||z[E]&&!U||P(z,E,B)}},getTypedArrayConstructor:C,isView:function(B){if(!u(B))return!1;var U=A(B);return U==="DataView"||g(W,U)||g(L,U)},isTypedArray:F,TypedArray:lt,TypedArrayPrototype:V}},x=>{x.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(x,l,t)=>{var r=t(39),n=t(21),h=t(40),m=t(54),b=t(97),d=m("IE_PROTO"),o=Object,u=o.prototype;x.exports=b?o.getPrototypeOf:function(g){var A=h(g);if(r(A,d))return A[d];var v=A.constructor;return n(v)&&A instanceof v?v.prototype:A instanceof o?u:null}},(x,l,t)=>{var r=t(7);x.exports=!r(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},(x,l,t)=>{var r=t(99),n=t(13),h=t(40),m=t(64),b=function(d){var o=d===1;return function(u,g,A){for(var v,_=h(u),P=n(_),I=r(g,A),T=m(P);T-- >0;)if(I(v=P[T],T,_))switch(d){case 0:return v;case 1:return T}return o?-1:void 0}};x.exports={findLast:b(0),findLastIndex:b(1)}},(x,l,t)=>{var r=t(100),n=t(31),h=t(9),m=r(r.bind);x.exports=function(b,d){return n(b),d===void 0?b:h?m(b,d):function(){return b.apply(d,arguments)}}},(x,l,t)=>{var r=t(15),n=t(14);x.exports=function(h){if(r(h)==="Function")return n(h)}},(x,l,t)=>{var r=t(94),n=t(98).findLastIndex,h=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLastIndex",function(b){return n(h(this),b,arguments.length>1?arguments[1]:void 0)})},(x,l,t)=>{var r=t(4),n=t(8),h=t(94),m=t(64),b=t(103),d=t(40),o=t(7),u=r.RangeError,g=r.Int8Array,A=g&&g.prototype,v=A&&A.set,_=h.aTypedArray,P=h.exportTypedArrayMethod,I=!o(function(){var M=new Uint8ClampedArray(2);return n(v,M,{length:1,0:3},1),M[1]!==3}),T=I&&h.NATIVE_ARRAY_BUFFER_VIEWS&&o(function(){var M=new g(2);return M.set(1),M.set("2",1),M[0]!==0||M[1]!==2});P("set",function(i){_(this);var e=b(arguments.length>1?arguments[1]:void 0,1),s=d(i);if(I)return n(v,this,s,e);var c=this.length,f=m(s),O=0;if(f+e>c)throw u("Wrong length");for(;O<f;)this[e+O]=s[O++]},!I||T)},(x,l,t)=>{var r=t(104),n=RangeError;x.exports=function(h,m){var b=r(h);if(b%m)throw n("Wrong offset");return b}},(x,l,t)=>{var r=t(62),n=RangeError;x.exports=function(h){var m=r(h);if(m<0)throw n("The argument can't be less than 0");return m}},(x,l,t)=>{var r=t(106),n=t(94),h=n.aTypedArray,m=n.exportTypedArrayMethod,b=n.getTypedArrayConstructor;m("toReversed",function(){return r(h(this),b(this))})},(x,l,t)=>{var r=t(64);x.exports=function(n,h){for(var m=r(n),b=new h(m),d=0;d<m;d++)b[d]=n[m-d-1];return b}},(x,l,t)=>{var r=t(94),n=t(14),h=t(31),m=t(108),b=r.aTypedArray,d=r.getTypedArrayConstructor,o=r.exportTypedArrayMethod,u=n(r.TypedArrayPrototype.sort);o("toSorted",function(A){A!==void 0&&h(A);var v=b(this),_=m(d(v),v);return u(_,A)})},(x,l,t)=>{var r=t(64);x.exports=function(n,h){for(var m=0,b=r(h),d=new n(b);b>m;)d[m]=h[m++];return d}},(x,l,t)=>{var r=t(110),n=t(94),h=t(111),m=t(62),b=t(112),d=n.aTypedArray,o=n.getTypedArrayConstructor,u=n.exportTypedArrayMethod,g=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(A){return A===8}}();u("with",function(A,v){var _=d(this),P=m(A),I=h(_)?b(v):+v;return r(_,o(_),P,I)},!g)},(x,l,t)=>{var r=t(64),n=t(62),h=RangeError;x.exports=function(m,b,d,o){var u=r(m),g=n(d),A=g<0?u+g:g;if(A>=u||A<0)throw h("Incorrect index");for(var v=new b(u),_=0;_<u;_++)v[_]=_===A?o:m[_];return v}},(x,l,t)=>{var r=t(78);x.exports=function(n){var h=r(n);return h==="BigInt64Array"||h==="BigUint64Array"}},(x,l,t)=>{var r=t(19),n=TypeError;x.exports=function(h){var m=r(h,"number");if(typeof m=="number")throw n("Can't convert number to bigint");return BigInt(m)}},(x,l,t)=>{var r=t(6),n=t(88),h=t(114),m=ArrayBuffer.prototype;r&&!("detached"in m)&&n(m,"detached",{configurable:!0,get:function(){return h(this)}})},(x,l,t)=>{var r=t(14),n=t(115),h=r(ArrayBuffer.prototype.slice);x.exports=function(m){if(n(m)!==0)return!1;try{return h(m,0,0),!1}catch{return!0}}},(x,l,t)=>{var r=t(72),n=t(15),h=TypeError;x.exports=r(ArrayBuffer.prototype,"byteLength","get")||function(m){if(n(m)!=="ArrayBuffer")throw h("ArrayBuffer expected");return m.byteLength}},(x,l,t)=>{var r=t(3),n=t(117);n&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},(x,l,t)=>{var r=t(4),n=t(14),h=t(72),m=t(118),b=t(114),d=t(115),o=t(119),u=r.TypeError,g=r.structuredClone,A=r.ArrayBuffer,v=r.DataView,_=Math.min,P=A.prototype,I=v.prototype,T=n(P.slice),M=h(P,"resizable","get"),i=h(P,"maxByteLength","get"),e=n(I.getInt8),s=n(I.setInt8);x.exports=o&&function(c,f,O){var R=d(c),K=f===void 0?R:m(f),X=!M||!M(c);if(b(c))throw u("ArrayBuffer is detached");var et=g(c,{transfer:[c]});if(R===K&&(O||X))return et;if(R>=K&&(!O||X))return T(et,0,K);for(var lt=O&&!X&&i?{maxByteLength:i(et)}:void 0,V=new A(K,lt),H=new v(et),p=new v(V),y=_(K,R),S=0;S<y;S++)s(p,S,e(H,S));return V}},(x,l,t)=>{var r=t(62),n=t(65),h=RangeError;x.exports=function(m){if(m===void 0)return 0;var b=r(m),d=n(b);if(b!==d)throw h("Wrong length or index");return d}},(x,l,t)=>{var r=t(4),n=t(7),h=t(28),m=t(120),b=t(121),d=t(122),o=r.structuredClone;x.exports=!!o&&!n(function(){if(b&&h>92||d&&h>94||m&&h>97)return!1;var u=new ArrayBuffer(8),g=o(u,{transfer:[u]});return u.byteLength!==0||g.byteLength!==8})},(x,l,t)=>{var r=t(121),n=t(122);x.exports=!r&&!n&&typeof window=="object"&&typeof document=="object"},x=>{x.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(x,l,t)=>{var r=t(4),n=t(15);x.exports=n(r.process)==="process"},(x,l,t)=>{var r=t(3),n=t(117);n&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var x,l,t,ce,n,Se,m,b,d,o,u,g,A,v,xe,P,I,Ne,M;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0,__w_pdfjs_require__(84),__w_pdfjs_require__(86),__w_pdfjs_require__(87),__w_pdfjs_require__(2),__w_pdfjs_require__(93),__w_pdfjs_require__(101),__w_pdfjs_require__(102),__w_pdfjs_require__(105),__w_pdfjs_require__(107),__w_pdfjs_require__(109),__w_pdfjs_require__(113),__w_pdfjs_require__(116),__w_pdfjs_require__(123),__w_pdfjs_require__(89),__w_pdfjs_require__(125),__w_pdfjs_require__(136),__w_pdfjs_require__(138),__w_pdfjs_require__(141),__w_pdfjs_require__(143),__w_pdfjs_require__(145),__w_pdfjs_require__(147),__w_pdfjs_require__(149),__w_pdfjs_require__(152);var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(163),_display_utils=__w_pdfjs_require__(168),_font_loader=__w_pdfjs_require__(171),_displayNode_utils=__w_pdfjs_require__(172),_canvas=__w_pdfjs_require__(173),_worker_options=__w_pdfjs_require__(176),_message_handler=__w_pdfjs_require__(177),_metadata=__w_pdfjs_require__(178),_optional_content_config=__w_pdfjs_require__(179),_transport_stream=__w_pdfjs_require__(180),_displayFetch_stream=__w_pdfjs_require__(181),_displayNetwork=__w_pdfjs_require__(184),_displayNode_stream=__w_pdfjs_require__(185),_displaySvg=__w_pdfjs_require__(186),_xfa_text=__w_pdfjs_require__(194);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(i){var Pt,Ft;if(typeof i=="string"||i instanceof URL?i={url:i}:(0,_util.isArrayBuffer)(i)&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:s}=e,c=i.url?getUrlProp(i.url):null,f=i.data?getDataProp(i.data):null,O=i.httpHeaders||null,R=i.withCredentials===!0,K=(Pt=i.password)!=null?Pt:null,X=i.range instanceof PDFDataRangeTransport?i.range:null,et=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let lt=i.worker instanceof PDFWorker?i.worker:null;const V=i.verbosity,H=typeof i.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(i.docBaseUrl)?null:i.docBaseUrl,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,y=i.cMapPacked!==!1,S=i.CMapReaderFactory||DefaultCMapReaderFactory,N=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,q=i.StandardFontDataFactory||DefaultStandardFontDataFactory,Q=i.stopAtErrors!==!0,W=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,L=i.isEvalSupported!==!1,C=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!_util.isNodeJS,F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,E=typeof i.disableFontFace=="boolean"?i.disableFontFace:_util.isNodeJS,B=i.fontExtraProperties===!0,U=i.enableXfa===!0,D=i.ownerDocument||globalThis.document,z=i.disableRange===!0,Y=i.disableStream===!0,it=i.disableAutoFetch===!0,nt=i.pdfBug===!0,dt=X?X.length:(Ft=i.length)!=null?Ft:NaN,ut=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!_util.isNodeJS&&!E,vt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:S===_display_utils.DOMCMapReaderFactory&&q===_display_utils.DOMStandardFontDataFactory&&p&&N&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(N,document.baseURI),yt=i.canvasFactory||new DefaultCanvasFactory({ownerDocument:D}),ft=i.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:D});(0,_util.setVerbosityLevel)(V);const mt={canvasFactory:yt,filterFactory:ft};if(vt||(mt.cMapReaderFactory=new S({baseUrl:p,isCompressed:y}),mt.standardFontDataFactory=new q({baseUrl:N})),!lt){const Lt={verbosity:V,port:_worker_options.GlobalWorkerOptions.workerPort};lt=Lt.port?PDFWorker.fromPort(Lt):new PDFWorker(Lt),e._worker=lt}const Mt={docId:s,apiVersion:"3.11.174",data:f,password:K,disableAutoFetch:it,rangeChunkSize:et,length:dt,docBaseUrl:H,enableXfa:U,evaluatorOptions:{maxImageSize:W,disableFontFace:E,ignoreErrors:Q,isEvalSupported:L,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:F,fontExtraProperties:B,useSystemFonts:ut,cMapUrl:vt?p:null,standardFontDataUrl:vt?N:null}},At={ignoreErrors:Q,isEvalSupported:L,disableFontFace:E,fontExtraProperties:B,enableXfa:U,ownerDocument:D,disableAutoFetch:it,pdfBug:nt,styleElement:null};return lt.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const Lt=_fetchDocument(lt,Mt),Nt=new Promise(function(Bt){let ee;X?ee=new _transport_stream.PDFDataTransportStream({length:dt,initialData:X.initialData,progressiveDone:X.progressiveDone,contentDispositionFilename:X.contentDispositionFilename,disableRange:z,disableStream:Y},X):f||(ee=(Gt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Gt):(0,_display_utils.isValidFetchUrl)(Gt.url)?new _displayFetch_stream.PDFFetchStream(Gt):new _displayNetwork.PDFNetworkStream(Gt))({url:c,length:dt,httpHeaders:O,withCredentials:R,rangeChunkSize:et,disableRange:z,disableStream:Y})),Bt(ee)});return Promise.all([Lt,Nt]).then(function(Bt){let[ee,Gt]=Bt;if(e.destroyed)throw new Error("Loading aborted");const Jt=new _message_handler.MessageHandler(s,ee,lt.port),Kt=new WorkerTransport(Jt,e,Gt,At,mt);e._transport=Kt,Jt.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(i,e){if(i.destroyed)throw new Error("Worker was destroyed");const s=await i.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(i.destroyed)throw new Error("Worker was destroyed");return s}function getUrlProp(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(_util.isNodeJS&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(i){if(_util.isNodeJS&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return(0,_util.stringToBytes)(i);if(typeof i=="object"&&!isNaN(i==null?void 0:i.length)||(0,_util.isArrayBuffer)(i))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,s,c;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((s=this._transport)==null?void 0:s.destroy())}catch(f){throw(c=this._worker)!=null&&c.port&&delete this._worker._pendingDestroy,f}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,s){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2],f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=e,this.initialData=s,this.progressiveDone=c,this.contentDispositionFilename=f,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,s){for(const c of this._rangeListeners)c(e,s)}onDataProgress(e,s){this._readyCapability.promise.then(()=>{for(const c of this._progressListeners)c(e,s)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,s){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,s){this._pdfInfo=e,this._transport=s,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(c=>{if(!c)return c;const f=[];for(const O in c)f.push(...c[O]);return f}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,s,c){$(this,t);$(this,n);$(this,x,null);$(this,l,!1);let f=arguments.length>3&&arguments[3]!==void 0&&arguments[3];this._pageIndex=e,this._pageInfo=s,this._transport=c,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=c.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:s=this.rotate,offsetX:c=0,offsetY:f=0,dontFlip:O=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:s,offsetX:c,offsetY:f,dontFlip:O})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,s.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render(e){var Q,W;let{canvasContext:s,viewport:c,intent:f="display",annotationMode:O=_util.AnnotationMode.ENABLE,transform:R=null,background:K=null,optionalContentConfigPromise:X=null,annotationCanvasMap:et=null,pageColors:lt=null,printAnnotationStorage:V=null}=e;(Q=this._stats)==null||Q.time("Overall");const H=this._transport.getRenderingIntent(f,O,V);st(this,l,!1),Z(this,n,Se).call(this),X||(X=this._transport.getOptionalContentConfig());let p=this._intentStates.get(H.cacheKey);p||(p=Object.create(null),this._intentStates.set(H.cacheKey,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const y=!!(H.renderingIntent&_util.RenderingIntentFlag.PRINT);p.displayReadyCapability||(p.displayReadyCapability=new _util.PromiseCapability,p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(W=this._stats)==null||W.time("Page Request"),this._pumpOperatorList(H));const S=L=>{var C,F;p.renderTasks.delete(N),(this._maybeCleanupAfterRender||y)&&st(this,l,!0),Z(this,t,ce).call(this,!y),L?(N.capability.reject(L),this._abortOperatorList({intentState:p,reason:L instanceof Error?L:new Error(L)})):N.capability.resolve(),(C=this._stats)==null||C.timeEnd("Rendering"),(F=this._stats)==null||F.timeEnd("Overall")},N=new InternalRenderTask({callback:S,params:{canvasContext:s,viewport:c,transform:R,background:K},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:et,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:lt});(p.renderTasks||(p.renderTasks=new Set)).add(N);const q=N.task;return Promise.all([p.displayReadyCapability.promise,X]).then(L=>{var E;let[C,F]=L;this.destroyed?S():((E=this._stats)==null||E.time("Rendering"),N.initializeGraphics({transparency:C,optionalContentConfig:F}),N.operatorListChanged())}).catch(S),q}getOperatorList(){var K;let{intent:e="display",annotationMode:s=_util.AnnotationMode.ENABLE,printAnnotationStorage:c=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=this._transport.getRenderingIntent(e,s,c,!0);let O,R=this._intentStates.get(f.cacheKey);return R||(R=Object.create(null),this._intentStates.set(f.cacheKey,R)),R.opListReadCapability||(O=Object.create(null),O.operatorListChanged=function(){R.operatorList.lastChunk&&(R.opListReadCapability.resolve(R.operatorList),R.renderTasks.delete(O))},R.opListReadCapability=new _util.PromiseCapability,(R.renderTasks||(R.renderTasks=new Set)).add(O),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(K=this._stats)==null||K.time("Page Request"),this._pumpOperatorList(f)),R.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:s=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:s===!0},{highWaterMark:100,size:c=>c.items.length})}getTextContent(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(c=>_xfa_text.XfaText.textContent(c));const s=this.streamTextContent(e);return new Promise(function(c,f){const O=s.getReader(),R={items:[],styles:Object.create(null)};(function K(){O.read().then(function(X){let{value:et,done:lt}=X;lt?c(R):(Object.assign(R.styles,et.styles),R.items.push(...et.items),K())},f)})()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const c of s.renderTasks)e.push(c.completed),c.cancel();return this.objs.clear(),st(this,l,!1),Z(this,n,Se).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];st(this,l,!0);const s=Z(this,t,ce).call(this,!1);return e&&s&&this._stats&&(this._stats=new _display_utils.StatTimer),s}_startRenderPage(e,s){var f,O;const c=this._intentStates.get(s);c&&((f=this._stats)==null||f.timeEnd("Page Request"),(O=c.displayReadyCapability)==null||O.resolve(e))}_renderPageChunk(e,s){for(let c=0,f=e.length;c<f;c++)s.operatorList.fnArray.push(e.fnArray[c]),s.operatorList.argsArray.push(e.argsArray[c]);s.operatorList.lastChunk=e.lastChunk,s.operatorList.separateAnnots=e.separateAnnots;for(const c of s.renderTasks)c.operatorListChanged();e.lastChunk&&Z(this,t,ce).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:s,cacheKey:c,annotationStorageSerializable:f}=e;const{map:O,transfers:R}=f,K=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:c,annotationStorage:O},R).getReader(),X=this._intentStates.get(c);X.streamReader=K;const et=()=>{K.read().then(lt=>{let{value:V,done:H}=lt;H?X.streamReader=null:this._transport.destroyed||(this._renderPageChunk(V,X),et())},lt=>{if(X.streamReader=null,!this._transport.destroyed){if(X.operatorList){X.operatorList.lastChunk=!0;for(const V of X.renderTasks)V.operatorListChanged();Z(this,t,ce).call(this,!0)}if(X.displayReadyCapability)X.displayReadyCapability.reject(lt);else{if(!X.opListReadCapability)throw lt;X.opListReadCapability.reject(lt)}}})};et()}_abortOperatorList(e){let{intentState:s,reason:c,force:f=!1}=e;if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!f){if(s.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){let O=RENDERING_CANCELLED_TIMEOUT;c.extraDelay>0&&c.extraDelay<1e3&&(O+=c.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:c,force:!0})},O);return}}if(s.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[O,R]of this._intentStates)if(R===s){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}x=new WeakMap,l=new WeakMap,t=new WeakSet,ce=function(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Z(this,n,Se).call(this),!a(this,l)||this.destroyed)return!1;if(e)return st(this,x,setTimeout(()=>{st(this,x,null),Z(this,t,ce).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:s,operatorList:c}of this._intentStates.values())if(s.size>0||!c.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),st(this,l,!1),!0},n=new WeakSet,Se=function(){a(this,x)&&(clearTimeout(a(this,x)),st(this,x,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){$(this,m,new Set);$(this,b,Promise.resolve())}postMessage(e,s){const c={data:structuredClone(e,null)};a(this,b).then(()=>{for(const f of a(this,m))f.call(this,c)})}addEventListener(e,s){a(this,m).add(s)}removeEventListener(e,s){a(this,m).delete(s)}terminate(){a(this,m).clear()}}m=new WeakMap,b=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS&&typeof require=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const i=(d=document==null?void 0:document.currentScript)==null?void 0:d.src;i&&(PDFWorkerUtil.fallbackWorkerSrc=i.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(i,e){let s;try{if(s=new URL(i),!s.origin||s.origin==="null")return!1}catch{return!1}const c=new URL(e,s);return s.origin===c.origin},PDFWorkerUtil.createCDNWrapper=function(i){const e=`importScripts("${i}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#l;constructor(){var c;let{name:i=null,port:e=null,verbosity:s=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.name=i,this.destroyed=!1,this.verbosity=s,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if((c=PDFWorker.#l)!=null&&c.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#l||(PDFWorker.#l=new WeakMap)).set(e,this),this._initializeFromPort(e)}else this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(i){this._port=i,this._messageHandler=new _message_handler.MessageHandler("main","worker",i),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:i}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,i)||(i=PDFWorkerUtil.createCDNWrapper(new URL(i,window.location).href));const e=new Worker(i),s=new _message_handler.MessageHandler("main","worker",e),c=()=>{e.removeEventListener("error",f),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},f=()=>{this._webWorker||c()};e.addEventListener("error",f),s.on("test",R=>{e.removeEventListener("error",f),this.destroyed?c():R?(this._messageHandler=s,this._port=e,this._webWorker=e,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),e.terminate())}),s.on("ready",R=>{if(e.removeEventListener("error",f),this.destroyed)c();else try{O()}catch{this._setupFakeWorker()}});const O=()=>{const R=new Uint8Array;s.send("test",R,[R.buffer])};O();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(i=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const s="fake"+PDFWorkerUtil.fakeWorkerId++,c=new _message_handler.MessageHandler(s+"_worker",s,e);i.setup(c,e);const f=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=f,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})}).catch(i=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${i.message}".`))})}destroy(){var i;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(i=PDFWorker.#l)==null||i.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(i){var s;if(!(i!=null&&i.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=this.#l)==null?void 0:s.get(i.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(i)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var i;try{return((i=globalThis.pdfjsWorker)==null?void 0:i.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof require=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,s,c,f,O){$(this,v);$(this,o,new Map);$(this,u,new Map);$(this,g,new Map);$(this,A,null);this.messageHandler=e,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:f.ownerDocument,styleElement:f.styleElement}),this._params=f,this.canvasFactory=O.canvasFactory,this.filterFactory=O.filterFactory,this.cMapReaderFactory=O.cMapReaderFactory,this.standardFontDataFactory=O.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=c,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,f=arguments.length>3&&arguments[3]!==void 0&&arguments[3],O=_util.RenderingIntentFlag.DISPLAY,R=_annotation_storage.SerializableEmpty;switch(e){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(s){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,R=(O&_util.RenderingIntentFlag.PRINT&&c instanceof _annotation_storage.PrintAnnotationStorage?c:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${s}`)}return f&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${R.hash}`,annotationStorageSerializable:R}}destroy(){var c;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(c=a(this,A))==null||c.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const f of a(this,u).values())e.push(f._destroy());a(this,u).clear(),a(this,g).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return e.push(s),Promise.all(e).then(()=>{var f;this.commonObjs.clear(),this.fontLoader.clear(),a(this,o).clear(),this.filterFactory.destroy(),(f=this._networkStream)==null||f.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:s}=this;e.on("GetReader",(c,f)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},f.onPull=()=>{this._fullReader.read().then(function(O){let{value:R,done:K}=O;K?f.close():((0,_util.assert)(R instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(R),1,[R]))}).catch(O=>{f.error(O)})},f.onCancel=O=>{this._fullReader.cancel(O),f.ready.catch(R=>{if(!this.destroyed)throw R})}}),e.on("ReaderHeadersReady",c=>{const f=new _util.PromiseCapability,O=this._fullReader;return O.headersReady.then(()=>{var R;(!O.isStreamingSupported||!O.isRangeSupported)&&(this._lastProgress&&((R=s.onProgress)==null||R.call(s,this._lastProgress)),O.onProgress=K=>{var X;(X=s.onProgress)==null||X.call(s,{loaded:K.loaded,total:K.total})}),f.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},f.reject),f.promise}),e.on("GetRangeReader",(c,f)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const O=this._networkStream.getRangeReader(c.begin,c.end);O?(f.onPull=()=>{O.read().then(function(R){let{value:K,done:X}=R;X?f.close():((0,_util.assert)(K instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(K),1,[K]))}).catch(R=>{f.error(R)})},f.onCancel=R=>{O.cancel(R),f.ready.catch(K=>{if(!this.destroyed)throw K})}):f.close()}),e.on("GetDoc",c=>{let{pdfInfo:f}=c;this._numPages=f.numPages,this._htmlForXfa=f.htmlForXfa,delete f.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(f,this))}),e.on("DocException",function(c){let f;switch(c.name){case"PasswordException":f=new _util.PasswordException(c.message,c.code);break;case"InvalidPDFException":f=new _util.InvalidPDFException(c.message);break;case"MissingPDFException":f=new _util.MissingPDFException(c.message);break;case"UnexpectedResponseException":f=new _util.UnexpectedResponseException(c.message,c.status);break;case"UnknownErrorException":f=new _util.UnknownErrorException(c.message,c.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(f)}),e.on("PasswordRequest",c=>{if(st(this,A,new _util.PromiseCapability),s.onPassword){const f=O=>{O instanceof Error?a(this,A).reject(O):a(this,A).resolve({password:O})};try{s.onPassword(f,c.code)}catch(O){a(this,A).reject(O)}}else a(this,A).reject(new _util.PasswordException(c.message,c.code));return a(this,A).promise}),e.on("DataLoaded",c=>{var f;(f=s.onProgress)==null||f.call(s,{loaded:c.length,total:c.length}),this.downloadInfoCapability.resolve(c)}),e.on("StartRenderPage",c=>{this.destroyed||a(this,u).get(c.pageIndex)._startRenderPage(c.transparency,c.cacheKey)}),e.on("commonobj",c=>{var K;let[f,O,R]=c;if(!this.destroyed&&!this.commonObjs.has(f))switch(O){case"Font":const X=this._params;if("error"in R){const V=R.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(f,V);break}const et=X.pdfBug&&((K=globalThis.FontInspector)!=null&&K.enabled)?(V,H)=>globalThis.FontInspector.fontAdded(V,H):null,lt=new _font_loader.FontFaceObject(R,{isEvalSupported:X.isEvalSupported,disableFontFace:X.disableFontFace,ignoreErrors:X.ignoreErrors,inspectFont:et});this.fontLoader.bind(lt).catch(V=>e.sendWithPromise("FontFallback",{id:f})).finally(()=>{!X.fontExtraProperties&&lt.data&&(lt.data=null),this.commonObjs.resolve(f,lt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(f,R);break;default:throw new Error(`Got unknown common object type ${O}`)}}),e.on("obj",c=>{var et;let[f,O,R,K]=c;if(this.destroyed)return;const X=a(this,u).get(O);if(!X.objs.has(f))switch(R){case"Image":if(X.objs.resolve(f,K),K){let lt;if(K.bitmap){const{width:V,height:H}=K;lt=V*H*4}else lt=((et=K.data)==null?void 0:et.length)||0;lt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(X._maybeCleanupAfterRender=!0)}break;case"Pattern":X.objs.resolve(f,K);break;default:throw new Error(`Got unknown object type ${R}`)}}),e.on("DocProgress",c=>{var f;this.destroyed||((f=s.onProgress)==null||f.call(s,{loaded:c.loaded,total:c.total}))}),e.on("FetchBuiltInCMap",c=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(c):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",c=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(c):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var c,f;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:(f=(c=this._fullReader)==null?void 0:c.filename)!=null?f:null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=e-1,c=a(this,g).get(s);if(c)return c;const f=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");const R=new PDFPageProxy(s,O,this,this._params.pdfBug);return a(this,u).set(s,R),R});return a(this,g).set(s,f),f}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:s})}getFieldObjects(){return Z(this,v,xe).call(this,"GetFieldObjects")}hasJSActions(){return Z(this,v,xe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Z(this,v,xe).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",s=a(this,o).get(e);if(s)return s;const c=this.messageHandler.sendWithPromise(e,null).then(f=>{var O,R,K,X;return{info:f[0],metadata:f[1]?new _metadata.Metadata(f[1]):null,contentDispositionFilename:(R=(O=this._fullReader)==null?void 0:O.filename)!=null?R:null,contentLength:(X=(K=this._fullReader)==null?void 0:K.contentLength)!=null?X:null}});return a(this,o).set(e,c),c}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of a(this,u).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,o).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:s}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:s})}}o=new WeakMap,u=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakSet,xe=function(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const c=a(this,o).get(e);if(c)return c;const f=this.messageHandler.sendWithPromise(e,s);return a(this,o).set(e,f),f};class PDFObjects{constructor(){$(this,I);$(this,P,Object.create(null))}get(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(s){const f=Z(this,I,Ne).call(this,e);return f.capability.promise.then(()=>s(f.data)),null}const c=a(this,P)[e];if(!(c!=null&&c.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return c.data}has(e){const s=a(this,P)[e];return(s==null?void 0:s.capability.settled)||!1}resolve(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const c=Z(this,I,Ne).call(this,e);c.data=s,c.capability.resolve()}clear(){var e;for(const s in a(this,P)){const{data:c}=a(this,P)[s];(e=c==null?void 0:c.bitmap)==null||e.close()}st(this,P,Object.create(null))}}P=new WeakMap,I=new WeakSet,Ne=function(e){var s;return(s=a(this,P))[e]||(s[e]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(e){$(this,M,null);st(this,M,e),this.onContinue=null}get promise(){return a(this,M).capability.promise}cancel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;a(this,M).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,M).operatorList;if(!e)return!1;const{annotationCanvasMap:s}=a(this,M);return e.form||e.canvas&&(s==null?void 0:s.size)>0}}M=new WeakMap,exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor(e){let{callback:s,params:c,objs:f,commonObjs:O,annotationCanvasMap:R,operatorList:K,pageIndex:X,canvasFactory:et,filterFactory:lt,useRequestAnimationFrame:V=!1,pdfBug:H=!1,pageColors:p=null}=e;this.callback=s,this.params=c,this.objs=f,this.commonObjs=O,this.annotationCanvasMap=R,this.operatorListIdx=null,this.operatorList=K,this._pageIndex=X,this.canvasFactory=et,this.filterFactory=lt,this._pdfBug=H,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var X,et;let{transparency:s=!1,optionalContentConfig:c}=e;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&((X=globalThis.StepperManager)!=null&&X.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:f,viewport:O,transform:R,background:K}=this.params;this.gfx=new _canvas.CanvasGraphics(f,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:c},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:R,viewport:O,transparency:s,background:K}),this.operatorListIdx=0,this.graphicsReady=!0,(et=this.graphicsReadyCallback)==null||et.call(this)}cancel(){var c;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(c=this.gfx)==null||c.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){var e;this.graphicsReady?((e=this.stepper)==null||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(x,l,t)=>{var r=t(3),n=t(126);r({target:"Set",proto:!0,real:!0,forced:!t(135)("difference")},{difference:n})},(x,l,t)=>{var r=t(127),n=t(128),h=t(129),m=t(132),b=t(133),d=t(130),o=t(131),u=n.has,g=n.remove;x.exports=function(v){var _=r(this),P=b(v),I=h(_);return m(_)<=P.size?d(_,function(T){P.includes(T)&&g(I,T)}):o(P.getIterator(),function(T){u(_,T)&&g(I,T)}),I}},(x,l,t)=>{var r=t(128).has;x.exports=function(n){return r(n),n}},(x,l,t)=>{var r=t(14),n=Set.prototype;x.exports={Set,add:r(n.add),has:r(n.has),remove:r(n.delete),proto:n}},(x,l,t)=>{var r=t(128),n=t(130),h=r.Set,m=r.add;x.exports=function(b){var d=new h;return n(b,function(o){m(d,o)}),d}},(x,l,t)=>{var r=t(14),n=t(131),h=t(128),m=h.Set,b=h.proto,d=r(b.forEach),o=r(b.keys),u=o(new m).next;x.exports=function(g,A,v){return v?n({iterator:o(g),next:u},A):d(g,A)}},(x,l,t)=>{var r=t(8);x.exports=function(n,h,m){for(var b,d,o=m?n:n.iterator,u=n.next;!(b=r(u,o)).done;)if((d=h(b.value))!==void 0)return d}},(x,l,t)=>{var r=t(72),n=t(128);x.exports=r(n.proto,"size","get")||function(h){return h.size}},(x,l,t)=>{var r=t(31),n=t(47),h=t(8),m=t(62),b=t(134),d="Invalid size",o=RangeError,u=TypeError,g=Math.max,A=function(v,_,P,I){this.set=v,this.size=_,this.has=P,this.keys=I};A.prototype={getIterator:function(){return b(n(h(this.keys,this.set)))},includes:function(v){return h(this.has,this.set,v)}},x.exports=function(v){n(v);var _=+v.size;if(_!=_)throw u(d);var P=m(_);if(P<0)throw o(d);return new A(v,g(P,0),r(v.has),r(v.keys))}},x=>{x.exports=function(l){return{iterator:l,next:l.next,done:!1}}},(x,l,t)=>{var r=t(24),n=function(h){return{size:h,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};x.exports=function(h){var m=r("Set");try{new m()[h](n(0));try{return new m()[h](n(-1)),!1}catch{return!0}}catch{return!1}}},(x,l,t)=>{var r=t(3),n=t(7),h=t(137);r({target:"Set",proto:!0,real:!0,forced:!t(135)("intersection")||n(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"})},{intersection:h})},(x,l,t)=>{var r=t(127),n=t(128),h=t(132),m=t(133),b=t(130),d=t(131),o=n.Set,u=n.add,g=n.has;x.exports=function(v){var _=r(this),P=m(v),I=new o;return h(_)>P.size?d(P.getIterator(),function(T){g(_,T)&&u(I,T)}):b(_,function(T){P.includes(T)&&u(I,T)}),I}},(x,l,t)=>{var r=t(3),n=t(139);r({target:"Set",proto:!0,real:!0,forced:!t(135)("isDisjointFrom")},{isDisjointFrom:n})},(x,l,t)=>{var r=t(127),n=t(128).has,h=t(132),m=t(133),b=t(130),d=t(131),o=t(140);x.exports=function(g){var A=r(this),v=m(g);if(h(A)<=v.size)return b(A,function(P){if(v.includes(P))return!1},!0)!==!1;var _=v.getIterator();return d(_,function(P){if(n(A,P))return o(_,"normal",!1)})!==!1}},(x,l,t)=>{var r=t(8),n=t(47),h=t(30);x.exports=function(m,b,d){var o,u;n(m);try{if(!(o=h(m,"return"))){if(b==="throw")throw d;return d}o=r(o,m)}catch(g){u=!0,o=g}if(b==="throw")throw d;if(u)throw o;return n(o),d}},(x,l,t)=>{var r=t(3),n=t(142);r({target:"Set",proto:!0,real:!0,forced:!t(135)("isSubsetOf")},{isSubsetOf:n})},(x,l,t)=>{var r=t(127),n=t(132),h=t(130),m=t(133);x.exports=function(d){var o=r(this),u=m(d);return!(n(o)>u.size)&&h(o,function(g){if(!u.includes(g))return!1},!0)!==!1}},(x,l,t)=>{var r=t(3),n=t(144);r({target:"Set",proto:!0,real:!0,forced:!t(135)("isSupersetOf")},{isSupersetOf:n})},(x,l,t)=>{var r=t(127),n=t(128).has,h=t(132),m=t(133),b=t(131),d=t(140);x.exports=function(u){var g=r(this),A=m(u);if(h(g)<A.size)return!1;var v=A.getIterator();return b(v,function(_){if(!n(g,_))return d(v,"normal",!1)})!==!1}},(x,l,t)=>{var r=t(3),n=t(146);r({target:"Set",proto:!0,real:!0,forced:!t(135)("symmetricDifference")},{symmetricDifference:n})},(x,l,t)=>{var r=t(127),n=t(128),h=t(129),m=t(133),b=t(131),d=n.add,o=n.has,u=n.remove;x.exports=function(A){var v=r(this),_=m(A).getIterator(),P=h(v);return b(_,function(I){o(v,I)?u(P,I):d(P,I)}),P}},(x,l,t)=>{var r=t(3),n=t(148);r({target:"Set",proto:!0,real:!0,forced:!t(135)("union")},{union:n})},(x,l,t)=>{var r=t(127),n=t(128).add,h=t(129),m=t(133),b=t(131);x.exports=function(o){var u=r(this),g=m(o).getIterator(),A=h(u);return b(g,function(v){n(A,v)}),A}},(x,l,t)=>{var r=t(3),n=t(4),h=t(24),m=t(11),b=t(45).f,d=t(39),o=t(150),u=t(75),g=t(76),A=t(151),v=t(82),_=t(6),P=t(36),I="DOMException",T=h("Error"),M=h(I),i=function(){o(this,e);var p=arguments.length,y=g(p<1?void 0:arguments[0]),S=g(p<2?void 0:arguments[1],"Error"),N=new M(y,S),q=T(y);return q.name=I,b(N,"stack",m(1,v(q.stack,1))),u(N,this,i),N},e=i.prototype=M.prototype,s="stack"in T(I),c="stack"in new M(1,2),f=M&&_&&Object.getOwnPropertyDescriptor(n,I),O=!(!f||f.writable&&f.configurable),R=s&&!O&&!c;r({global:!0,constructor:!0,forced:P||R},{DOMException:R?i:M});var K=h(I),X=K.prototype;if(X.constructor!==K){P||b(X,"constructor",m(1,K));for(var et in A)if(d(A,et)){var lt=A[et],V=lt.s;d(K,V)||b(K,V,m(6,lt.c))}}},(x,l,t)=>{var r=t(25),n=TypeError;x.exports=function(h,m){if(r(m,h))return h;throw n("Incorrect invocation")}},x=>{x.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},(x,l,t)=>{var r,n=t(36),h=t(3),m=t(4),b=t(24),d=t(14),o=t(7),u=t(41),g=t(21),A=t(153),v=t(17),_=t(20),P=t(23),I=t(154),T=t(47),M=t(78),i=t(39),e=t(159),s=t(44),c=t(64),f=t(85),O=t(160),R=t(162),K=t(128),X=t(83),et=t(119),lt=m.Object,V=m.Array,H=m.Date,p=m.Error,y=m.EvalError,S=m.RangeError,N=m.ReferenceError,q=m.SyntaxError,Q=m.TypeError,W=m.URIError,L=m.PerformanceMark,C=m.WebAssembly,F=C&&C.CompileError||p,E=C&&C.LinkError||p,B=C&&C.RuntimeError||p,U=b("DOMException"),D=R.Map,z=R.has,Y=R.get,it=R.set,nt=K.Set,dt=K.add,ut=b("Object","keys"),vt=d([].push),yt=d((!0).valueOf),ft=d(1 .valueOf),mt=d("".valueOf),Mt=d(H.prototype.getTime),At=u("structuredClone"),Pt="DataCloneError",Ft="Transferring",Lt=function(ct){return!o(function(){var gt=new m.Set([7]),Tt=ct(gt),Wt=ct(lt(7));return Tt===gt||!Tt.has(7)||typeof Wt!="object"||+Wt!=7})&&ct},Nt=function(ct,gt){return!o(function(){var Tt=new gt,Wt=ct({a:Tt,b:Tt});return!(Wt&&Wt.a===Wt.b&&Wt.a instanceof gt&&Wt.a.stack===Tt.stack)})},Bt=m.structuredClone,ee=n||!Nt(Bt,p)||!Nt(Bt,U)||(r=Bt,!!o(function(){var ct=r(new m.AggregateError([1],At,{cause:3}));return ct.name!=="AggregateError"||ct.errors[0]!==1||ct.message!==At||ct.cause!==3})),Gt=!Bt&&Lt(function(ct){return new L(At,{detail:ct}).detail}),Jt=Lt(Bt)||Gt,Kt=function(ct){throw new U("Uncloneable type: "+ct,Pt)},$t=function(ct,gt){throw new U((gt||"Cloning")+" of "+ct+" cannot be properly polyfilled in this engine",Pt)},Yt=function(ct,gt){return Jt||$t(gt),Jt(ct)},Qt=function(ct,gt,Tt){if(z(gt,ct))return Y(gt,ct);var Wt,rt,ot,xt,St,wt;if((Tt||M(ct))==="SharedArrayBuffer")Wt=Jt?Jt(ct):ct;else{var Rt=m.DataView;Rt||typeof ct.slice=="function"||$t("ArrayBuffer");try{if(typeof ct.slice!="function"||ct.resizable)for(rt=ct.byteLength,ot=("maxByteLength"in ct)?{maxByteLength:ct.maxByteLength}:void 0,Wt=new ArrayBuffer(rt,ot),xt=new Rt(ct),St=new Rt(Wt),wt=0;wt<rt;wt++)St.setUint8(wt,xt.getUint8(wt));else Wt=ct.slice(0)}catch{throw new U("ArrayBuffer is detached",Pt)}}return it(gt,ct,Wt),Wt},Vt=function(ct,gt,Tt,Wt,rt){var ot=m[gt];return _(ot)||$t(gt),new ot(Qt(ct.buffer,rt),Tt,Wt)},Zt=function(ct,gt,Tt){this.object=ct,this.type=gt,this.metadata=Tt},zt=function(ct,gt,Tt){if(P(ct)&&Kt("Symbol"),!_(ct))return ct;if(gt){if(z(gt,ct))return Y(gt,ct)}else gt=new D;var Wt,rt,ot,xt,St,wt,Rt,Ot,pt=M(ct);switch(pt){case"Array":ot=V(c(ct));break;case"Object":ot={};break;case"Map":ot=new D;break;case"Set":ot=new nt;break;case"RegExp":ot=new RegExp(ct.source,O(ct));break;case"Error":switch(rt=ct.name){case"AggregateError":ot=b("AggregateError")([]);break;case"EvalError":ot=y();break;case"RangeError":ot=S();break;case"ReferenceError":ot=N();break;case"SyntaxError":ot=q();break;case"TypeError":ot=Q();break;case"URIError":ot=W();break;case"CompileError":ot=F();break;case"LinkError":ot=E();break;case"RuntimeError":ot=B();break;default:ot=p()}break;case"DOMException":ot=new U(ct.message,ct.name);break;case"ArrayBuffer":case"SharedArrayBuffer":ot=Tt?new Zt(ct,pt):Qt(ct,gt,pt);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":wt=pt==="DataView"?ct.byteLength:ct.length,ot=Tt?new Zt(ct,pt,{offset:ct.byteOffset,length:wt}):Vt(ct,pt,ct.byteOffset,wt,gt);break;case"DOMQuad":try{ot=new DOMQuad(zt(ct.p1,gt,Tt),zt(ct.p2,gt,Tt),zt(ct.p3,gt,Tt),zt(ct.p4,gt,Tt))}catch{ot=Yt(ct,pt)}break;case"File":if(Jt)try{ot=Jt(ct),M(ot)!==pt&&(ot=void 0)}catch{}if(!ot)try{ot=new File([ct],ct.name,ct)}catch{}ot||$t(pt);break;case"FileList":if(xt=function(){var j;try{j=new m.DataTransfer}catch{try{j=new m.ClipboardEvent("").clipboardData}catch{}}return j&&j.items&&j.files?j:null}()){for(St=0,wt=c(ct);St<wt;St++)xt.items.add(zt(ct[St],gt,Tt));ot=xt.files}else ot=Yt(ct,pt);break;case"ImageData":try{ot=new ImageData(zt(ct.data,gt,Tt),ct.width,ct.height,{colorSpace:ct.colorSpace})}catch{ot=Yt(ct,pt)}break;default:if(Jt)ot=Jt(ct);else switch(pt){case"BigInt":ot=lt(ct.valueOf());break;case"Boolean":ot=lt(yt(ct));break;case"Number":ot=lt(ft(ct));break;case"String":ot=lt(mt(ct));break;case"Date":ot=new H(Mt(ct));break;case"Blob":try{ot=ct.slice(0,ct.size,ct.type)}catch{$t(pt)}break;case"DOMPoint":case"DOMPointReadOnly":Wt=m[pt];try{ot=Wt.fromPoint?Wt.fromPoint(ct):new Wt(ct.x,ct.y,ct.z,ct.w)}catch{$t(pt)}break;case"DOMRect":case"DOMRectReadOnly":Wt=m[pt];try{ot=Wt.fromRect?Wt.fromRect(ct):new Wt(ct.x,ct.y,ct.width,ct.height)}catch{$t(pt)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Wt=m[pt];try{ot=Wt.fromMatrix?Wt.fromMatrix(ct):new Wt(ct)}catch{$t(pt)}break;case"AudioData":case"VideoFrame":g(ct.clone)||$t(pt);try{ot=ct.clone()}catch{Kt(pt)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":$t(pt);default:Kt(pt)}}switch(it(gt,ct,ot),pt){case"Array":case"Object":for(Rt=ut(ct),St=0,wt=c(Rt);St<wt;St++)Ot=Rt[St],e(ot,Ot,zt(ct[Ot],gt,Tt));break;case"Map":ct.forEach(function(j,w){it(ot,zt(w,gt,Tt),zt(j,gt,Tt))});break;case"Set":ct.forEach(function(j){dt(ot,zt(j,gt,Tt))});break;case"Error":s(ot,"message",zt(ct.message,gt,Tt)),i(ct,"cause")&&s(ot,"cause",zt(ct.cause,gt,Tt)),rt==="AggregateError"&&(ot.errors=zt(ct.errors,gt,Tt));case"DOMException":X&&s(ot,"stack",zt(ct.stack,gt,Tt))}return ot},Xt=function(ct,gt){if(!_(ct))return ct;if(z(gt,ct))return Y(gt,ct);var Tt,Wt,rt,ot,xt,St,wt,Rt;if(ct instanceof Zt)switch(Tt=ct.type,Wt=ct.object,Tt){case"ArrayBuffer":case"SharedArrayBuffer":Rt=Qt(Wt,gt,Tt);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":rt=ct.metadata,Rt=Vt(Wt,Tt,rt.offset,rt.length,gt)}else switch(M(ct)){case"Array":case"Object":for(St=ut(ct),ot=0,xt=c(St);ot<xt;ot++)ct[wt=St[ot]]=Xt(ct[wt],gt);break;case"Map":Rt=new D,ct.forEach(function(Ot,pt){it(Rt,Xt(pt,gt),Xt(Ot,gt))});break;case"Set":Rt=new nt,ct.forEach(function(Ot){dt(Rt,Xt(Ot,gt))});break;case"Error":ct.message=Xt(ct.message,gt),i(ct,"cause")&&(ct.cause=Xt(ct.cause,gt)),ct.name==="AggregateError"&&(ct.errors=Xt(ct.errors,gt));case"DOMException":X&&(ct.stack=Xt(ct.stack,gt))}return it(gt,ct,Rt||ct),Rt||ct};h({global:!0,enumerable:!0,sham:!et,forced:ee},{structuredClone:function(gt){var Tt,Wt,rt=f(arguments.length,1)>1&&!v(arguments[1])?T(arguments[1]):void 0,ot=rt?rt.transfer:void 0,xt=!1;ot!==void 0&&(Wt=function(wt,Rt){if(!_(wt))throw Q("Transfer option cannot be converted to a sequence");var Ot=[];I(wt,function(ht){vt(Ot,T(ht))});for(var pt,j,w,k,G,J=0,tt=c(Ot),at=[];J<tt;)if(pt=Ot[J++],(j=M(pt))!=="ArrayBuffer"){if(z(Rt,pt))throw new U("Duplicate transferable",Pt);if(et)k=Bt(pt,{transfer:[pt]});else switch(j){case"ImageBitmap":w=m.OffscreenCanvas,A(w)||$t(j,Ft);try{(G=new w(pt.width,pt.height)).getContext("bitmaprenderer").transferFromImageBitmap(pt),k=G.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":g(pt.clone)&&g(pt.close)||$t(j,Ft);try{k=pt.clone(),pt.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":$t(j,Ft)}if(k===void 0)throw new U("This object cannot be transferred: "+j,Pt);it(Rt,pt,k)}else vt(at,pt);return at}(ot,Tt=new D),xt=!!c(Wt));var St=zt(gt,Tt,xt);return xt&&(function(wt,Rt){for(var Ot,pt,j=0,w=c(wt);j<w;){if(Ot=wt[j++],z(Rt,Ot))throw new U("Duplicate transferable",Pt);et?pt=Bt(Ot,{transfer:[Ot]}):(g(Ot.transfer)||$t("ArrayBuffer",Ft),pt=Ot.transfer()),it(Rt,Ot,pt)}}(ot,Tt=new D),St=Xt(St,Tt)),St}})},(x,l,t)=>{var r=t(14),n=t(7),h=t(21),m=t(78),b=t(24),d=t(51),o=function(){},u=[],g=b("Reflect","construct"),A=/^\s*(?:class|function)\b/,v=r(A.exec),_=!A.exec(o),P=function(M){if(!h(M))return!1;try{return g(o,u,M),!0}catch{return!1}},I=function(M){if(!h(M))return!1;switch(m(M)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _||!!v(A,d(M))}catch{return!0}};I.sham=!0,x.exports=!g||n(function(){var T;return P(P.call)||!P(Object)||!P(function(){T=!0})||T})?I:P},(x,l,t)=>{var r=t(99),n=t(8),h=t(47),m=t(32),b=t(155),d=t(64),o=t(25),u=t(157),g=t(158),A=t(140),v=TypeError,_=function(I,T){this.stopped=I,this.result=T},P=_.prototype;x.exports=function(I,T,M){var i,e,s,c,f,O,R,K=M&&M.that,X=!(!M||!M.AS_ENTRIES),et=!(!M||!M.IS_RECORD),lt=!(!M||!M.IS_ITERATOR),V=!(!M||!M.INTERRUPTED),H=r(T,K),p=function(S){return i&&A(i,"normal",S),new _(!0,S)},y=function(S){return X?(h(S),V?H(S[0],S[1],p):H(S[0],S[1])):V?H(S,p):H(S)};if(et)i=I.iterator;else if(lt)i=I;else{if(!(e=g(I)))throw v(m(I)+" is not iterable");if(b(e)){for(s=0,c=d(I);c>s;s++)if((f=y(I[s]))&&o(P,f))return f;return new _(!1)}i=u(I,e)}for(O=et?I.next:i.next;!(R=n(O,i)).done;){try{f=y(R.value)}catch(S){A(i,"throw",S)}if(typeof f=="object"&&f&&o(P,f))return f}return new _(!1)}},(x,l,t)=>{var r=t(34),n=t(156),h=r("iterator"),m=Array.prototype;x.exports=function(b){return b!==void 0&&(n.Array===b||m[h]===b)}},x=>{x.exports={}},(x,l,t)=>{var r=t(8),n=t(31),h=t(47),m=t(32),b=t(158),d=TypeError;x.exports=function(o,u){var g=arguments.length<2?b(o):u;if(n(g))return h(r(g,o));throw d(m(o)+" is not iterable")}},(x,l,t)=>{var r=t(78),n=t(30),h=t(17),m=t(156),b=t(34)("iterator");x.exports=function(d){if(!h(d))return n(d,b)||n(d,"@@iterator")||m[r(d)]}},(x,l,t)=>{var r=t(18),n=t(45),h=t(11);x.exports=function(m,b,d){var o=r(b);o in m?n.f(m,o,h(0,d)):m[o]=d}},(x,l,t)=>{var r=t(8),n=t(39),h=t(25),m=t(161),b=RegExp.prototype;x.exports=function(d){var o=d.flags;return o!==void 0||"flags"in b||n(d,"flags")||!h(b,d)?o:r(m,d)}},(x,l,t)=>{var r=t(47);x.exports=function(){var n=r(this),h="";return n.hasIndices&&(h+="d"),n.global&&(h+="g"),n.ignoreCase&&(h+="i"),n.multiline&&(h+="m"),n.dotAll&&(h+="s"),n.unicode&&(h+="u"),n.unicodeSets&&(h+="v"),n.sticky&&(h+="y"),h}},(x,l,t)=>{var r=t(14),n=Map.prototype;x.exports={Map,set:r(n.set),get:r(n.get),has:r(n.has),remove:r(n.delete),proto:n}},(x,l,t)=>{var o,u,g,br,v;Object.defineProperty(l,"__esModule",{value:!0}),l.SerializableEmpty=l.PrintAnnotationStorage=l.AnnotationStorage=void 0,t(89),t(149),t(152);var r=t(1),n=t(164),h=t(170);const m=Object.freeze({map:null,hash:"",transfers:void 0});l.SerializableEmpty=m;class b{constructor(){$(this,g);$(this,o,!1);$(this,u,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(P,I){const T=a(this,u).get(P);return T===void 0?I:Object.assign(I,T)}getRawValue(P){return a(this,u).get(P)}remove(P){if(a(this,u).delete(P),a(this,u).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const I of a(this,u).values())if(I instanceof n.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(P,I){const T=a(this,u).get(P);let M=!1;if(T!==void 0)for(const[i,e]of Object.entries(I))T[i]!==e&&(M=!0,T[i]=e);else M=!0,a(this,u).set(P,I);M&&Z(this,g,br).call(this),I instanceof n.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(I.constructor._type)}has(P){return a(this,u).has(P)}getAll(){return a(this,u).size>0?(0,r.objectFromMap)(a(this,u)):null}setAll(P){for(const[I,T]of Object.entries(P))this.setValue(I,T)}get size(){return a(this,u).size}resetModified(){a(this,o)&&(st(this,o,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new d(this)}get serializable(){if(a(this,u).size===0)return m;const P=new Map,I=new h.MurmurHash3_64,T=[],M=Object.create(null);let i=!1;for(const[e,s]of a(this,u)){const c=s instanceof n.AnnotationEditor?s.serialize(!1,M):s;c&&(P.set(e,c),I.update(`${e}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const e of P.values())e.bitmap&&T.push(e.bitmap);return P.size>0?{map:P,hash:I.hexdigest(),transfers:T}:m}}o=new WeakMap,u=new WeakMap,g=new WeakSet,br=function(){a(this,o)||(st(this,o,!0),typeof this.onSetModified=="function"&&this.onSetModified())},l.AnnotationStorage=b;class d extends b{constructor(I){super();$(this,v,void 0);const{map:T,hash:M,transfers:i}=I.serializable,e=structuredClone(T,null);st(this,v,{map:e,hash:M,transfers:i})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,v)}}v=new WeakMap,l.PrintAnnotationStorage=d},(x,l,t)=>{var d,o,u,g,A,v,_,P,I,T,M,i,e,s,c,je,O,Be,K,Ue,et,We,V,_r,p,yr,S,Ar,q,ze,W,Sr;Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditor=void 0,t(89),t(2);var r=t(165),n=t(1),h=t(168);const C=class C{constructor(E){$(this,c);$(this,O);$(this,et);$(this,V);$(this,p);$(this,S);$(this,q);$(this,W);$(this,d,"");$(this,o,!1);$(this,u,null);$(this,g,null);$(this,A,null);$(this,v,!1);$(this,_,null);$(this,P,this.focusin.bind(this));$(this,I,this.focusout.bind(this));$(this,T,!1);$(this,M,!1);$(this,i,!1);te(this,"_initialOptions",Object.create(null));te(this,"_uiManager",null);te(this,"_focusEventsAllowed",!0);te(this,"_l10nPromise",null);$(this,e,!1);$(this,s,C._zIndex++);this.constructor===C&&(0,n.unreachable)("Cannot initialize AnnotationEditor."),this.parent=E.parent,this.id=E.id,this.width=this.height=null,this.pageIndex=E.parent.pageIndex,this.name=E.name,this.div=null,this._uiManager=E.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=E.isCentered,this._structTreeParentId=null;const{rotation:B,rawDims:{pageWidth:U,pageHeight:D,pageX:z,pageY:Y}}=this.parent.viewport;this.rotation=B,this.pageRotation=(360+B-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[U,D],this.pageTranslation=[z,Y];const[it,nt]=this.parentDimensions;this.x=E.x/it,this.y=E.y/nt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,n.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(E){const B=new b({id:E.parent.getNextId(),parent:E.parent,uiManager:E._uiManager});B.annotationElementId=E.annotationElementId,B.deleted=!0,B._uiManager.addToAnnotationStorage(B)}static initialize(E){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(C._l10nPromise||(C._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(D=>[D,E.get(D)]))),B!=null&&B.strings)for(const D of B.strings)C._l10nPromise.set(D,E.get(D));if(C._borderLineWidth!==-1)return;const U=getComputedStyle(document.documentElement);C._borderLineWidth=parseFloat(U.getPropertyValue("--outline-width"))||0}static updateDefaultParams(E,B){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(E){return!1}static paste(E,B){(0,n.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,e)}set _isDraggable(E){var B;st(this,e,E),(B=this.div)==null||B.classList.toggle("draggable",E)}center(){const[E,B]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*B/(2*E),this.y+=this.width*E/(2*B);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*B/(2*E),this.y-=this.width*E/(2*B);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(E){this._uiManager.addCommands(E)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,s)}setParent(E){E!==null&&(this.pageIndex=E.pageIndex,this.pageDimensions=E.pageDimensions),this.parent=E}focusin(E){this._focusEventsAllowed&&(a(this,T)?st(this,T,!1):this.parent.setSelected(this))}focusout(E){var U;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const B=E.relatedTarget;B!=null&&B.closest(`#${this.id}`)||(E.preventDefault(),(U=this.parent)!=null&&U.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(E,B,U,D){const[z,Y]=this.parentDimensions;[U,D]=this.screenToPageTranslation(U,D),this.x=(E+U)/z,this.y=(B+D)/Y,this.fixAndSetPosition()}translate(E,B){Z(this,c,je).call(this,this.parentDimensions,E,B)}translateInPage(E,B){Z(this,c,je).call(this,this.pageDimensions,E,B),this.div.scrollIntoView({block:"nearest"})}drag(E,B){const[U,D]=this.parentDimensions;if(this.x+=E/U,this.y+=B/D,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:dt,y:ut}=this.div.getBoundingClientRect();this.parent.findNewParent(this,dt,ut)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:z,y:Y}=this;const[it,nt]=Z(this,O,Be).call(this);z+=it,Y+=nt,this.div.style.left=`${(100*z).toFixed(2)}%`,this.div.style.top=`${(100*Y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[E,B]=this.pageDimensions;let{x:U,y:D,width:z,height:Y}=this;switch(z*=E,Y*=B,U*=E,D*=B,this.rotation){case 0:U=Math.max(0,Math.min(E-z,U)),D=Math.max(0,Math.min(B-Y,D));break;case 90:U=Math.max(0,Math.min(E-Y,U)),D=Math.min(B,Math.max(z,D));break;case 180:U=Math.min(E,Math.max(z,U)),D=Math.min(B,Math.max(Y,D));break;case 270:U=Math.min(E,Math.max(Y,U)),D=Math.max(0,Math.min(B-z,D))}this.x=U/=E,this.y=D/=B;const[it,nt]=Z(this,O,Be).call(this);U+=it,D+=nt;const{style:dt}=this.div;dt.left=`${(100*U).toFixed(2)}%`,dt.top=`${(100*D).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(E,B){var U;return Z(U=C,K,Ue).call(U,E,B,this.parentRotation)}pageTranslationToScreen(E,B){var U;return Z(U=C,K,Ue).call(U,E,B,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:E,pageDimensions:[B,U]}=this,D=B*E,z=U*E;return n.FeatureTest.isCSSRoundSupported?[Math.round(D),Math.round(z)]:[D,z]}setDims(E,B){var z;const[U,D]=this.parentDimensions;this.div.style.width=`${(100*E/U).toFixed(2)}%`,a(this,v)||(this.div.style.height=`${(100*B/D).toFixed(2)}%`),(z=a(this,u))==null||z.classList.toggle("small",E<C.SMALL_EDITOR_SIZE||B<C.SMALL_EDITOR_SIZE)}fixDims(){const{style:E}=this.div,{height:B,width:U}=E,D=U.endsWith("%"),z=!a(this,v)&&B.endsWith("%");if(D&&z)return;const[Y,it]=this.parentDimensions;D||(E.width=`${(100*parseFloat(U)/Y).toFixed(2)}%`),a(this,v)||z||(E.height=`${(100*parseFloat(B)/it).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,u))return;const E=st(this,u,document.createElement("button"));E.className="altText";const B=await C._l10nPromise.get("editor_alt_text_button_label");E.textContent=B,E.setAttribute("aria-label",B),E.tabIndex="0",E.addEventListener("contextmenu",h.noContextMenu),E.addEventListener("pointerdown",U=>U.stopPropagation()),E.addEventListener("click",U=>{U.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),E.addEventListener("keydown",U=>{U.target===E&&U.key==="Enter"&&(U.preventDefault(),this._uiManager.editAltText(this))}),Z(this,q,ze).call(this),this.div.append(E),C.SMALL_EDITOR_SIZE||(C.SMALL_EDITOR_SIZE=Math.min(128,Math.round(E.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,d),decorative:a(this,o)}}set altTextData(E){let{altText:B,decorative:U}=E;(a(this,d)!==B||a(this,o)!==U)&&(st(this,d,B),st(this,o,U),Z(this,q,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,P)),this.div.addEventListener("focusout",a(this,I));const[E,B]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*B/E).toFixed(2)}%`,this.div.style.maxHeight=`${(100*E/B).toFixed(2)}%`);const[U,D]=this.getInitialTranslation();return this.translate(U,D),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(E){const{isMac:B}=n.FeatureTest.platform;E.button!==0||E.ctrlKey&&B?E.preventDefault():(st(this,T,!0),Z(this,W,Sr).call(this,E))}moveInDOM(){var E;(E=this.parent)==null||E.moveEditorInDOM(this)}_setParentAndPosition(E,B,U){E.changeParent(this),this.x=B,this.y=U,this.fixAndSetPosition()}getRect(E,B){const U=this.parentScale,[D,z]=this.pageDimensions,[Y,it]=this.pageTranslation,nt=E/U,dt=B/U,ut=this.x*D,vt=this.y*z,yt=this.width*D,ft=this.height*z;switch(this.rotation){case 0:return[ut+nt+Y,z-vt-dt-ft+it,ut+nt+yt+Y,z-vt-dt+it];case 90:return[ut+dt+Y,z-vt+nt+it,ut+dt+ft+Y,z-vt+nt+yt+it];case 180:return[ut-nt-yt+Y,z-vt+dt+it,ut-nt+Y,z-vt+dt+ft+it];case 270:return[ut-dt-ft+Y,z-vt-nt-yt+it,ut-dt+Y,z-vt-nt+it];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(E,B){const[U,D,z,Y]=E,it=z-U,nt=Y-D;switch(this.rotation){case 0:return[U,B-Y,it,nt];case 90:return[U,B-D,nt,it];case 180:return[z,B-D,it,nt];case 270:return[z,B-Y,nt,it];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){st(this,i,!0)}disableEditMode(){st(this,i,!1)}isInEditMode(){return a(this,i)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var E,B;(E=this.div)==null||E.addEventListener("focusin",a(this,P)),(B=this.div)==null||B.addEventListener("focusout",a(this,I))}serialize(){(0,n.unreachable)("An editor must be serializable")}static deserialize(E,B,U){const D=new this.prototype.constructor({parent:B,id:B.getNextId(),uiManager:U});D.rotation=E.rotation;const[z,Y]=D.pageDimensions,[it,nt,dt,ut]=D.getRectInCurrentCoords(E.rect,Y);return D.x=it/z,D.y=nt/Y,D.width=dt/z,D.height=ut/Y,D}remove(){var E;this.div.removeEventListener("focusin",a(this,P)),this.div.removeEventListener("focusout",a(this,I)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(E=a(this,u))==null||E.remove(),st(this,u,null),st(this,g,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Z(this,V,_r).call(this),a(this,_).classList.remove("hidden"))}select(){var E;this.makeResizable(),(E=this.div)==null||E.classList.add("selectedEditor")}unselect(){var E,B,U;(E=a(this,_))==null||E.classList.add("hidden"),(B=this.div)==null||B.classList.remove("selectedEditor"),(U=this.div)!=null&&U.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(E,B){}disableEditing(){a(this,u)&&(a(this,u).hidden=!0)}enableEditing(){a(this,u)&&(a(this,u).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,M)}set isEditing(E){st(this,M,E),this.parent&&(E?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(E,B){st(this,v,!0);const U=E/B,{style:D}=this.div;D.aspectRatio=U,D.height="auto"}static get MIN_SIZE(){return 16}};d=new WeakMap,o=new WeakMap,u=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,_=new WeakMap,P=new WeakMap,I=new WeakMap,T=new WeakMap,M=new WeakMap,i=new WeakMap,e=new WeakMap,s=new WeakMap,c=new WeakSet,je=function(E,B,U){let[D,z]=E;[B,U]=this.screenToPageTranslation(B,U),this.x+=B/D,this.y+=U/z,this.fixAndSetPosition()},O=new WeakSet,Be=function(){const[E,B]=this.parentDimensions,{_borderLineWidth:U}=C,D=U/E,z=U/B;switch(this.rotation){case 90:return[-D,z];case 180:return[D,z];case 270:return[D,-z];default:return[-D,-z]}},K=new WeakSet,Ue=function(E,B,U){switch(U){case 90:return[B,-E];case 180:return[-E,-B];case 270:return[-B,E];default:return[E,B]}},et=new WeakSet,We=function(E){switch(E){case 90:{const[B,U]=this.pageDimensions;return[0,-B/U,U/B,0]}case 180:return[-1,0,0,-1];case 270:{const[B,U]=this.pageDimensions;return[0,B/U,-U/B,0]}default:return[1,0,0,1]}},V=new WeakSet,_r=function(){if(a(this,_))return;st(this,_,document.createElement("div")),a(this,_).classList.add("resizers");const E=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||E.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const B of E){const U=document.createElement("div");a(this,_).append(U),U.classList.add("resizer",B),U.addEventListener("pointerdown",Z(this,p,yr).bind(this,B)),U.addEventListener("contextmenu",h.noContextMenu)}this.div.prepend(a(this,_))},p=new WeakSet,yr=function(E,B){B.preventDefault();const{isMac:U}=n.FeatureTest.platform;if(B.button!==0||B.ctrlKey&&U)return;const D=Z(this,S,Ar).bind(this,E),z=this._isDraggable;this._isDraggable=!1;const Y={passive:!0,capture:!0};window.addEventListener("pointermove",D,Y);const it=this.x,nt=this.y,dt=this.width,ut=this.height,vt=this.parent.div.style.cursor,yt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(B.target).cursor;const ft=()=>{this._isDraggable=z,window.removeEventListener("pointerup",ft),window.removeEventListener("blur",ft),window.removeEventListener("pointermove",D,Y),this.parent.div.style.cursor=vt,this.div.style.cursor=yt;const mt=this.x,Mt=this.y,At=this.width,Pt=this.height;mt===it&&Mt===nt&&At===dt&&Pt===ut||this.addCommands({cmd:()=>{this.width=At,this.height=Pt,this.x=mt,this.y=Mt;const[Ft,Lt]=this.parentDimensions;this.setDims(Ft*At,Lt*Pt),this.fixAndSetPosition()},undo:()=>{this.width=dt,this.height=ut,this.x=it,this.y=nt;const[Ft,Lt]=this.parentDimensions;this.setDims(Ft*dt,Lt*ut),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ft),window.addEventListener("blur",ft)},S=new WeakSet,Ar=function(E,B){const[U,D]=this.parentDimensions,z=this.x,Y=this.y,it=this.width,nt=this.height,dt=C.MIN_SIZE/U,ut=C.MIN_SIZE/D,vt=gt=>Math.round(1e4*gt)/1e4,yt=Z(this,et,We).call(this,this.rotation),ft=(gt,Tt)=>[yt[0]*gt+yt[2]*Tt,yt[1]*gt+yt[3]*Tt],mt=Z(this,et,We).call(this,360-this.rotation);let Mt,At,Pt=!1,Ft=!1;switch(E){case"topLeft":Pt=!0,Mt=(gt,Tt)=>[0,0],At=(gt,Tt)=>[gt,Tt];break;case"topMiddle":Mt=(gt,Tt)=>[gt/2,0],At=(gt,Tt)=>[gt/2,Tt];break;case"topRight":Pt=!0,Mt=(gt,Tt)=>[gt,0],At=(gt,Tt)=>[0,Tt];break;case"middleRight":Ft=!0,Mt=(gt,Tt)=>[gt,Tt/2],At=(gt,Tt)=>[0,Tt/2];break;case"bottomRight":Pt=!0,Mt=(gt,Tt)=>[gt,Tt],At=(gt,Tt)=>[0,0];break;case"bottomMiddle":Mt=(gt,Tt)=>[gt/2,Tt],At=(gt,Tt)=>[gt/2,0];break;case"bottomLeft":Pt=!0,Mt=(gt,Tt)=>[0,Tt],At=(gt,Tt)=>[gt,0];break;case"middleLeft":Ft=!0,Mt=(gt,Tt)=>[0,Tt/2],At=(gt,Tt)=>[gt,Tt/2]}const Lt=Mt(it,nt),Nt=At(it,nt);let Bt=ft(...Nt);const ee=vt(z+Bt[0]),Gt=vt(Y+Bt[1]);let Jt=1,Kt=1,[$t,Yt]=this.screenToPageTranslation(B.movementX,B.movementY);[$t,Yt]=(Qt=$t/U,Vt=Yt/D,[mt[0]*Qt+mt[2]*Vt,mt[1]*Qt+mt[3]*Vt]);var Qt,Vt;if(Pt){const gt=Math.hypot(it,nt);Jt=Kt=Math.max(Math.min(Math.hypot(Nt[0]-Lt[0]-$t,Nt[1]-Lt[1]-Yt)/gt,1/it,1/nt),dt/it,ut/nt)}else Ft?Jt=Math.max(dt,Math.min(1,Math.abs(Nt[0]-Lt[0]-$t)))/it:Kt=Math.max(ut,Math.min(1,Math.abs(Nt[1]-Lt[1]-Yt)))/nt;const Zt=vt(it*Jt),zt=vt(nt*Kt);Bt=ft(...At(Zt,zt));const Xt=ee-Bt[0],ct=Gt-Bt[1];this.width=Zt,this.height=zt,this.x=Xt,this.y=ct,this.setDims(U*Zt,D*zt),this.fixAndSetPosition()},q=new WeakSet,ze=async function(){var U;const E=a(this,u);if(!E)return;if(!a(this,d)&&!a(this,o)){E.classList.remove("done"),(U=a(this,g))==null||U.remove();return}C._l10nPromise.get("editor_alt_text_edit_button_label").then(D=>{E.setAttribute("aria-label",D)});let B=a(this,g);if(!B){st(this,g,B=document.createElement("span")),B.className="tooltip",B.setAttribute("role","tooltip");const D=B.id=`alt-text-tooltip-${this.id}`;E.setAttribute("aria-describedby",D);const z=100;E.addEventListener("mouseenter",()=>{st(this,A,setTimeout(()=>{st(this,A,null),a(this,g).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},z))}),E.addEventListener("mouseleave",()=>{var Y;clearTimeout(a(this,A)),st(this,A,null),(Y=a(this,g))==null||Y.classList.remove("show")})}E.classList.add("done"),B.innerText=a(this,o)?await C._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,d),B.parentNode||E.append(B)},W=new WeakSet,Sr=function(E){if(!this._isDraggable)return;const B=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let U,D;B&&(U={passive:!0,capture:!0},D=Y=>{const[it,nt]=this.screenToPageTranslation(Y.movementX,Y.movementY);this._uiManager.dragSelectedEditors(it,nt)},window.addEventListener("pointermove",D,U));const z=()=>{if(window.removeEventListener("pointerup",z),window.removeEventListener("blur",z),B&&window.removeEventListener("pointermove",D,U),st(this,T,!1),!this._uiManager.endDragSession()){const{isMac:Y}=n.FeatureTest.platform;E.ctrlKey&&!Y||E.shiftKey||E.metaKey&&Y?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",z),window.addEventListener("blur",z)},$(C,K),te(C,"_borderLineWidth",-1),te(C,"_colorManager",new r.ColorManager),te(C,"_zIndex",1),te(C,"SMALL_EDITOR_SIZE",0);let m=C;l.AnnotationEditor=m;class b extends m{constructor(E){super(E),this.annotationElementId=E.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(x,l,t)=>{var g,A,v,_,P,qe,M,i,e,s,c,xr,O,R,K,X,et,lt,V,H,p,y,S,N,q,Q,W,L,C,F,E,B,U,D,z,Y,it,nt,dt,ut,vt,yt,ft,mt,Mt,At,Pt,wr,Lt,He,Bt,Ve,Gt,we,Kt,Ge,Yt,$e,Vt,se,zt,fe,ct,Er,Tt,Cr,rt,Xe,xt,ge,wt,Ye;Object.defineProperty(l,"__esModule",{value:!0}),l.KeyboardManager=l.CommandManager=l.ColorManager=l.AnnotationEditorUIManager=void 0,l.bindEvents=function(j,w,k){for(const G of k)w.addEventListener(G,j[G].bind(j))},l.opacityToHex=function(j){return Math.round(Math.min(255,Math.max(1,255*j))).toString(16).padStart(2,"0")},t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2),t(89),t(125),t(136),t(138),t(141),t(143),t(145),t(147),t(166);var r=t(1),n=t(168);class h{constructor(){$(this,g,0)}getId(){return`${r.AnnotationEditorPrefix}${Ae(this,g)._++}`}}g=new WeakMap;const T=class T{constructor(){$(this,P);$(this,A,(0,r.getUuid)());$(this,v,0);$(this,_,null)}static get _isSVGFittingCanvas(){const j=new OffscreenCanvas(1,3).getContext("2d"),w=new Image;w.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const k=w.decode().then(()=>(j.drawImage(w,0,0,1,1,0,0,1,3),new Uint32Array(j.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",k)}async getFromFile(j){const{lastModified:w,name:k,size:G,type:J}=j;return Z(this,P,qe).call(this,`${w}_${k}_${G}_${J}`,j)}async getFromUrl(j){return Z(this,P,qe).call(this,j,j)}async getFromId(j){a(this,_)||st(this,_,new Map);const w=a(this,_).get(j);return w?w.bitmap?(w.refCounter+=1,w):w.file?this.getFromFile(w.file):this.getFromUrl(w.url):null}getSvgUrl(j){const w=a(this,_).get(j);return w!=null&&w.isSvg?w.svgUrl:null}deleteId(j){a(this,_)||st(this,_,new Map);const w=a(this,_).get(j);w&&(w.refCounter-=1,w.refCounter===0&&(w.bitmap=null))}isValidId(j){return j.startsWith(`image_${a(this,A)}_`)}};A=new WeakMap,v=new WeakMap,_=new WeakMap,P=new WeakSet,qe=async function(j,w){a(this,_)||st(this,_,new Map);let k=a(this,_).get(j);if(k===null)return null;if(k!=null&&k.bitmap)return k.refCounter+=1,k;try{k||(k={bitmap:null,id:`image_${a(this,A)}_${Ae(this,v)._++}`,refCounter:0,isSvg:!1});let G;if(typeof w=="string"){k.url=w;const J=await fetch(w);if(!J.ok)throw new Error(J.statusText);G=await J.blob()}else G=k.file=w;if(G.type==="image/svg+xml"){const J=T._isSVGFittingCanvas,tt=new FileReader,at=new Image,ht=new Promise((_t,Et)=>{at.onload=()=>{k.bitmap=at,k.isSvg=!0,_t()},tt.onload=async()=>{const bt=k.svgUrl=tt.result;at.src=await J?`${bt}#svgView(preserveAspectRatio(none))`:bt},at.onerror=tt.onerror=Et});tt.readAsDataURL(G),await ht}else k.bitmap=await createImageBitmap(G);k.refCounter=1}catch(G){console.error(G),k=null}return a(this,_).set(j,k),k&&a(this,_).set(k.id,k),k};let m=T;class b{constructor(){$(this,M,[]);$(this,i,!1);$(this,e,void 0);$(this,s,-1);let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;st(this,e,j)}add(j){let{cmd:w,undo:k,mustExec:G,type:J=NaN,overwriteIfSameType:tt=!1,keepUndo:at=!1}=j;if(G&&w(),a(this,i))return;const ht={cmd:w,undo:k,type:J};if(a(this,s)===-1){a(this,M).length>0&&(a(this,M).length=0),st(this,s,0),a(this,M).push(ht);return}if(tt&&a(this,M)[a(this,s)].type===J){at&&(ht.undo=a(this,M)[a(this,s)].undo),a(this,M)[a(this,s)]=ht;return}const _t=a(this,s)+1;_t===a(this,e)?a(this,M).splice(0,1):(st(this,s,_t),_t<a(this,M).length&&a(this,M).splice(_t)),a(this,M).push(ht)}undo(){a(this,s)!==-1&&(st(this,i,!0),a(this,M)[a(this,s)].undo(),st(this,i,!1),st(this,s,a(this,s)-1))}redo(){a(this,s)<a(this,M).length-1&&(st(this,s,a(this,s)+1),st(this,i,!0),a(this,M)[a(this,s)].cmd(),st(this,i,!1))}hasSomethingToUndo(){return a(this,s)!==-1}hasSomethingToRedo(){return a(this,s)<a(this,M).length-1}destroy(){st(this,M,null)}}M=new WeakMap,i=new WeakMap,e=new WeakMap,s=new WeakMap,l.CommandManager=b;class d{constructor(j){$(this,c);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:w}=r.FeatureTest.platform;for(const[k,G,J={}]of j)for(const tt of k){const at=tt.startsWith("mac+");w&&at?(this.callbacks.set(tt.slice(4),{callback:G,options:J}),this.allKeys.add(tt.split("+").at(-1))):!w&&!at&&(this.callbacks.set(tt,{callback:G,options:J}),this.allKeys.add(tt.split("+").at(-1)))}}exec(j,w){if(!this.allKeys.has(w.key))return;const k=this.callbacks.get(Z(this,c,xr).call(this,w));if(!k)return;const{callback:G,options:{bubbles:J=!1,args:tt=[],checker:at=null}}=k;(!at||at(j,w))&&(G.bind(j,...tt)(),J||(w.stopPropagation(),w.preventDefault()))}}c=new WeakSet,xr=function(j){j.altKey&&this.buffer.push("alt"),j.ctrlKey&&this.buffer.push("ctrl"),j.metaKey&&this.buffer.push("meta"),j.shiftKey&&this.buffer.push("shift"),this.buffer.push(j.key);const w=this.buffer.join("+");return this.buffer.length=0,w},l.KeyboardManager=d;class o{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const j=new Map([["CanvasText",null],["Canvas",null]]);return(0,n.getColorValues)(j),(0,r.shadow)(this,"_colors",j)}convert(j){const w=(0,n.getRGB)(j);if(!window.matchMedia("(forced-colors: active)").matches)return w;for(const[k,G]of this._colors)if(G.every((J,tt)=>J===w[tt]))return o._colorsMapping.get(k);return w}getHexCode(j){const w=this._colors.get(j);return w?r.Util.makeHexColor(...w):j}}l.ColorManager=o;const Ot=class Ot{constructor(j,w,k,G,J,tt){$(this,Pt);$(this,Lt);$(this,Bt);$(this,Gt);$(this,Kt);$(this,Yt);$(this,Vt);$(this,zt);$(this,ct);$(this,Tt);$(this,rt);$(this,xt);$(this,wt);$(this,O,null);$(this,R,new Map);$(this,K,new Map);$(this,X,null);$(this,et,null);$(this,lt,new b);$(this,V,0);$(this,H,new Set);$(this,p,null);$(this,y,null);$(this,S,new Set);$(this,N,null);$(this,q,new h);$(this,Q,!1);$(this,W,!1);$(this,L,null);$(this,C,r.AnnotationEditorType.NONE);$(this,F,new Set);$(this,E,null);$(this,B,this.blur.bind(this));$(this,U,this.focus.bind(this));$(this,D,this.copy.bind(this));$(this,z,this.cut.bind(this));$(this,Y,this.paste.bind(this));$(this,it,this.keydown.bind(this));$(this,nt,this.onEditingAction.bind(this));$(this,dt,this.onPageChanging.bind(this));$(this,ut,this.onScaleChanging.bind(this));$(this,vt,this.onRotationChanging.bind(this));$(this,yt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});$(this,ft,[0,0]);$(this,mt,null);$(this,Mt,null);$(this,At,null);st(this,Mt,j),st(this,At,w),st(this,X,k),this._eventBus=G,this._eventBus._on("editingaction",a(this,nt)),this._eventBus._on("pagechanging",a(this,dt)),this._eventBus._on("scalechanging",a(this,ut)),this._eventBus._on("rotationchanging",a(this,vt)),st(this,et,J.annotationStorage),st(this,N,J.filterFactory),st(this,E,tt),this.viewParameters={realScale:n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const j=Ot.prototype,w=J=>{const{activeElement:tt}=document;return tt&&a(J,Mt).contains(tt)&&J.hasSomethingToControl()},k=this.TRANSLATE_SMALL,G=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],j.selectAll],[["ctrl+z","mac+meta+z"],j.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],j.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],j.delete],[["Escape","mac+Escape"],j.unselectAll],[["ArrowLeft","mac+ArrowLeft"],j.translateSelectedEditors,{args:[-k,0],checker:w}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],j.translateSelectedEditors,{args:[-G,0],checker:w}],[["ArrowRight","mac+ArrowRight"],j.translateSelectedEditors,{args:[k,0],checker:w}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],j.translateSelectedEditors,{args:[G,0],checker:w}],[["ArrowUp","mac+ArrowUp"],j.translateSelectedEditors,{args:[0,-k],checker:w}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],j.translateSelectedEditors,{args:[0,-G],checker:w}],[["ArrowDown","mac+ArrowDown"],j.translateSelectedEditors,{args:[0,k],checker:w}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],j.translateSelectedEditors,{args:[0,G],checker:w}]]))}destroy(){Z(this,Gt,we).call(this),Z(this,Lt,He).call(this),this._eventBus._off("editingaction",a(this,nt)),this._eventBus._off("pagechanging",a(this,dt)),this._eventBus._off("scalechanging",a(this,ut)),this._eventBus._off("rotationchanging",a(this,vt));for(const j of a(this,K).values())j.destroy();a(this,K).clear(),a(this,R).clear(),a(this,S).clear(),st(this,O,null),a(this,F).clear(),a(this,lt).destroy(),a(this,X).destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",a(this,E)?a(this,N).addHCMFilter(a(this,E).foreground,a(this,E).background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(a(this,Mt)).direction)}editAltText(j){var w;(w=a(this,X))==null||w.editAltText(this,j)}onPageChanging(j){let{pageNumber:w}=j;st(this,V,w-1)}focusMainContainer(){a(this,Mt).focus()}findParent(j,w){for(const k of a(this,K).values()){const{x:G,y:J,width:tt,height:at}=k.div.getBoundingClientRect();if(j>=G&&j<=G+tt&&w>=J&&w<=J+at)return k}return null}disableUserSelect(){let j=arguments.length>0&&arguments[0]!==void 0&&arguments[0];a(this,At).classList.toggle("noUserSelect",j)}addShouldRescale(j){a(this,S).add(j)}removeShouldRescale(j){a(this,S).delete(j)}onScaleChanging(j){let{scale:w}=j;this.commitOrRemove(),this.viewParameters.realScale=w*n.PixelsPerInch.PDF_TO_CSS_UNITS;for(const k of a(this,S))k.onScaleChanging()}onRotationChanging(j){let{pagesRotation:w}=j;this.commitOrRemove(),this.viewParameters.rotation=w}addToAnnotationStorage(j){j.isEmpty()||!a(this,et)||a(this,et).has(j.id)||a(this,et).setValue(j.id,j)}blur(){if(!this.hasSelection)return;const{activeElement:j}=document;for(const w of a(this,F))if(w.div.contains(j)){st(this,L,[w,j]),w._focusEventsAllowed=!1;break}}focus(){if(!a(this,L))return;const[j,w]=a(this,L);st(this,L,null),w.addEventListener("focusin",()=>{j._focusEventsAllowed=!0},{once:!0}),w.focus()}addEditListeners(){Z(this,Bt,Ve).call(this),Z(this,Kt,Ge).call(this)}removeEditListeners(){Z(this,Gt,we).call(this),Z(this,Yt,$e).call(this)}copy(j){var k;if(j.preventDefault(),(k=a(this,O))==null||k.commitOrRemove(),!this.hasSelection)return;const w=[];for(const G of a(this,F)){const J=G.serialize(!0);J&&w.push(J)}w.length!==0&&j.clipboardData.setData("application/pdfjs",JSON.stringify(w))}cut(j){this.copy(j),this.delete()}paste(j){j.preventDefault();const{clipboardData:w}=j;for(const J of w.items)for(const tt of a(this,y))if(tt.isHandlingMimeForPasting(J.type)){tt.paste(J,this.currentLayer);return}let k=w.getData("application/pdfjs");if(!k)return;try{k=JSON.parse(k)}catch(J){(0,r.warn)(`paste: "${J.message}".`);return}if(!Array.isArray(k))return;this.unselectAll();const G=this.currentLayer;try{const J=[];for(const ht of k){const _t=G.deserialize(ht);if(!_t)return;J.push(_t)}const tt=()=>{for(const ht of J)Z(this,rt,Xe).call(this,ht);Z(this,wt,Ye).call(this,J)},at=()=>{for(const ht of J)ht.remove()};this.addCommands({cmd:tt,undo:at,mustExec:!0})}catch(J){(0,r.warn)(`paste: "${J.message}".`)}}keydown(j){var w;(w=this.getActive())!=null&&w.shouldGetKeyboardEvents()||Ot._keyboardManager.exec(this,j)}onEditingAction(j){["undo","redo","delete","selectAll"].includes(j.name)&&this[j.name]()}setEditingState(j){j?(Z(this,Pt,wr).call(this),Z(this,Bt,Ve).call(this),Z(this,Kt,Ge).call(this),Z(this,Vt,se).call(this,{isEditing:a(this,C)!==r.AnnotationEditorType.NONE,isEmpty:Z(this,xt,ge).call(this),hasSomethingToUndo:a(this,lt).hasSomethingToUndo(),hasSomethingToRedo:a(this,lt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Z(this,Lt,He).call(this),Z(this,Gt,we).call(this),Z(this,Yt,$e).call(this),Z(this,Vt,se).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(j){if(!a(this,y)){st(this,y,j);for(const w of a(this,y))Z(this,zt,fe).call(this,w.defaultPropertiesToUpdate)}}getId(){return a(this,q).getId()}get currentLayer(){return a(this,K).get(a(this,V))}getLayer(j){return a(this,K).get(j)}get currentPageIndex(){return a(this,V)}addLayer(j){a(this,K).set(j.pageIndex,j),a(this,Q)?j.enable():j.disable()}removeLayer(j){a(this,K).delete(j.pageIndex)}updateMode(j){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(a(this,C)!==j)if(st(this,C,j),j!==r.AnnotationEditorType.NONE){this.setEditingState(!0),Z(this,ct,Er).call(this),this.unselectAll();for(const k of a(this,K).values())k.updateMode(j);if(w){for(const k of a(this,R).values())if(k.annotationElementId===w){this.setSelected(k),k.enterInEditMode();break}}}else this.setEditingState(!1),Z(this,Tt,Cr).call(this)}updateToolbar(j){j!==a(this,C)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:j})}updateParams(j,w){if(a(this,y))if(j!==r.AnnotationEditorParamsType.CREATE){for(const k of a(this,F))k.updateParams(j,w);for(const k of a(this,y))k.updateDefaultParams(j,w)}else this.currentLayer.addNewEditor(j)}enableWaiting(){let j=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(a(this,W)!==j){st(this,W,j);for(const w of a(this,K).values())j?w.disableClick():w.enableClick(),w.div.classList.toggle("waiting",j)}}getEditors(j){const w=[];for(const k of a(this,R).values())k.pageIndex===j&&w.push(k);return w}getEditor(j){return a(this,R).get(j)}addEditor(j){a(this,R).set(j.id,j)}removeEditor(j){var w;a(this,R).delete(j.id),this.unselect(j),j.annotationElementId&&a(this,H).has(j.annotationElementId)||((w=a(this,et))==null||w.remove(j.id))}addDeletedAnnotationElement(j){a(this,H).add(j.annotationElementId),j.deleted=!0}isDeletedAnnotationElement(j){return a(this,H).has(j)}removeDeletedAnnotationElement(j){a(this,H).delete(j.annotationElementId),j.deleted=!1}setActiveEditor(j){a(this,O)!==j&&(st(this,O,j),j&&Z(this,zt,fe).call(this,j.propertiesToUpdate))}toggleSelected(j){a(this,F).has(j)?(a(this,F).delete(j),j.unselect(),Z(this,Vt,se).call(this,{hasSelectedEditor:this.hasSelection})):(a(this,F).add(j),j.select(),Z(this,zt,fe).call(this,j.propertiesToUpdate),Z(this,Vt,se).call(this,{hasSelectedEditor:!0}))}setSelected(j){for(const w of a(this,F))w!==j&&w.unselect();a(this,F).clear(),a(this,F).add(j),j.select(),Z(this,zt,fe).call(this,j.propertiesToUpdate),Z(this,Vt,se).call(this,{hasSelectedEditor:!0})}isSelected(j){return a(this,F).has(j)}unselect(j){j.unselect(),a(this,F).delete(j),Z(this,Vt,se).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,F).size!==0}undo(){a(this,lt).undo(),Z(this,Vt,se).call(this,{hasSomethingToUndo:a(this,lt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Z(this,xt,ge).call(this)})}redo(){a(this,lt).redo(),Z(this,Vt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,lt).hasSomethingToRedo(),isEmpty:Z(this,xt,ge).call(this)})}addCommands(j){a(this,lt).add(j),Z(this,Vt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Z(this,xt,ge).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const j=[...a(this,F)];this.addCommands({cmd:()=>{for(const w of j)w.remove()},undo:()=>{for(const w of j)Z(this,rt,Xe).call(this,w)},mustExec:!0})}commitOrRemove(){var j;(j=a(this,O))==null||j.commitOrRemove()}hasSomethingToControl(){return a(this,O)||this.hasSelection}selectAll(){for(const j of a(this,F))j.commit();Z(this,wt,Ye).call(this,a(this,R).values())}unselectAll(){if(a(this,O))a(this,O).commitOrRemove();else if(this.hasSelection){for(const j of a(this,F))j.unselect();a(this,F).clear(),Z(this,Vt,se).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(j,w){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;a(this,ft)[0]+=j,a(this,ft)[1]+=w;const[k,G]=a(this,ft),J=[...a(this,F)];a(this,mt)&&clearTimeout(a(this,mt)),st(this,mt,setTimeout(()=>{st(this,mt,null),a(this,ft)[0]=a(this,ft)[1]=0,this.addCommands({cmd:()=>{for(const tt of J)a(this,R).has(tt.id)&&tt.translateInPage(k,G)},undo:()=>{for(const tt of J)a(this,R).has(tt.id)&&tt.translateInPage(-k,-G)},mustExec:!1})},1e3));for(const tt of J)tt.translateInPage(j,w)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),st(this,p,new Map);for(const j of a(this,F))a(this,p).set(j,{savedX:j.x,savedY:j.y,savedPageIndex:j.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,p))return!1;this.disableUserSelect(!1);const j=a(this,p);st(this,p,null);let w=!1;for(const[{x:G,y:J,pageIndex:tt},at]of j)at.newX=G,at.newY=J,at.newPageIndex=tt,w||(w=G!==at.savedX||J!==at.savedY||tt!==at.savedPageIndex);if(!w)return!1;const k=(G,J,tt,at)=>{if(a(this,R).has(G.id)){const ht=a(this,K).get(at);ht?G._setParentAndPosition(ht,J,tt):(G.pageIndex=at,G.x=J,G.y=tt)}};return this.addCommands({cmd:()=>{for(const[G,{newX:J,newY:tt,newPageIndex:at}]of j)k(G,J,tt,at)},undo:()=>{for(const[G,{savedX:J,savedY:tt,savedPageIndex:at}]of j)k(G,J,tt,at)},mustExec:!0}),!0}dragSelectedEditors(j,w){if(a(this,p))for(const k of a(this,p).keys())k.drag(j,w)}rebuild(j){if(j.parent===null){const w=this.getLayer(j.pageIndex);w?(w.changeParent(j),w.addOrRebuild(j)):(this.addEditor(j),this.addToAnnotationStorage(j),j.rebuild())}else j.parent.addOrRebuild(j)}isActive(j){return a(this,O)===j}getActive(){return a(this,O)}getMode(){return a(this,C)}get imageManager(){return(0,r.shadow)(this,"imageManager",new m)}};O=new WeakMap,R=new WeakMap,K=new WeakMap,X=new WeakMap,et=new WeakMap,lt=new WeakMap,V=new WeakMap,H=new WeakMap,p=new WeakMap,y=new WeakMap,S=new WeakMap,N=new WeakMap,q=new WeakMap,Q=new WeakMap,W=new WeakMap,L=new WeakMap,C=new WeakMap,F=new WeakMap,E=new WeakMap,B=new WeakMap,U=new WeakMap,D=new WeakMap,z=new WeakMap,Y=new WeakMap,it=new WeakMap,nt=new WeakMap,dt=new WeakMap,ut=new WeakMap,vt=new WeakMap,yt=new WeakMap,ft=new WeakMap,mt=new WeakMap,Mt=new WeakMap,At=new WeakMap,Pt=new WeakSet,wr=function(){window.addEventListener("focus",a(this,U)),window.addEventListener("blur",a(this,B))},Lt=new WeakSet,He=function(){window.removeEventListener("focus",a(this,U)),window.removeEventListener("blur",a(this,B))},Bt=new WeakSet,Ve=function(){window.addEventListener("keydown",a(this,it),{capture:!0})},Gt=new WeakSet,we=function(){window.removeEventListener("keydown",a(this,it),{capture:!0})},Kt=new WeakSet,Ge=function(){document.addEventListener("copy",a(this,D)),document.addEventListener("cut",a(this,z)),document.addEventListener("paste",a(this,Y))},Yt=new WeakSet,$e=function(){document.removeEventListener("copy",a(this,D)),document.removeEventListener("cut",a(this,z)),document.removeEventListener("paste",a(this,Y))},Vt=new WeakSet,se=function(j){Object.entries(j).some(w=>{let[k,G]=w;return a(this,yt)[k]!==G})&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,yt),j)})},zt=new WeakSet,fe=function(j){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:j})},ct=new WeakSet,Er=function(){if(!a(this,Q)){st(this,Q,!0);for(const j of a(this,K).values())j.enable()}},Tt=new WeakSet,Cr=function(){if(this.unselectAll(),a(this,Q)){st(this,Q,!1);for(const j of a(this,K).values())j.disable()}},rt=new WeakSet,Xe=function(j){const w=a(this,K).get(j.pageIndex);w?w.addOrRebuild(j):this.addEditor(j)},xt=new WeakSet,ge=function(){if(a(this,R).size===0)return!0;if(a(this,R).size===1)for(const j of a(this,R).values())return j.isEmpty();return!1},wt=new WeakSet,Ye=function(j){a(this,F).clear();for(const w of j)w.isEmpty()||(a(this,F).add(w),w.select());Z(this,Vt,se).call(this,{hasSelectedEditor:!0})},te(Ot,"TRANSLATE_SMALL",1),te(Ot,"TRANSLATE_BIG",10);let u=Ot;l.AnnotationEditorUIManager=u},(x,l,t)=>{var r=t(3),n=t(6),h=t(4),m=t(24),b=t(14),d=t(8),o=t(21),u=t(20),g=t(91),A=t(39),v=t(77),_=t(64),P=t(159),I=t(7),T=t(167),M=t(27),i=h.JSON,e=h.Number,s=h.SyntaxError,c=i&&i.parse,f=m("Object","keys"),O=Object.getOwnPropertyDescriptor,R=b("".charAt),K=b("".slice),X=b(/./.exec),et=b([].push),lt=/^\d$/,V=/^[1-9]$/,H=/^(?:-|\d)$/,p=/^[\t\n\r ]$/,y=function(L,C,F,E){var B,U,D,z,Y,it=L[C],nt=E&&it===E.value,dt=nt&&typeof E.source=="string"?{source:E.source}:{};if(u(it)){var ut=g(it),vt=nt?E.nodes:ut?[]:{};if(ut)for(B=vt.length,D=_(it),z=0;z<D;z++)S(it,z,y(it,""+z,F,z<B?vt[z]:void 0));else for(U=f(it),D=_(U),z=0;z<D;z++)Y=U[z],S(it,Y,y(it,Y,F,A(vt,Y)?vt[Y]:void 0))}return d(F,L,C,it,dt)},S=function(L,C,F){if(n){var E=O(L,C);if(E&&!E.configurable)return}F===void 0?delete L[C]:P(L,C,F)},N=function(L,C,F,E){this.value=L,this.end=C,this.source=F,this.nodes=E},q=function(L,C){this.source=L,this.index=C};q.prototype={fork:function(L){return new q(this.source,L)},parse:function(){var L=this.source,C=this.skip(p,this.index),F=this.fork(C),E=R(L,C);if(X(H,E))return F.number();switch(E){case"{":return F.object();case"[":return F.array();case'"':return F.string();case"t":return F.keyword(!0);case"f":return F.keyword(!1);case"n":return F.keyword(null)}throw s('Unexpected character: "'+E+'" at: '+C)},node:function(L,C,F,E,B){return new N(C,E,L?null:K(this.source,F,E),B)},object:function(){for(var L=this.source,C=this.index+1,F=!1,E={},B={};C<L.length;){if(C=this.until(['"',"}"],C),R(L,C)==="}"&&!F){C++;break}var U=this.fork(C).string(),D=U.value;C=U.end,C=this.until([":"],C)+1,C=this.skip(p,C),U=this.fork(C).parse(),P(B,D,U),P(E,D,U.value),C=this.until([",","}"],U.end);var z=R(L,C);if(z===",")F=!0,C++;else if(z==="}"){C++;break}}return this.node(1,E,this.index,C,B)},array:function(){for(var L=this.source,C=this.index+1,F=!1,E=[],B=[];C<L.length;){if(C=this.skip(p,C),R(L,C)==="]"&&!F){C++;break}var U=this.fork(C).parse();if(et(B,U),et(E,U.value),C=this.until([",","]"],U.end),R(L,C)===",")F=!0,C++;else if(R(L,C)==="]"){C++;break}}return this.node(1,E,this.index,C,B)},string:function(){var L=this.index,C=T(this.source,this.index+1);return this.node(0,C.value,L,C.end)},number:function(){var L=this.source,C=this.index,F=C;if(R(L,F)==="-"&&F++,R(L,F)==="0")F++;else{if(!X(V,R(L,F)))throw s("Failed to parse number at: "+F);F=this.skip(lt,++F)}if(R(L,F)==="."&&(F=this.skip(lt,++F)),(R(L,F)==="e"||R(L,F)==="E")&&(F++,R(L,F)!=="+"&&R(L,F)!=="-"||F++,F===(F=this.skip(lt,F))))throw s("Failed to parse number's exponent value at: "+F);return this.node(0,e(K(L,C,F)),C,F)},keyword:function(L){var C=""+L,F=this.index,E=F+C.length;if(K(this.source,F,E)!==C)throw s("Failed to parse value at: "+F);return this.node(0,L,F,E)},skip:function(L,C){for(var F=this.source;C<F.length&&X(L,R(F,C));C++);return C},until:function(L,C){C=this.skip(p,C);for(var F=R(this.source,C),E=0;E<L.length;E++)if(L[E]===F)return C;throw s('Unexpected character: "'+F+'" at: '+C)}};var Q=I(function(){var L,C="9007199254740993";return c(C,function(F,E,B){L=B.source}),L!==C}),W=M&&!I(function(){return 1/c("-0 	")!=-1/0});r({target:"JSON",stat:!0,forced:Q},{parse:function(C,F){return W&&!o(F)?c(C):function(E,B){E=v(E);var U=new q(E,0,""),D=U.parse(),z=D.value,Y=U.skip(p,D.end);if(Y<E.length)throw s('Unexpected extra character: "'+R(E,Y)+'" after the parsed data at: '+Y);return o(B)?y({"":z},"",B,D):z}(C,F)}})},(x,l,t)=>{var r=t(14),n=t(39),h=SyntaxError,m=parseInt,b=String.fromCharCode,d=r("".charAt),o=r("".slice),u=r(/./.exec),g={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},A=/^[\da-f]{4}$/i,v=/^[\u0000-\u001F]$/;x.exports=function(_,P){for(var I=!0,T="";P<_.length;){var M=d(_,P);if(M==="\\"){var i=o(_,P,P+2);if(n(g,i))T+=g[i],P+=2;else{if(i!=="\\u")throw h('Unknown escape sequence: "'+i+'"');var e=o(_,P+=2,P+4);if(!u(A,e))throw h("Bad Unicode escape at: "+P);T+=b(m(e,16)),P+=4}}else{if(M==='"'){I=!1,P++;break}if(u(v,M))throw h("Bad control character in string literal at: "+P);T+=M,P++}}if(I)throw h("Unterminated string at: "+P);return{value:T,end:P}}},(x,l,t)=>{var i,e,s,c,f,O,R,K,X,et,lt,V,he,p,de,S,Ke,q,Ee,W,Ce,C,me,E,ve;Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMFilterFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=void 0,l.deprecated=function(D){console.log("Deprecated API usage: "+D)},l.getColorValues=function(D){const z=document.createElement("span");z.style.visibility="hidden",document.body.append(z);for(const Y of D.keys()){z.style.color=Y;const it=window.getComputedStyle(z).color;D.set(Y,M(it))}z.remove()},l.getCurrentTransform=function(D){const{a:z,b:Y,c:it,d:nt,e:dt,f:ut}=D.getTransform();return[z,Y,it,nt,dt,ut]},l.getCurrentTransformInverse=function(D){const{a:z,b:Y,c:it,d:nt,e:dt,f:ut}=D.getTransform().invertSelf();return[z,Y,it,nt,dt,ut]},l.getFilenameFromUrl=function(D){return arguments.length>1&&arguments[1]!==void 0&&arguments[1]||([D]=D.split(/[#?]/,1)),D.substring(D.lastIndexOf("/")+1)},l.getPdfFilenameFromUrl=function(D){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof D!="string")return z;if(P(D))return(0,n.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),z;const Y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,it=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(D);let nt=Y.exec(it[1])||Y.exec(it[2])||Y.exec(it[3]);if(nt&&(nt=nt[0],nt.includes("%")))try{nt=Y.exec(decodeURIComponent(nt))[0]}catch{}return nt||z},l.getRGB=M,l.getXfaPageViewport=function(D,z){let{scale:Y=1,rotation:it=0}=z;const{width:nt,height:dt}=D.attributes.style,ut=[0,0,parseInt(nt),parseInt(dt)];return new v({viewBox:ut,scale:Y,rotation:it})},l.isDataScheme=P,l.isPdfFile=function(D){return typeof D=="string"&&/\.pdf$/i.test(D)},l.isValidFetchUrl=I,l.loadScript=function(D){let z=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise((Y,it)=>{const nt=document.createElement("script");nt.src=D,nt.onload=function(dt){z&&nt.remove(),Y(dt)},nt.onerror=function(){it(new Error(`Cannot load script at: ${nt.src}`))},(document.head||document.documentElement).append(nt)})},l.noContextMenu=function(D){D.preventDefault()},l.setLayerDimensions=function(D,z){let Y=arguments.length>2&&arguments[2]!==void 0&&arguments[2],it=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(z instanceof v){const{pageWidth:nt,pageHeight:dt}=z.rawDims,{style:ut}=D,vt=n.FeatureTest.isCSSRoundSupported,yt=`var(--scale-factor) * ${nt}px`,ft=`var(--scale-factor) * ${dt}px`,mt=vt?`round(${yt}, 1px)`:`calc(${yt})`,Mt=vt?`round(${ft}, 1px)`:`calc(${ft})`;Y&&z.rotation%180!=0?(ut.width=Mt,ut.height=mt):(ut.width=mt,ut.height=Mt)}it&&D.setAttribute("data-main-rotation",z.rotation)},t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89),t(84),t(86),t(87);var r=t(169),n=t(1);const h="http://www.w3.org/2000/svg";class m{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}l.PixelsPerInch=m;class b extends r.BaseFilterFactory{constructor(){let{docId:z,ownerDocument:Y=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();$(this,V);$(this,p);$(this,S);$(this,q);$(this,W);$(this,C);$(this,E);$(this,i,void 0);$(this,e,void 0);$(this,s,void 0);$(this,c,void 0);$(this,f,void 0);$(this,O,void 0);$(this,R,void 0);$(this,K,void 0);$(this,X,void 0);$(this,et,void 0);$(this,lt,0);st(this,s,z),st(this,c,Y)}addFilter(z){if(!z)return"none";let Y,it,nt,dt,ut=a(this,V,he).get(z);if(ut)return ut;if(z.length===1){const mt=z[0],Mt=new Array(256);for(let At=0;At<256;At++)Mt[At]=mt[At]/255;dt=Y=it=nt=Mt.join(",")}else{const[mt,Mt,At]=z,Pt=new Array(256),Ft=new Array(256),Lt=new Array(256);for(let Nt=0;Nt<256;Nt++)Pt[Nt]=mt[Nt]/255,Ft[Nt]=Mt[Nt]/255,Lt[Nt]=At[Nt]/255;Y=Pt.join(","),it=Ft.join(","),nt=Lt.join(","),dt=`${Y}${it}${nt}`}if(ut=a(this,V,he).get(dt),ut)return a(this,V,he).set(z,ut),ut;const vt=`g_${a(this,s)}_transfer_map_${Ae(this,lt)._++}`,yt=`url(#${vt})`;a(this,V,he).set(z,yt),a(this,V,he).set(dt,yt);const ft=Z(this,q,Ee).call(this,vt);return Z(this,C,me).call(this,Y,it,nt,ft),yt}addHCMFilter(z,Y){var Mt;const it=`${z}-${Y}`;if(a(this,O)===it)return a(this,R);if(st(this,O,it),st(this,R,"none"),(Mt=a(this,f))==null||Mt.remove(),!z||!Y)return a(this,R);const nt=Z(this,E,ve).call(this,z);z=n.Util.makeHexColor(...nt);const dt=Z(this,E,ve).call(this,Y);if(Y=n.Util.makeHexColor(...dt),a(this,p,de).style.color="",z==="#000000"&&Y==="#ffffff"||z===Y)return a(this,R);const ut=new Array(256);for(let At=0;At<=255;At++){const Pt=At/255;ut[At]=Pt<=.03928?Pt/12.92:((Pt+.055)/1.055)**2.4}const vt=ut.join(","),yt=`g_${a(this,s)}_hcm_filter`,ft=st(this,K,Z(this,q,Ee).call(this,yt));Z(this,C,me).call(this,vt,vt,vt,ft),Z(this,S,Ke).call(this,ft);const mt=(At,Pt)=>{const Ft=nt[At]/255,Lt=dt[At]/255,Nt=new Array(Pt+1);for(let Bt=0;Bt<=Pt;Bt++)Nt[Bt]=Ft+Bt/Pt*(Lt-Ft);return Nt.join(",")};return Z(this,C,me).call(this,mt(0,5),mt(1,5),mt(2,5),ft),st(this,R,`url(#${yt})`),a(this,R)}addHighlightHCMFilter(z,Y,it,nt){var Lt;const dt=`${z}-${Y}-${it}-${nt}`;if(a(this,X)===dt)return a(this,et);if(st(this,X,dt),st(this,et,"none"),(Lt=a(this,K))==null||Lt.remove(),!z||!Y)return a(this,et);const[ut,vt]=[z,Y].map(Z(this,E,ve).bind(this));let yt=Math.round(.2126*ut[0]+.7152*ut[1]+.0722*ut[2]),ft=Math.round(.2126*vt[0]+.7152*vt[1]+.0722*vt[2]),[mt,Mt]=[it,nt].map(Z(this,E,ve).bind(this));ft<yt&&([yt,ft,mt,Mt]=[ft,yt,Mt,mt]),a(this,p,de).style.color="";const At=(Nt,Bt,ee)=>{const Gt=new Array(256),Jt=(ft-yt)/ee,Kt=Nt/255,$t=(Bt-Nt)/(255*ee);let Yt=0;for(let Qt=0;Qt<=ee;Qt++){const Vt=Math.round(yt+Qt*Jt),Zt=Kt+Qt*$t;for(let zt=Yt;zt<=Vt;zt++)Gt[zt]=Zt;Yt=Vt+1}for(let Qt=Yt;Qt<256;Qt++)Gt[Qt]=Gt[Yt-1];return Gt.join(",")},Pt=`g_${a(this,s)}_hcm_highlight_filter`,Ft=st(this,K,Z(this,q,Ee).call(this,Pt));return Z(this,S,Ke).call(this,Ft),Z(this,C,me).call(this,At(mt[0],Mt[0],5),At(mt[1],Mt[1],5),At(mt[2],Mt[2],5),Ft),st(this,et,`url(#${Pt})`),a(this,et)}destroy(){(!(arguments.length>0&&arguments[0]!==void 0&&arguments[0])||!a(this,R)&&!a(this,et))&&(a(this,e)&&(a(this,e).parentNode.parentNode.remove(),st(this,e,null)),a(this,i)&&(a(this,i).clear(),st(this,i,null)),st(this,lt,0))}}i=new WeakMap,e=new WeakMap,s=new WeakMap,c=new WeakMap,f=new WeakMap,O=new WeakMap,R=new WeakMap,K=new WeakMap,X=new WeakMap,et=new WeakMap,lt=new WeakMap,V=new WeakSet,he=function(){return a(this,i)||st(this,i,new Map)},p=new WeakSet,de=function(){if(!a(this,e)){const z=a(this,c).createElement("div"),{style:Y}=z;Y.visibility="hidden",Y.contain="strict",Y.width=Y.height=0,Y.position="absolute",Y.top=Y.left=0,Y.zIndex=-1;const it=a(this,c).createElementNS(h,"svg");it.setAttribute("width",0),it.setAttribute("height",0),st(this,e,a(this,c).createElementNS(h,"defs")),z.append(it),it.append(a(this,e)),a(this,c).body.append(z)}return a(this,e)},S=new WeakSet,Ke=function(z){const Y=a(this,c).createElementNS(h,"feColorMatrix");Y.setAttribute("type","matrix"),Y.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),z.append(Y)},q=new WeakSet,Ee=function(z){const Y=a(this,c).createElementNS(h,"filter");return Y.setAttribute("color-interpolation-filters","sRGB"),Y.setAttribute("id",z),a(this,p,de).append(Y),Y},W=new WeakSet,Ce=function(z,Y,it){const nt=a(this,c).createElementNS(h,Y);nt.setAttribute("type","discrete"),nt.setAttribute("tableValues",it),z.append(nt)},C=new WeakSet,me=function(z,Y,it,nt){const dt=a(this,c).createElementNS(h,"feComponentTransfer");nt.append(dt),Z(this,W,Ce).call(this,dt,"feFuncR",z),Z(this,W,Ce).call(this,dt,"feFuncG",Y),Z(this,W,Ce).call(this,dt,"feFuncB",it)},E=new WeakSet,ve=function(z){return a(this,p,de).style.color=z,M(getComputedStyle(a(this,p,de)).getPropertyValue("color"))},l.DOMFilterFactory=b;class d extends r.BaseCanvasFactory{constructor(){let{ownerDocument:D=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=D}_createCanvas(D,z){const Y=this._document.createElement("canvas");return Y.width=D,Y.height=z,Y}}l.DOMCanvasFactory=d;async function o(U){let D=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(I(U,document.baseURI)){const z=await fetch(U);if(!z.ok)throw new Error(z.statusText);return D?new Uint8Array(await z.arrayBuffer()):(0,n.stringToBytes)(await z.text())}return new Promise((z,Y)=>{const it=new XMLHttpRequest;it.open("GET",U,!0),D&&(it.responseType="arraybuffer"),it.onreadystatechange=()=>{if(it.readyState===XMLHttpRequest.DONE){if(it.status===200||it.status===0){let nt;if(D&&it.response?nt=new Uint8Array(it.response):!D&&it.responseText&&(nt=(0,n.stringToBytes)(it.responseText)),nt){z(nt);return}}Y(new Error(it.statusText))}},it.send(null)})}class u extends r.BaseCMapReaderFactory{_fetchData(D,z){return o(D,this.isCompressed).then(Y=>({cMapData:Y,compressionType:z}))}}l.DOMCMapReaderFactory=u;class g extends r.BaseStandardFontDataFactory{_fetchData(D){return o(D,!0)}}l.DOMStandardFontDataFactory=g;class A extends r.BaseSVGFactory{_createSVG(D){return document.createElementNS(h,D)}}l.DOMSVGFactory=A;class v{constructor(D){let{viewBox:z,scale:Y,rotation:it,offsetX:nt=0,offsetY:dt=0,dontFlip:ut=!1}=D;this.viewBox=z,this.scale=Y,this.rotation=it,this.offsetX=nt,this.offsetY=dt;const vt=(z[2]+z[0])/2,yt=(z[3]+z[1])/2;let ft,mt,Mt,At,Pt,Ft,Lt,Nt;switch(it%=360,it<0&&(it+=360),it){case 180:ft=-1,mt=0,Mt=0,At=1;break;case 90:ft=0,mt=1,Mt=1,At=0;break;case 270:ft=0,mt=-1,Mt=-1,At=0;break;case 0:ft=1,mt=0,Mt=0,At=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ut&&(Mt=-Mt,At=-At),ft===0?(Pt=Math.abs(yt-z[1])*Y+nt,Ft=Math.abs(vt-z[0])*Y+dt,Lt=(z[3]-z[1])*Y,Nt=(z[2]-z[0])*Y):(Pt=Math.abs(vt-z[0])*Y+nt,Ft=Math.abs(yt-z[1])*Y+dt,Lt=(z[2]-z[0])*Y,Nt=(z[3]-z[1])*Y),this.transform=[ft*Y,mt*Y,Mt*Y,At*Y,Pt-ft*Y*vt-Mt*Y*yt,Ft-mt*Y*vt-At*Y*yt],this.width=Lt,this.height=Nt}get rawDims(){const{viewBox:D}=this;return(0,n.shadow)(this,"rawDims",{pageWidth:D[2]-D[0],pageHeight:D[3]-D[1],pageX:D[0],pageY:D[1]})}clone(){let{scale:D=this.scale,rotation:z=this.rotation,offsetX:Y=this.offsetX,offsetY:it=this.offsetY,dontFlip:nt=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new v({viewBox:this.viewBox.slice(),scale:D,rotation:z,offsetX:Y,offsetY:it,dontFlip:nt})}convertToViewportPoint(D,z){return n.Util.applyTransform([D,z],this.transform)}convertToViewportRectangle(D){const z=n.Util.applyTransform([D[0],D[1]],this.transform),Y=n.Util.applyTransform([D[2],D[3]],this.transform);return[z[0],z[1],Y[0],Y[1]]}convertToPdfPoint(D,z){return n.Util.applyInverseTransform([D,z],this.transform)}}l.PageViewport=v;class _ extends n.BaseException{constructor(D){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;super(D,"RenderingCancelledException"),this.extraDelay=z}}l.RenderingCancelledException=_;function P(U){const D=U.length;let z=0;for(;z<D&&U[z].trim()==="";)z++;return U.substring(z,z+5).toLowerCase()==="data:"}l.StatTimer=class{started=Object.create(null);times=[];time(D){D in this.started&&(0,n.warn)(`Timer is already running for ${D}`),this.started[D]=Date.now()}timeEnd(D){D in this.started||(0,n.warn)(`Timer has not been started for ${D}`),this.times.push({name:D,start:this.started[D],end:Date.now()}),delete this.started[D]}toString(){const D=[];let z=0;for(const{name:Y}of this.times)z=Math.max(Y.length,z);for(const{name:Y,start:it,end:nt}of this.times)D.push(`${Y.padEnd(z)} ${nt-it}ms
`);return D.join("")}};function I(U,D){try{const{protocol:z}=D?new URL(U,D):new URL(U);return z==="http:"||z==="https:"}catch{return!1}}let T;l.PDFDateString=class{static toDateObject(D){if(!D||typeof D!="string")return null;T||(T=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const z=T.exec(D);if(!z)return null;const Y=parseInt(z[1],10);let it=parseInt(z[2],10);it=it>=1&&it<=12?it-1:0;let nt=parseInt(z[3],10);nt=nt>=1&&nt<=31?nt:1;let dt=parseInt(z[4],10);dt=dt>=0&&dt<=23?dt:0;let ut=parseInt(z[5],10);ut=ut>=0&&ut<=59?ut:0;let vt=parseInt(z[6],10);vt=vt>=0&&vt<=59?vt:0;const yt=z[7]||"Z";let ft=parseInt(z[8],10);ft=ft>=0&&ft<=23?ft:0;let mt=parseInt(z[9],10)||0;return mt=mt>=0&&mt<=59?mt:0,yt==="-"?(dt+=ft,ut+=mt):yt==="+"&&(dt-=ft,ut-=mt),new Date(Date.UTC(Y,it,nt,dt,ut,vt))}};function M(U){if(U.startsWith("#")){const D=parseInt(U.slice(1),16);return[(16711680&D)>>16,(65280&D)>>8,255&D]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(D=>parseInt(D)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(D=>parseInt(D)).slice(0,3):((0,n.warn)(`Not a valid color format: "${U}"`),[0,0,0])}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseFilterFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0,t(2);var r=t(1);class n{constructor(){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(u){return"none"}addHCMFilter(u,g){return"none"}addHighlightHCMFilter(u,g,A,v){return"none"}destroy(){}}l.BaseFilterFactory=n;class h{constructor(){this.constructor===h&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,g){if(u<=0||g<=0)throw new Error("Invalid canvas size");const A=this._createCanvas(u,g);return{canvas:A,context:A.getContext("2d")}}reset(u,g,A){if(!u.canvas)throw new Error("Canvas is not specified");if(g<=0||A<=0)throw new Error("Invalid canvas size");u.canvas.width=g,u.canvas.height=A}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,g){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=h;class m{constructor(u){let{baseUrl:g=null,isCompressed:A=!0}=u;this.constructor===m&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=A}async fetch(u){let{name:g}=u;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const A=this.baseUrl+g+(this.isCompressed?".bcmap":""),v=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(A,v).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(u,g){(0,r.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=m;class b{constructor(u){let{baseUrl:g=null}=u;this.constructor===b&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch(u){let{filename:g}=u;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${g}`;return this._fetchData(A).catch(v=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(u){(0,r.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=b;class d{constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,g){let A=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(u<=0||g<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),A||(v.setAttribute("width",`${u}px`),v.setAttribute("height",`${g}px`)),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${u} ${g}`),v}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,r.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=d},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2);var r=t(1);const n=3285377520,h=4294901760,m=65535;l.MurmurHash3_64=class{constructor(d){this.h1=d?4294967295&d:n,this.h2=d?4294967295&d:n}update(d){let o,u;if(typeof d=="string"){o=new Uint8Array(2*d.length),u=0;for(let c=0,f=d.length;c<f;c++){const O=d.charCodeAt(c);O<=255?o[u++]=O:(o[u++]=O>>>8,o[u++]=255&O)}}else{if(!(0,r.isArrayBuffer)(d))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");o=d.slice(),u=o.byteLength}const g=u>>2,A=u-4*g,v=new Uint32Array(o.buffer,0,g);let _=0,P=0,I=this.h1,T=this.h2;const M=3432918353,i=461845907,e=11601,s=13715;for(let c=0;c<g;c++)1&c?(_=v[c],_=_*M&h|_*e&m,_=_<<15|_>>>17,_=_*i&h|_*s&m,I^=_,I=I<<13|I>>>19,I=5*I+3864292196):(P=v[c],P=P*M&h|P*e&m,P=P<<15|P>>>17,P=P*i&h|P*s&m,T^=P,T=T<<13|T>>>19,T=5*T+3864292196);switch(_=0,A){case 3:_^=o[4*g+2]<<16;case 2:_^=o[4*g+1]<<8;case 1:_^=o[4*g],_=_*M&h|_*e&m,_=_<<15|_>>>17,_=_*i&h|_*s&m,1&g?I^=_:T^=_}this.h1=I,this.h2=T}hexdigest(){let d=this.h1,o=this.h2;return d^=o>>>1,d=3981806797*d&h|36045*d&m,o=4283543511*o&h|(2950163797*(o<<16|d>>>16)&h)>>>16,d^=o>>>1,d=444984403*d&h|60499*d&m,o=3301882366*o&h|(3120437893*(o<<16|d>>>16)&h)>>>16,d^=o>>>1,(d>>>0).toString(16).padStart(8,"0")+(o>>>0).toString(16).padStart(8,"0")}}},(x,l,t)=>{var n,h;Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0,t(125),t(136),t(138),t(141),t(143),t(145),t(147),t(89),t(149);var r=t(1);l.FontLoader=(h=class{constructor(b){$(this,n,new Set);let{ownerDocument:d=globalThis.document,styleElement:o=null}=b;this._document=d,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(b){this.nativeFontFaces.add(b),this._document.fonts.add(b)}removeNativeFontFace(b){this.nativeFontFaces.delete(b),this._document.fonts.delete(b)}insertRule(b){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const d=this.styleElement.sheet;d.insertRule(b,d.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.clear(),a(this,n).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(b){if(b&&!a(this,n).has(b.loadedName))if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:d,src:o,style:u}=b,g=new FontFace(d,o,u);this.addNativeFontFace(g);try{await g.load(),a(this,n).add(d)}catch{(0,r.warn)(`Cannot load system font: ${b.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(g)}}else(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(b){if(b.attached||b.missingFile&&!b.systemFontInfo)return;if(b.attached=!0,b.systemFontInfo){await this.loadSystemFont(b.systemFontInfo);return}if(this.isFontLoadingAPISupported){const o=b.createNativeFontFace();if(o){this.addNativeFontFace(o);try{await o.loaded}catch(u){throw(0,r.warn)(`Failed to load font '${o.family}': '${u}'.`),b.disableFontFace=!0,u}}return}const d=b.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(o=>{const u=this._queueLoadingCallback(o);this._prepareFontLoadEvent(b,u)})}}get isFontLoadingAPISupported(){var d;const b=!!((d=this._document)!=null&&d.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){let b=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(b=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){const{loadingRequests:d}=this,o={done:!1,complete:function(){for((0,r.assert)(!o.done,"completeRequest() cannot be called twice."),o.done=!0;d.length>0&&d[0].done;){const g=d.shift();setTimeout(g.callback,0)}},callback:b};return d.push(o),o}get _loadTestFont(){const b=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",b)}_prepareFontLoadEvent(b,d){function o(c,f){return c.charCodeAt(f)<<24|c.charCodeAt(f+1)<<16|c.charCodeAt(f+2)<<8|255&c.charCodeAt(f+3)}function u(c,f,O,R){return c.substring(0,f)+R+c.substring(f+O)}let g,A;const v=this._document.createElement("canvas");v.width=1,v.height=1;const _=v.getContext("2d");let P=0;const I=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=u(T,976,I.length,I);const M=1482184792;let i=o(T,16);for(g=0,A=I.length-3;g<A;g+=4)i=i-M+o(I,g)|0;g<I.length&&(i=i-M+o(I+"XXX",g)|0),T=u(T,16,4,(0,r.string32)(i));const e=`@font-face {font-family:"${I}";src:${`url(data:font/opentype;base64,${btoa(T)});`}}`;this.insertRule(e);const s=this._document.createElement("div");s.style.visibility="hidden",s.style.width=s.style.height="10px",s.style.position="absolute",s.style.top=s.style.left="0px";for(const c of[b.loadedName,I]){const f=this._document.createElement("span");f.textContent="Hi",f.style.fontFamily=c,s.append(f)}this._document.body.append(s),function c(f,O){if(++P>30){(0,r.warn)("Load test font never loaded."),O();return}_.font="30px "+f,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0?O():setTimeout(c.bind(null,f,O))}(I,()=>{s.remove(),d.complete()})}},n=new WeakMap,h),l.FontFaceObject=class{constructor(b,d){let{isEvalSupported:o=!0,disableFontFace:u=!1,ignoreErrors:g=!1,inspectFont:A=null}=d;this.compiledGlyphs=Object.create(null);for(const v in b)this[v]=b[v];this.isEvalSupported=o!==!1,this.disableFontFace=u===!0,this.ignoreErrors=g===!0,this._inspectFont=A}createNativeFontFace(){var d;if(!this.data||this.disableFontFace)return null;let b;if(this.cssFontInfo){const o={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(o.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,o)}else b=new FontFace(this.loadedName,this.data,{});return(d=this._inspectFont)==null||d.call(this,this),b}createFontFaceRule(){var u;if(!this.data||this.disableFontFace)return null;const b=(0,r.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(b)});`;let o;if(this.cssFontInfo){let g=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(g+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),o=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${g}src:${d}}`}else o=`@font-face {font-family:"${this.loadedName}";src:${d}}`;return(u=this._inspectFont)==null||u.call(this,this,d),o}getPathGenerator(b,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let o;try{o=b.get(this.loadedName+"_path_"+d)}catch(u){if(!this.ignoreErrors)throw u;return(0,r.warn)(`getPathGenerator - ignoring character: "${u}".`),this.compiledGlyphs[d]=function(g,A){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const u=[];for(const g of o){const A=g.args!==void 0?g.args.join(","):"";u.push("c.",g.cmd,"(",A,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",u.join(""))}return this.compiledGlyphs[d]=function(u,g){for(const A of o)A.cmd==="scale"&&(A.args=[g,-g]),u[A.cmd].apply(u,A.args)}}}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeFilterFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var r=t(169),n=t(1);(function(){if(!globalThis.DOMMatrix&&n.isNodeJS)try{globalThis.DOMMatrix=require("canvas").DOMMatrix}catch(g){(0,n.warn)(`Cannot polyfill \`DOMMatrix\`, rendering may be broken: "${g}".`)}})(),function(){if(!globalThis.Path2D&&n.isNodeJS)try{const{CanvasRenderingContext2D:g}=require("canvas"),{polyfillPath2D:A}=require("path2d-polyfill");globalThis.CanvasRenderingContext2D=g,A(globalThis)}catch(g){(0,n.warn)(`Cannot polyfill \`Path2D\`, rendering may be broken: "${g}".`)}}();const h=function(u){return new Promise((g,A)=>{require("fs").readFile(u,(v,_)=>{!v&&_?g(new Uint8Array(_)):A(new Error(v))})})};class m extends r.BaseFilterFactory{}l.NodeFilterFactory=m;class b extends r.BaseCanvasFactory{_createCanvas(g,A){return require("canvas").createCanvas(g,A)}}l.NodeCanvasFactory=b;class d extends r.BaseCMapReaderFactory{_fetchData(g,A){return h(g).then(v=>({cMapData:v,compressionType:A}))}}l.NodeCMapReaderFactory=d;class o extends r.BaseStandardFontDataFactory{_fetchData(g){return h(g)}}l.NodeStandardFontDataFactory=o},(x,l,t)=>{var K,Je,et,Qe;Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var r=t(1),n=t(168),h=t(174),m=t(175);const b=4096,d=16;class o{constructor(p){this.canvasFactory=p,this.cache=Object.create(null)}getCanvas(p,y,S){let N;return this.cache[p]!==void 0?(N=this.cache[p],this.canvasFactory.reset(N,y,S)):(N=this.canvasFactory.create(y,S),this.cache[p]=N),N}delete(p){delete this.cache[p]}clear(){for(const p in this.cache){const y=this.cache[p];this.canvasFactory.destroy(y),delete this.cache[p]}}}function u(H,p,y,S,N,q,Q,W,L,C){const[F,E,B,U,D,z]=(0,n.getCurrentTransform)(H);if(E===0&&B===0){const Y=Q*F+D,it=Math.round(Y),nt=W*U+z,dt=Math.round(nt),ut=(Q+L)*F+D,vt=Math.abs(Math.round(ut)-it)||1,yt=(W+C)*U+z,ft=Math.abs(Math.round(yt)-dt)||1;return H.setTransform(Math.sign(F),0,0,Math.sign(U),it,dt),H.drawImage(p,y,S,N,q,0,0,vt,ft),H.setTransform(F,E,B,U,D,z),[vt,ft]}if(F===0&&U===0){const Y=W*B+D,it=Math.round(Y),nt=Q*E+z,dt=Math.round(nt),ut=(W+C)*B+D,vt=Math.abs(Math.round(ut)-it)||1,yt=(Q+L)*E+z,ft=Math.abs(Math.round(yt)-dt)||1;return H.setTransform(0,Math.sign(E),Math.sign(B),0,it,dt),H.drawImage(p,y,S,N,q,0,0,ft,vt),H.setTransform(F,E,B,U,D,z),[ft,vt]}return H.drawImage(p,y,S,N,q,Q,W,L,C),[Math.hypot(F,E)*L,Math.hypot(B,U)*C]}class g{constructor(p,y){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,p,y])}clone(){const p=Object.create(this);return p.clipBox=this.clipBox.slice(),p}setCurrentPoint(p,y){this.x=p,this.y=y}updatePathMinMax(p,y,S){[y,S]=r.Util.applyTransform([y,S],p),this.minX=Math.min(this.minX,y),this.minY=Math.min(this.minY,S),this.maxX=Math.max(this.maxX,y),this.maxY=Math.max(this.maxY,S)}updateRectMinMax(p,y){const S=r.Util.applyTransform(y,p),N=r.Util.applyTransform(y.slice(2),p);this.minX=Math.min(this.minX,S[0],N[0]),this.minY=Math.min(this.minY,S[1],N[1]),this.maxX=Math.max(this.maxX,S[0],N[0]),this.maxY=Math.max(this.maxY,S[1],N[1])}updateScalingPathMinMax(p,y){r.Util.scaleMinMax(p,y),this.minX=Math.min(this.minX,y[0]),this.maxX=Math.max(this.maxX,y[1]),this.minY=Math.min(this.minY,y[2]),this.maxY=Math.max(this.maxY,y[3])}updateCurvePathMinMax(p,y,S,N,q,Q,W,L,C,F){const E=r.Util.bezierBoundingBox(y,S,N,q,Q,W,L,C);F?(F[0]=Math.min(F[0],E[0],E[2]),F[1]=Math.max(F[1],E[0],E[2]),F[2]=Math.min(F[2],E[1],E[3]),F[3]=Math.max(F[3],E[1],E[3])):this.updateRectMinMax(p,E)}getPathBoundingBox(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.PathType.FILL,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const S=[this.minX,this.minY,this.maxX,this.maxY];if(p===h.PathType.STROKE){y||(0,r.unreachable)("Stroke bounding box must include transform.");const N=r.Util.singularValueDecompose2dScale(y),q=N[0]*this.lineWidth/2,Q=N[1]*this.lineWidth/2;S[0]-=q,S[1]-=Q,S[2]+=q,S[3]+=Q}return S}updateClipFromPath(){const p=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(p||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(p){this.clipBox=p,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.PathType.FILL,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(p,y))}}function A(H,p){if(typeof ImageData<"u"&&p instanceof ImageData){H.putImageData(p,0,0);return}const y=p.height,S=p.width,N=y%d,q=(y-N)/d,Q=N===0?q:q+1,W=H.createImageData(S,d);let L,C=0;const F=p.data,E=W.data;let B,U,D,z;if(p.kind===r.ImageKind.GRAYSCALE_1BPP){const Y=F.byteLength,it=new Uint32Array(E.buffer,0,E.byteLength>>2),nt=it.length,dt=S+7>>3,ut=4294967295,vt=r.FeatureTest.isLittleEndian?4278190080:255;for(B=0;B<Q;B++){for(D=B<q?d:N,L=0,U=0;U<D;U++){const yt=Y-C;let ft=0;const mt=yt>dt?S:8*yt-7,Mt=-8&mt;let At=0,Pt=0;for(;ft<Mt;ft+=8)Pt=F[C++],it[L++]=128&Pt?ut:vt,it[L++]=64&Pt?ut:vt,it[L++]=32&Pt?ut:vt,it[L++]=16&Pt?ut:vt,it[L++]=8&Pt?ut:vt,it[L++]=4&Pt?ut:vt,it[L++]=2&Pt?ut:vt,it[L++]=1&Pt?ut:vt;for(;ft<mt;ft++)At===0&&(Pt=F[C++],At=128),it[L++]=Pt&At?ut:vt,At>>=1}for(;L<nt;)it[L++]=0;H.putImageData(W,0,B*d)}}else if(p.kind===r.ImageKind.RGBA_32BPP){for(U=0,z=S*d*4,B=0;B<q;B++)E.set(F.subarray(C,C+z)),C+=z,H.putImageData(W,0,U),U+=d;B<Q&&(z=S*N*4,E.set(F.subarray(C,C+z)),H.putImageData(W,0,U))}else{if(p.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${p.kind}`);for(D=d,z=S*D,B=0;B<Q;B++){for(B>=q&&(D=N,z=S*D),L=0,U=z;U--;)E[L++]=F[C++],E[L++]=F[C++],E[L++]=F[C++],E[L++]=255;H.putImageData(W,0,B*d)}}}function v(H,p){if(p.bitmap){H.drawImage(p.bitmap,0,0);return}const y=p.height,S=p.width,N=y%d,q=(y-N)/d,Q=N===0?q:q+1,W=H.createImageData(S,d);let L=0;const C=p.data,F=W.data;for(let E=0;E<Q;E++){const B=E<q?d:N;({srcPos:L}=(0,m.convertBlackAndWhiteToRGBA)({src:C,srcPos:L,dest:F,width:S,height:B,nonBlackColor:0})),H.putImageData(W,0,E*d)}}function _(H,p){const y=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const S of y)H[S]!==void 0&&(p[S]=H[S]);H.setLineDash!==void 0&&(p.setLineDash(H.getLineDash()),p.lineDashOffset=H.lineDashOffset)}function P(H){if(H.strokeStyle=H.fillStyle="#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0),!r.isNodeJS){const{filter:p}=H;p!=="none"&&p!==""&&(H.filter="none")}}function I(H,p,y,S){const N=H.length;for(let q=3;q<N;q+=4){const Q=H[q];if(Q===0)H[q-3]=p,H[q-2]=y,H[q-1]=S;else if(Q<255){const W=255-Q;H[q-3]=H[q-3]*Q+p*W>>8,H[q-2]=H[q-2]*Q+y*W>>8,H[q-1]=H[q-1]*Q+S*W>>8}}}function T(H,p,y){const S=H.length;for(let N=3;N<S;N+=4){const q=y?y[H[N]]:H[N];p[N]=p[N]*q*.00392156862745098|0}}function M(H,p,y){const S=H.length;for(let N=3;N<S;N+=4){const q=77*H[N-3]+152*H[N-2]+28*H[N-1];p[N]=y?p[N]*y[q>>8]>>8:p[N]*q>>16}}function i(H,p,y,S){const N=S[0],q=S[1],Q=S[2]-N,W=S[3]-q;Q!==0&&W!==0&&(function(C,F,E,B,U,D,z,Y,it,nt,dt){const ut=!!D,vt=ut?D[0]:0,yt=ut?D[1]:0,ft=ut?D[2]:0,mt=U==="Luminosity"?M:T,Mt=Math.min(B,Math.ceil(1048576/E));for(let At=0;At<B;At+=Mt){const Pt=Math.min(Mt,B-At),Ft=C.getImageData(Y-nt,At+(it-dt),E,Pt),Lt=F.getImageData(Y,At+it,E,Pt);ut&&I(Ft.data,vt,yt,ft),mt(Ft.data,Lt.data,z),F.putImageData(Lt,Y,At+it)}}(p.context,y,Q,W,p.subtype,p.backdrop,p.transferMap,N,q,p.offsetX,p.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(y.canvas,0,0),H.restore())}function e(H,p){const y=r.Util.singularValueDecompose2dScale(H);y[0]=Math.fround(y[0]),y[1]=Math.fround(y[1]);const S=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return p!==void 0?p:y[0]<=S||y[1]<=S}const s=["butt","round","square"],c=["miter","round","bevel"],f={},O={},V=class V{constructor(p,y,S,N,q,Q,W,L){$(this,K);$(this,et);let{optionalContentConfig:C,markedContentStack:F=null}=Q;this.ctx=p,this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=y,this.objs=S,this.canvasFactory=N,this.filterFactory=q,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=F||[],this.optionalContentConfig=C,this.cachedCanvases=new o(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=L,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof p=="string"?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):y}beginDrawing(p){let{transform:y,viewport:S,transparency:N=!1,background:q=null}=p;const Q=this.ctx.canvas.width,W=this.ctx.canvas.height,L=this.ctx.fillStyle;if(this.ctx.fillStyle=q||"#ffffff",this.ctx.fillRect(0,0,Q,W),this.ctx.fillStyle=L,N){const C=this.cachedCanvases.getCanvas("transparent",Q,W);this.compositeCtx=this.ctx,this.transparentCanvas=C.canvas,this.ctx=C.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),P(this.ctx),y&&(this.ctx.transform(...y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform(...S.transform),this.viewportScale=S.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx)}executeOperatorList(p,y,S,N){const q=p.argsArray,Q=p.fnArray;let W=y||0;const L=q.length;if(L===W)return W;const C=L-W>10&&typeof S=="function",F=C?Date.now()+15:0;let E=0;const B=this.commonObjs,U=this.objs;let D;for(;;){if(N!==void 0&&W===N.nextBreakPoint)return N.breakIt(W,S),W;if(D=Q[W],D!==r.OPS.dependency)this[D].apply(this,q[W]);else for(const z of q[W]){const Y=z.startsWith("g_")?B:U;if(!Y.has(z))return Y.get(z,S),W}if(W++,W===L)return W;if(C&&++E>10){if(Date.now()>F)return S(),W;E=0}}}endDrawing(){Z(this,K,Je).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const p of this._cachedBitmapsMap.values()){for(const y of p.values())typeof HTMLCanvasElement<"u"&&y instanceof HTMLCanvasElement&&(y.width=y.height=0);p.clear()}this._cachedBitmapsMap.clear(),Z(this,et,Qe).call(this)}_scaleImage(p,y){const S=p.width,N=p.height;let q,Q,W=Math.max(Math.hypot(y[0],y[1]),1),L=Math.max(Math.hypot(y[2],y[3]),1),C=S,F=N,E="prescale1";for(;W>2&&C>1||L>2&&F>1;){let B=C,U=F;W>2&&C>1&&(B=C>=16384?Math.floor(C/2)-1||1:Math.ceil(C/2),W/=C/B),L>2&&F>1&&(U=F>=16384?Math.floor(F/2)-1||1:Math.ceil(F)/2,L/=F/U),q=this.cachedCanvases.getCanvas(E,B,U),Q=q.context,Q.clearRect(0,0,B,U),Q.drawImage(p,0,0,C,F,0,0,B,U),p=q.canvas,C=B,F=U,E=E==="prescale1"?"prescale2":"prescale1"}return{img:p,paintWidth:C,paintHeight:F}}_createMaskCanvas(p){const y=this.ctx,{width:S,height:N}=p,q=this.current.fillColor,Q=this.current.patternFill,W=(0,n.getCurrentTransform)(y);let L,C,F,E;if((p.bitmap||p.data)&&p.count>1){const ft=p.bitmap||p.data.buffer;C=JSON.stringify(Q?W:[W.slice(0,4),q]),L=this._cachedBitmapsMap.get(ft),L||(L=new Map,this._cachedBitmapsMap.set(ft,L));const mt=L.get(C);if(mt&&!Q)return{canvas:mt,offsetX:Math.round(Math.min(W[0],W[2])+W[4]),offsetY:Math.round(Math.min(W[1],W[3])+W[5])};F=mt}F||(E=this.cachedCanvases.getCanvas("maskCanvas",S,N),v(E.context,p));let B=r.Util.transform(W,[1/S,0,0,-1/N,0,0]);B=r.Util.transform(B,[1,0,0,1,0,-N]);const U=r.Util.applyTransform([0,0],B),D=r.Util.applyTransform([S,N],B),z=r.Util.normalizeRect([U[0],U[1],D[0],D[1]]),Y=Math.round(z[2]-z[0])||1,it=Math.round(z[3]-z[1])||1,nt=this.cachedCanvases.getCanvas("fillCanvas",Y,it),dt=nt.context,ut=Math.min(U[0],D[0]),vt=Math.min(U[1],D[1]);dt.translate(-ut,-vt),dt.transform(...B),F||(F=this._scaleImage(E.canvas,(0,n.getCurrentTransformInverse)(dt)),F=F.img,L&&Q&&L.set(C,F)),dt.imageSmoothingEnabled=e((0,n.getCurrentTransform)(dt),p.interpolate),u(dt,F,0,0,F.width,F.height,0,0,S,N),dt.globalCompositeOperation="source-in";const yt=r.Util.transform((0,n.getCurrentTransformInverse)(dt),[1,0,0,1,-ut,-vt]);return dt.fillStyle=Q?q.getPattern(y,this,yt,h.PathType.FILL):q,dt.fillRect(0,0,S,N),L&&!Q&&(this.cachedCanvases.delete("fillCanvas"),L.set(C,nt.canvas)),{canvas:nt.canvas,offsetX:Math.round(ut),offsetY:Math.round(vt)}}setLineWidth(p){p!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=p,this.ctx.lineWidth=p}setLineCap(p){this.ctx.lineCap=s[p]}setLineJoin(p){this.ctx.lineJoin=c[p]}setMiterLimit(p){this.ctx.miterLimit=p}setDash(p,y){const S=this.ctx;S.setLineDash!==void 0&&(S.setLineDash(p),S.lineDashOffset=y)}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(const[y,S]of p)switch(y){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S[0],S[1]);break;case"CA":this.current.strokeAlpha=S;break;case"ca":this.current.fillAlpha=S,this.ctx.globalAlpha=S;break;case"BM":this.ctx.globalCompositeOperation=S;break;case"SMask":this.current.activeSMask=S?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(S)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const p=this.inSMaskMode;this.current.activeSMask&&!p?this.beginSMaskMode():!this.current.activeSMask&&p&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const p=this.ctx.canvas.width,y=this.ctx.canvas.height,S="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(S,p,y);this.suspendedCtx=this.ctx,this.ctx=N.context;const q=this.ctx;q.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),_(this.suspendedCtx,q),function(W,L){if(W._removeMirroring)throw new Error("Context is already forwarding operations.");W.__originalSave=W.save,W.__originalRestore=W.restore,W.__originalRotate=W.rotate,W.__originalScale=W.scale,W.__originalTranslate=W.translate,W.__originalTransform=W.transform,W.__originalSetTransform=W.setTransform,W.__originalResetTransform=W.resetTransform,W.__originalClip=W.clip,W.__originalMoveTo=W.moveTo,W.__originalLineTo=W.lineTo,W.__originalBezierCurveTo=W.bezierCurveTo,W.__originalRect=W.rect,W.__originalClosePath=W.closePath,W.__originalBeginPath=W.beginPath,W._removeMirroring=()=>{W.save=W.__originalSave,W.restore=W.__originalRestore,W.rotate=W.__originalRotate,W.scale=W.__originalScale,W.translate=W.__originalTranslate,W.transform=W.__originalTransform,W.setTransform=W.__originalSetTransform,W.resetTransform=W.__originalResetTransform,W.clip=W.__originalClip,W.moveTo=W.__originalMoveTo,W.lineTo=W.__originalLineTo,W.bezierCurveTo=W.__originalBezierCurveTo,W.rect=W.__originalRect,W.closePath=W.__originalClosePath,W.beginPath=W.__originalBeginPath,delete W._removeMirroring},W.save=function(){L.save(),this.__originalSave()},W.restore=function(){L.restore(),this.__originalRestore()},W.translate=function(F,E){L.translate(F,E),this.__originalTranslate(F,E)},W.scale=function(F,E){L.scale(F,E),this.__originalScale(F,E)},W.transform=function(F,E,B,U,D,z){L.transform(F,E,B,U,D,z),this.__originalTransform(F,E,B,U,D,z)},W.setTransform=function(F,E,B,U,D,z){L.setTransform(F,E,B,U,D,z),this.__originalSetTransform(F,E,B,U,D,z)},W.resetTransform=function(){L.resetTransform(),this.__originalResetTransform()},W.rotate=function(F){L.rotate(F),this.__originalRotate(F)},W.clip=function(F){L.clip(F),this.__originalClip(F)},W.moveTo=function(C,F){L.moveTo(C,F),this.__originalMoveTo(C,F)},W.lineTo=function(C,F){L.lineTo(C,F),this.__originalLineTo(C,F)},W.bezierCurveTo=function(C,F,E,B,U,D){L.bezierCurveTo(C,F,E,B,U,D),this.__originalBezierCurveTo(C,F,E,B,U,D)},W.rect=function(C,F,E,B){L.rect(C,F,E,B),this.__originalRect(C,F,E,B)},W.closePath=function(){L.closePath(),this.__originalClosePath()},W.beginPath=function(){L.beginPath(),this.__originalBeginPath()}}(q,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(p){if(!this.current.activeSMask)return;p?(p[0]=Math.floor(p[0]),p[1]=Math.floor(p[1]),p[2]=Math.ceil(p[2]),p[3]=Math.ceil(p[3])):p=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const y=this.current.activeSMask;i(this.suspendedCtx,y,this.ctx,p),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const p=this.current;this.stateStack.push(p),this.current=p.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(p,y,S,N,q,Q){this.ctx.transform(p,y,S,N,q,Q),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(p,y,S){const N=this.ctx,q=this.current;let Q,W,L=q.x,C=q.y;const F=(0,n.getCurrentTransform)(N),E=F[0]===0&&F[3]===0||F[1]===0&&F[2]===0,B=E?S.slice(0):null;for(let U=0,D=0,z=p.length;U<z;U++)switch(0|p[U]){case r.OPS.rectangle:L=y[D++],C=y[D++];const Y=y[D++],it=y[D++],nt=L+Y,dt=C+it;N.moveTo(L,C),Y===0||it===0?N.lineTo(nt,dt):(N.lineTo(nt,C),N.lineTo(nt,dt),N.lineTo(L,dt)),E||q.updateRectMinMax(F,[L,C,nt,dt]),N.closePath();break;case r.OPS.moveTo:L=y[D++],C=y[D++],N.moveTo(L,C),E||q.updatePathMinMax(F,L,C);break;case r.OPS.lineTo:L=y[D++],C=y[D++],N.lineTo(L,C),E||q.updatePathMinMax(F,L,C);break;case r.OPS.curveTo:Q=L,W=C,L=y[D+4],C=y[D+5],N.bezierCurveTo(y[D],y[D+1],y[D+2],y[D+3],L,C),q.updateCurvePathMinMax(F,Q,W,y[D],y[D+1],y[D+2],y[D+3],L,C,B),D+=6;break;case r.OPS.curveTo2:Q=L,W=C,N.bezierCurveTo(L,C,y[D],y[D+1],y[D+2],y[D+3]),q.updateCurvePathMinMax(F,Q,W,L,C,y[D],y[D+1],y[D+2],y[D+3],B),L=y[D+2],C=y[D+3],D+=4;break;case r.OPS.curveTo3:Q=L,W=C,L=y[D+2],C=y[D+3],N.bezierCurveTo(y[D],y[D+1],L,C,L,C),q.updateCurvePathMinMax(F,Q,W,y[D],y[D+1],L,C,L,C,B),D+=4;break;case r.OPS.closePath:N.closePath()}E&&q.updateScalingPathMinMax(F,B),q.setCurrentPoint(L,C)}closePath(){this.ctx.closePath()}stroke(){let p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];const y=this.ctx,S=this.current.strokeColor;y.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof S=="object"&&(S!=null&&S.getPattern)?(y.save(),y.strokeStyle=S.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),h.PathType.STROKE),this.rescaleAndStroke(!1),y.restore()):this.rescaleAndStroke(!0)),p&&this.consumePath(this.current.getClippedPathBoundingBox()),y.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];const y=this.ctx,S=this.current.fillColor;let N=!1;this.current.patternFill&&(y.save(),y.fillStyle=S.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),h.PathType.FILL),N=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(y.fill("evenodd"),this.pendingEOFill=!1):y.fill()),N&&y.restore(),p&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=f}eoClip(){this.pendingClip=O}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const p=this.pendingTextPaths,y=this.ctx;if(p!==void 0){y.save(),y.beginPath();for(const S of p)y.setTransform(...S.transform),y.translate(S.x,S.y),S.addToPath(y,S.fontSize);y.restore(),y.clip(),y.beginPath(),delete this.pendingTextPaths}else y.beginPath()}setCharSpacing(p){this.current.charSpacing=p}setWordSpacing(p){this.current.wordSpacing=p}setHScale(p){this.current.textHScale=p/100}setLeading(p){this.current.leading=-p}setFont(p,y){var F;const S=this.commonObjs.get(p),N=this.current;if(!S)throw new Error(`Can't find font for ${p}`);if(N.fontMatrix=S.fontMatrix||r.FONT_IDENTITY_MATRIX,N.fontMatrix[0]!==0&&N.fontMatrix[3]!==0||(0,r.warn)("Invalid font matrix for font "+p),y<0?(y=-y,N.fontDirection=-1):N.fontDirection=1,this.current.font=S,this.current.fontSize=y,S.isType3Font)return;const q=S.loadedName||"sans-serif",Q=((F=S.systemFontInfo)==null?void 0:F.css)||`"${q}", ${S.fallbackName}`;let W="normal";S.black?W="900":S.bold&&(W="bold");const L=S.italic?"italic":"normal";let C=y;y<16?C=16:y>100&&(C=100),this.current.fontSizeScale=y/C,this.ctx.font=`${L} ${W} ${C}px ${Q}`}setTextRenderingMode(p){this.current.textRenderingMode=p}setTextRise(p){this.current.textRise=p}moveText(p,y){this.current.x=this.current.lineX+=p,this.current.y=this.current.lineY+=y}setLeadingMoveText(p,y){this.setLeading(-y),this.moveText(p,y)}setTextMatrix(p,y,S,N,q,Q){this.current.textMatrix=[p,y,S,N,q,Q],this.current.textMatrixScale=Math.hypot(p,y),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(p,y,S,N){const q=this.ctx,Q=this.current,W=Q.font,L=Q.textRenderingMode,C=Q.fontSize/Q.fontSizeScale,F=L&r.TextRenderingMode.FILL_STROKE_MASK,E=!!(L&r.TextRenderingMode.ADD_TO_PATH_FLAG),B=Q.patternFill&&!W.missingFile;let U;(W.disableFontFace||E||B)&&(U=W.getPathGenerator(this.commonObjs,p)),W.disableFontFace||B?(q.save(),q.translate(y,S),q.beginPath(),U(q,C),N&&q.setTransform(...N),F!==r.TextRenderingMode.FILL&&F!==r.TextRenderingMode.FILL_STROKE||q.fill(),F!==r.TextRenderingMode.STROKE&&F!==r.TextRenderingMode.FILL_STROKE||q.stroke(),q.restore()):(F!==r.TextRenderingMode.FILL&&F!==r.TextRenderingMode.FILL_STROKE||q.fillText(p,y,S),F!==r.TextRenderingMode.STROKE&&F!==r.TextRenderingMode.FILL_STROKE||q.strokeText(p,y,S)),E&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(q),x:y,y:S,fontSize:C,addToPath:U})}get isFontSubpixelAAEnabled(){const{context:p}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);p.scale(1.5,1),p.fillText("I",0,10);const y=p.getImageData(0,0,10,10).data;let S=!1;for(let N=3;N<y.length;N+=4)if(y[N]>0&&y[N]<255){S=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",S)}showText(p){const y=this.current,S=y.font;if(S.isType3Font)return this.showType3Text(p);const N=y.fontSize;if(N===0)return;const q=this.ctx,Q=y.fontSizeScale,W=y.charSpacing,L=y.wordSpacing,C=y.fontDirection,F=y.textHScale*C,E=p.length,B=S.vertical,U=B?1:-1,D=S.defaultVMetrics,z=N*y.fontMatrix[0],Y=y.textRenderingMode===r.TextRenderingMode.FILL&&!S.disableFontFace&&!y.patternFill;q.save(),q.transform(...y.textMatrix),q.translate(y.x,y.y+y.textRise),C>0?q.scale(F,-1):q.scale(F,1);let it;if(y.patternFill){q.save();const yt=y.fillColor.getPattern(q,this,(0,n.getCurrentTransformInverse)(q),h.PathType.FILL);it=(0,n.getCurrentTransform)(q),q.restore(),q.fillStyle=yt}let nt=y.lineWidth;const dt=y.textMatrixScale;if(dt===0||nt===0){const yt=y.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;yt!==r.TextRenderingMode.STROKE&&yt!==r.TextRenderingMode.FILL_STROKE||(nt=this.getSinglePixelWidth())}else nt/=dt;if(Q!==1&&(q.scale(Q,Q),nt/=Q),q.lineWidth=nt,S.isInvalidPDFjsFont){const yt=[];let ft=0;for(const mt of p)yt.push(mt.unicode),ft+=mt.width;q.fillText(yt.join(""),0,0),y.x+=ft*z*F,q.restore(),this.compose();return}let ut,vt=0;for(ut=0;ut<E;++ut){const yt=p[ut];if(typeof yt=="number"){vt+=U*yt*N/1e3;continue}let ft=!1;const mt=(yt.isSpace?L:0)+W,Mt=yt.fontChar,At=yt.accent;let Pt,Ft,Lt=yt.width;if(B){const Nt=yt.vmetric||D,Bt=-(yt.vmetric?Nt[1]:.5*Lt)*z,ee=Nt[2]*z;Lt=Nt?-Nt[0]:Lt,Pt=Bt/Q,Ft=(vt+ee)/Q}else Pt=vt/Q,Ft=0;if(S.remeasure&&Lt>0){const Nt=1e3*q.measureText(Mt).width/N*Q;if(Lt<Nt&&this.isFontSubpixelAAEnabled){const Bt=Lt/Nt;ft=!0,q.save(),q.scale(Bt,1),Pt/=Bt}else Lt!==Nt&&(Pt+=(Lt-Nt)/2e3*N/Q)}if(this.contentVisible&&(yt.isInFont||S.missingFile)){if(Y&&!At)q.fillText(Mt,Pt,Ft);else if(this.paintChar(Mt,Pt,Ft,it),At){const Nt=Pt+N*At.offset.x/Q,Bt=Ft-N*At.offset.y/Q;this.paintChar(At.fontChar,Nt,Bt,it)}}vt+=B?Lt*z-mt*C:Lt*z+mt*C,ft&&q.restore()}B?y.y-=vt:y.x+=vt*F,q.restore(),this.compose()}showType3Text(p){const y=this.ctx,S=this.current,N=S.font,q=S.fontSize,Q=S.fontDirection,W=N.vertical?1:-1,L=S.charSpacing,C=S.wordSpacing,F=S.textHScale*Q,E=S.fontMatrix||r.FONT_IDENTITY_MATRIX,B=p.length;let U,D,z,Y;if(S.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&q!==0){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,y.save(),y.transform(...S.textMatrix),y.translate(S.x,S.y),y.scale(F,Q),U=0;U<B;++U){if(D=p[U],typeof D=="number"){Y=W*D*q/1e3,this.ctx.translate(Y,0),S.x+=Y*F;continue}const it=(D.isSpace?C:0)+L,nt=N.charProcOperatorList[D.operatorListId];if(!nt){(0,r.warn)(`Type3 character "${D.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=D,this.save(),y.scale(q,q),y.transform(...E),this.executeOperatorList(nt),this.restore()),z=r.Util.applyTransform([D.width,0],E)[0]*q+it,y.translate(z,0),S.x+=z*F}y.restore(),this.processingType3=null}}setCharWidth(p,y){}setCharWidthAndBounds(p,y,S,N,q,Q){this.ctx.rect(S,N,q-S,Q-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(p){let y;if(p[0]==="TilingPattern"){const S=p[1],N=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),q={createCanvasGraphics:Q=>new V(Q,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};y=new h.TilingPattern(p,S,this.ctx,q,N)}else y=this._getPattern(p[1],p[2]);return y}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(p,y,S){const N=r.Util.makeHexColor(p,y,S);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(p,y,S){const N=r.Util.makeHexColor(p,y,S);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(p){let y,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this.cachedPatterns.has(p)?y=this.cachedPatterns.get(p):(y=(0,h.getShadingPattern)(this.getObject(p)),this.cachedPatterns.set(p,y)),S&&(y.matrix=S),y}shadingFill(p){if(!this.contentVisible)return;const y=this.ctx;this.save();const S=this._getPattern(p);y.fillStyle=S.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),h.PathType.SHADING);const N=(0,n.getCurrentTransformInverse)(y);if(N){const{width:q,height:Q}=y.canvas,[W,L,C,F]=r.Util.getAxialAlignedBoundingBox([0,0,q,Q],N);this.ctx.fillRect(W,L,C-W,F-L)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(p,y){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(p)&&p.length===6&&this.transform(...p),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),y)){const S=y[2]-y[0],N=y[3]-y[1];this.ctx.rect(y[0],y[1],S,N),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),y),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(p){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const y=this.ctx;p.isolated||(0,r.info)("TODO: Support non-isolated groups."),p.knockout&&(0,r.warn)("Knockout groups not supported.");const S=(0,n.getCurrentTransform)(y);if(p.matrix&&y.transform(...p.matrix),!p.bbox)throw new Error("Bounding box is required.");let N=r.Util.getAxialAlignedBoundingBox(p.bbox,(0,n.getCurrentTransform)(y));const q=[0,0,y.canvas.width,y.canvas.height];N=r.Util.intersect(N,q)||[0,0,0,0];const Q=Math.floor(N[0]),W=Math.floor(N[1]);let L=Math.max(Math.ceil(N[2])-Q,1),C=Math.max(Math.ceil(N[3])-W,1),F=1,E=1;L>b&&(F=L/b,L=b),C>b&&(E=C/b,C=b),this.current.startNewPathAndClipBox([0,0,L,C]);let B="groupAt"+this.groupLevel;p.smask&&(B+="_smask_"+this.smaskCounter++%2);const U=this.cachedCanvases.getCanvas(B,L,C),D=U.context;D.scale(1/F,1/E),D.translate(-Q,-W),D.transform(...S),p.smask?this.smaskStack.push({canvas:U.canvas,context:D,offsetX:Q,offsetY:W,scaleX:F,scaleY:E,subtype:p.smask.subtype,backdrop:p.smask.backdrop,transferMap:p.smask.transferMap||null,startTransformInverse:null}):(y.setTransform(1,0,0,1,0,0),y.translate(Q,W),y.scale(F,E),y.save()),_(y,D),this.ctx=D,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(y),this.groupLevel++}endGroup(p){if(!this.contentVisible)return;this.groupLevel--;const y=this.ctx,S=this.groupStack.pop();if(this.ctx=S,this.ctx.imageSmoothingEnabled=!1,p.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const N=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);const q=r.Util.getAxialAlignedBoundingBox([0,0,y.canvas.width,y.canvas.height],N);this.ctx.drawImage(y.canvas,0,0),this.ctx.restore(),this.compose(q)}}beginAnnotation(p,y,S,N,q){if(Z(this,K,Je).call(this),P(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(y)&&y.length===4){const Q=y[2]-y[0],W=y[3]-y[1];if(q&&this.annotationCanvasMap){(S=S.slice())[4]-=y[0],S[5]-=y[1],(y=y.slice())[0]=y[1]=0,y[2]=Q,y[3]=W;const[L,C]=r.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:F}=this,E=Math.ceil(Q*this.outputScaleX*F),B=Math.ceil(W*this.outputScaleY*F);this.annotationCanvas=this.canvasFactory.create(E,B);const{canvas:U,context:D}=this.annotationCanvas;this.annotationCanvasMap.set(p,U),this.annotationCanvas.savedCtx=this.ctx,this.ctx=D,this.ctx.save(),this.ctx.setTransform(L,0,0,-C,0,W*C),P(this.ctx)}else P(this.ctx),this.ctx.rect(y[0],y[1],Q,W),this.ctx.clip(),this.endPath()}this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...S),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Z(this,et,Qe).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(p){if(!this.contentVisible)return;const y=p.count;(p=this.getObject(p.data,p)).count=y;const S=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=function(L){const{width:C,height:F}=L;if(C>1e3||F>1e3)return null;const E=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),B=C+1;let U,D,z,Y=new Uint8Array(B*(F+1));const it=C+7&-8;let nt=new Uint8Array(it*F),dt=0;for(const ft of L.data){let mt=128;for(;mt>0;)nt[dt++]=ft&mt?0:255,mt>>=1}let ut=0;for(dt=0,nt[dt]!==0&&(Y[0]=1,++ut),D=1;D<C;D++)nt[dt]!==nt[dt+1]&&(Y[D]=nt[dt]?2:1,++ut),dt++;for(nt[dt]!==0&&(Y[D]=2,++ut),U=1;U<F;U++){dt=U*it,z=U*B,nt[dt-it]!==nt[dt]&&(Y[z]=nt[dt]?1:8,++ut);let ft=(nt[dt]?4:0)+(nt[dt-it]?8:0);for(D=1;D<C;D++)ft=(ft>>2)+(nt[dt+1]?4:0)+(nt[dt-it+1]?8:0),E[ft]&&(Y[z+D]=E[ft],++ut),dt++;if(nt[dt-it]!==nt[dt]&&(Y[z+D]=nt[dt]?2:4,++ut),ut>1e3)return null}for(dt=it*(F-1),z=U*B,nt[dt]!==0&&(Y[z]=8,++ut),D=1;D<C;D++)nt[dt]!==nt[dt+1]&&(Y[z+D]=nt[dt]?4:8,++ut),dt++;if(nt[dt]!==0&&(Y[z+D]=4,++ut),ut>1e3)return null;const vt=new Int32Array([0,B,-1,0,-B,0,0,0,1]),yt=new Path2D;for(U=0;ut&&U<=F;U++){let ft=U*B;const mt=ft+C;for(;ft<mt&&!Y[ft];)ft++;if(ft===mt)continue;yt.moveTo(ft%B,U);const Mt=ft;let At=Y[ft];do{const Pt=vt[At];do ft+=Pt;while(!Y[ft]);const Ft=Y[ft];Ft!==5&&Ft!==10?(At=Ft,Y[ft]=0):(At=Ft&51*At>>4,Y[ft]&=At>>2|At<<2),yt.lineTo(ft%B,ft/B|0),Y[ft]||--ut}while(Mt!==ft);--U}return nt=null,Y=null,function(ft){ft.save(),ft.scale(1/C,-1/F),ft.translate(0,-F),ft.fill(yt),ft.beginPath(),ft.restore()}}(p)),N.compiled)){N.compiled(S);return}const q=this._createMaskCanvas(p),Q=q.canvas;S.save(),S.setTransform(1,0,0,1,0,0),S.drawImage(Q,q.offsetX,q.offsetY),S.restore(),this.compose()}paintImageMaskXObjectRepeat(p,y){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,q=arguments.length>4?arguments[4]:void 0,Q=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;p=this.getObject(p.data,p);const W=this.ctx;W.save();const L=(0,n.getCurrentTransform)(W);W.transform(y,S,N,q,0,0);const C=this._createMaskCanvas(p);W.setTransform(1,0,0,1,C.offsetX-L[4],C.offsetY-L[5]);for(let F=0,E=Q.length;F<E;F+=2){const B=r.Util.transform(L,[y,S,N,q,Q[F],Q[F+1]]),[U,D]=r.Util.applyTransform([0,0],B);W.drawImage(C.canvas,U,D)}W.restore(),this.compose()}paintImageMaskXObjectGroup(p){if(!this.contentVisible)return;const y=this.ctx,S=this.current.fillColor,N=this.current.patternFill;for(const q of p){const{data:Q,width:W,height:L,transform:C}=q,F=this.cachedCanvases.getCanvas("maskCanvas",W,L),E=F.context;E.save(),v(E,this.getObject(Q,q)),E.globalCompositeOperation="source-in",E.fillStyle=N?S.getPattern(E,this,(0,n.getCurrentTransformInverse)(y),h.PathType.FILL):S,E.fillRect(0,0,W,L),E.restore(),y.save(),y.transform(...C),y.scale(1,-1),u(y,F.canvas,0,0,W,L,0,-1,1,1),y.restore()}this.compose()}paintImageXObject(p){if(!this.contentVisible)return;const y=this.getObject(p);y?this.paintInlineImageXObject(y):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(p,y,S,N){if(!this.contentVisible)return;const q=this.getObject(p);if(!q){(0,r.warn)("Dependent image isn't ready yet");return}const Q=q.width,W=q.height,L=[];for(let C=0,F=N.length;C<F;C+=2)L.push({transform:[y,0,0,S,N[C],N[C+1]],x:0,y:0,w:Q,h:W});this.paintInlineImageXObjectGroup(q,L)}applyTransferMapsToCanvas(p){return this.current.transferMaps!=="none"&&(p.filter=this.current.transferMaps,p.drawImage(p.canvas,0,0),p.filter="none"),p.canvas}applyTransferMapsToBitmap(p){if(this.current.transferMaps==="none")return p.bitmap;const{bitmap:y,width:S,height:N}=p,q=this.cachedCanvases.getCanvas("inlineImage",S,N),Q=q.context;return Q.filter=this.current.transferMaps,Q.drawImage(y,0,0),Q.filter="none",q.canvas}paintInlineImageXObject(p){if(!this.contentVisible)return;const y=p.width,S=p.height,N=this.ctx;if(this.save(),!r.isNodeJS){const{filter:W}=N;W!=="none"&&W!==""&&(N.filter="none")}N.scale(1/y,-1/S);let q;if(p.bitmap)q=this.applyTransferMapsToBitmap(p);else if(typeof HTMLElement=="function"&&p instanceof HTMLElement||!p.data)q=p;else{const W=this.cachedCanvases.getCanvas("inlineImage",y,S).context;A(W,p),q=this.applyTransferMapsToCanvas(W)}const Q=this._scaleImage(q,(0,n.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=e((0,n.getCurrentTransform)(N),p.interpolate),u(N,Q.img,0,0,Q.paintWidth,Q.paintHeight,0,-S,y,S),this.compose(),this.restore()}paintInlineImageXObjectGroup(p,y){if(!this.contentVisible)return;const S=this.ctx;let N;if(p.bitmap)N=p.bitmap;else{const q=p.width,Q=p.height,W=this.cachedCanvases.getCanvas("inlineImage",q,Q).context;A(W,p),N=this.applyTransferMapsToCanvas(W)}for(const q of y)S.save(),S.transform(...q.transform),S.scale(1,-1),u(S,N,q.x,q.y,q.w,q.h,0,-1,1,1),S.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(p){}markPointProps(p,y){}beginMarkedContent(p){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(p,y){p==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(y)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(p){const y=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(p);const S=this.ctx;this.pendingClip&&(y||(this.pendingClip===O?S.clip("evenodd"):S.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),S.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const p=(0,n.getCurrentTransform)(this.ctx);if(p[1]===0&&p[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(p[0]),Math.abs(p[3]));else{const y=Math.abs(p[0]*p[3]-p[2]*p[1]),S=Math.hypot(p[0],p[2]),N=Math.hypot(p[1],p[3]);this._cachedGetSinglePixelWidth=Math.max(S,N)/y}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:p}=this.current,{a:y,b:S,c:N,d:q}=this.ctx.getTransform();let Q,W;if(S===0&&N===0){const L=Math.abs(y),C=Math.abs(q);if(L===C)if(p===0)Q=W=1/L;else{const F=L*p;Q=W=F<1?1/F:1}else if(p===0)Q=1/L,W=1/C;else{const F=L*p,E=C*p;Q=F<1?1/F:1,W=E<1?1/E:1}}else{const L=Math.abs(y*q-S*N),C=Math.hypot(y,S),F=Math.hypot(N,q);if(p===0)Q=F/L,W=C/L;else{const E=p*L;Q=F>E?F/E:1,W=C>E?C/E:1}}this._cachedScaleForStroking[0]=Q,this._cachedScaleForStroking[1]=W}return this._cachedScaleForStroking}rescaleAndStroke(p){const{ctx:y}=this,{lineWidth:S}=this.current,[N,q]=this.getScaleForStroking();if(y.lineWidth=S||1,N===1&&q===1){y.stroke();return}const Q=y.getLineDash();if(p&&y.save(),y.scale(N,q),Q.length>0){const W=Math.max(N,q);y.setLineDash(Q.map(L=>L/W)),y.lineDashOffset/=W}y.stroke(),p&&y.restore()}isContentVisible(){for(let p=this.markedContentStack.length-1;p>=0;p--)if(!this.markedContentStack[p].visible)return!1;return!0}};K=new WeakSet,Je=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},et=new WeakSet,Qe=function(){if(this.pageColors){const p=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(p!=="none"){const y=this.ctx.filter;this.ctx.filter=p,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=y}}};let R=V;l.CanvasGraphics=R;for(const H in r.OPS)R.prototype[H]!==void 0&&(R.prototype[r.OPS[H]]=R.prototype[H])},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=function(T){switch(T[0]){case"RadialAxial":return new d(T);case"Mesh":return new g(T);case"Dummy":return new A}throw new Error(`Unknown IR type: ${T[0]}`)},t(2);var r=t(1),n=t(168);const h={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};l.PathType=h;function m(I,T){if(!T)return;const M=T[2]-T[0],i=T[3]-T[1],e=new Path2D;e.rect(T[0],T[1],M,i),I.clip(e)}class b{constructor(){this.constructor===b&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class d extends b{constructor(T){super(),this._type=T[1],this._bbox=T[2],this._colorStops=T[3],this._p0=T[4],this._p1=T[5],this._r0=T[6],this._r1=T[7],this.matrix=null}_createGradient(T){let M;this._type==="axial"?M=T.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(M=T.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)M.addColorStop(i[0],i[1]);return M}getPattern(T,M,i,e){let s;if(e===h.STROKE||e===h.FILL){const c=M.current.getClippedPathBoundingBox(e,(0,n.getCurrentTransform)(T))||[0,0,0,0],f=Math.ceil(c[2]-c[0])||1,O=Math.ceil(c[3]-c[1])||1,R=M.cachedCanvases.getCanvas("pattern",f,O,!0),K=R.context;K.clearRect(0,0,K.canvas.width,K.canvas.height),K.beginPath(),K.rect(0,0,K.canvas.width,K.canvas.height),K.translate(-c[0],-c[1]),i=r.Util.transform(i,[1,0,0,1,c[0],c[1]]),K.transform(...M.baseTransform),this.matrix&&K.transform(...this.matrix),m(K,this._bbox),K.fillStyle=this._createGradient(K),K.fill(),s=T.createPattern(R.canvas,"no-repeat");const X=new DOMMatrix(i);s.setTransform(X)}else m(T,this._bbox),s=this._createGradient(T);return s}}function o(I,T,M,i,e,s,c,f){const O=T.coords,R=T.colors,K=I.data,X=4*I.width;let et;O[M+1]>O[i+1]&&(et=M,M=i,i=et,et=s,s=c,c=et),O[i+1]>O[e+1]&&(et=i,i=e,e=et,et=c,c=f,f=et),O[M+1]>O[i+1]&&(et=M,M=i,i=et,et=s,s=c,c=et);const lt=(O[M]+T.offsetX)*T.scaleX,V=(O[M+1]+T.offsetY)*T.scaleY,H=(O[i]+T.offsetX)*T.scaleX,p=(O[i+1]+T.offsetY)*T.scaleY,y=(O[e]+T.offsetX)*T.scaleX,S=(O[e+1]+T.offsetY)*T.scaleY;if(V>=S)return;const N=R[s],q=R[s+1],Q=R[s+2],W=R[c],L=R[c+1],C=R[c+2],F=R[f],E=R[f+1],B=R[f+2],U=Math.round(V),D=Math.round(S);let z,Y,it,nt,dt,ut,vt,yt;for(let ft=U;ft<=D;ft++){if(ft<p){const Ft=ft<V?0:(V-ft)/(V-p);z=lt-(lt-H)*Ft,Y=N-(N-W)*Ft,it=q-(q-L)*Ft,nt=Q-(Q-C)*Ft}else{let Ft;Ft=ft>S?1:p===S?0:(p-ft)/(p-S),z=H-(H-y)*Ft,Y=W-(W-F)*Ft,it=L-(L-E)*Ft,nt=C-(C-B)*Ft}let mt;mt=ft<V?0:ft>S?1:(V-ft)/(V-S),dt=lt-(lt-y)*mt,ut=N-(N-F)*mt,vt=q-(q-E)*mt,yt=Q-(Q-B)*mt;const Mt=Math.round(Math.min(z,dt)),At=Math.round(Math.max(z,dt));let Pt=X*ft+4*Mt;for(let Ft=Mt;Ft<=At;Ft++)mt=(z-Ft)/(z-dt),mt<0?mt=0:mt>1&&(mt=1),K[Pt++]=Y-(Y-ut)*mt|0,K[Pt++]=it-(it-vt)*mt|0,K[Pt++]=nt-(nt-yt)*mt|0,K[Pt++]=255}}function u(I,T,M){const i=T.coords,e=T.colors;let s,c;switch(T.type){case"lattice":const f=T.verticesPerRow,O=Math.floor(i.length/f)-1,R=f-1;for(s=0;s<O;s++){let K=s*f;for(let X=0;X<R;X++,K++)o(I,M,i[K],i[K+1],i[K+f],e[K],e[K+1],e[K+f]),o(I,M,i[K+f+1],i[K+1],i[K+f],e[K+f+1],e[K+1],e[K+f])}break;case"triangles":for(s=0,c=i.length;s<c;s+=3)o(I,M,i[s],i[s+1],i[s+2],e[s],e[s+1],e[s+2]);break;default:throw new Error("illegal figure")}}class g extends b{constructor(T){super(),this._coords=T[2],this._colors=T[3],this._figures=T[4],this._bounds=T[5],this._bbox=T[7],this._background=T[8],this.matrix=null}_createMeshCanvas(T,M,i){const e=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-e,f=Math.ceil(this._bounds[3])-s,O=Math.min(Math.ceil(Math.abs(c*T[0]*1.1)),3e3),R=Math.min(Math.ceil(Math.abs(f*T[1]*1.1)),3e3),K=c/O,X=f/R,et={coords:this._coords,colors:this._colors,offsetX:-e,offsetY:-s,scaleX:1/K,scaleY:1/X},lt=O+4,V=R+4,H=i.getCanvas("mesh",lt,V,!1),p=H.context,y=p.createImageData(O,R);if(M){const S=y.data;for(let N=0,q=S.length;N<q;N+=4)S[N]=M[0],S[N+1]=M[1],S[N+2]=M[2],S[N+3]=255}for(const S of this._figures)u(y,S,et);return p.putImageData(y,2,2),{canvas:H.canvas,offsetX:e-2*K,offsetY:s-2*X,scaleX:K,scaleY:X}}getPattern(T,M,i,e){m(T,this._bbox);let s;if(e===h.SHADING)s=r.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(T));else if(s=r.Util.singularValueDecompose2dScale(M.baseTransform),this.matrix){const f=r.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*f[0],s[1]*f[1]]}const c=this._createMeshCanvas(s,e===h.SHADING?null:this._background,M.cachedCanvases);return e!==h.SHADING&&(T.setTransform(...M.baseTransform),this.matrix&&T.transform(...this.matrix)),T.translate(c.offsetX,c.offsetY),T.scale(c.scaleX,c.scaleY),T.createPattern(c.canvas,"no-repeat")}}class A extends b{getPattern(){return"hotpink"}}const v=1,_=2;class P{static MAX_PATTERN_SIZE=3e3;constructor(T,M,i,e,s){this.operatorList=T[2],this.matrix=T[3]||[1,0,0,1,0,0],this.bbox=T[4],this.xstep=T[5],this.ystep=T[6],this.paintType=T[7],this.tilingType=T[8],this.color=M,this.ctx=i,this.canvasGraphicsFactory=e,this.baseTransform=s}createPatternCanvas(T){const M=this.operatorList,i=this.bbox,e=this.xstep,s=this.ystep,c=this.paintType,f=this.tilingType,O=this.color,R=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+f);const K=i[0],X=i[1],et=i[2],lt=i[3],V=r.Util.singularValueDecompose2dScale(this.matrix),H=r.Util.singularValueDecompose2dScale(this.baseTransform),p=[V[0]*H[0],V[1]*H[1]],y=this.getSizeAndScale(e,this.ctx.canvas.width,p[0]),S=this.getSizeAndScale(s,this.ctx.canvas.height,p[1]),N=T.cachedCanvases.getCanvas("pattern",y.size,S.size,!0),q=N.context,Q=R.createCanvasGraphics(q);Q.groupLevel=T.groupLevel,this.setFillAndStrokeStyleToContext(Q,c,O);let W=K,L=X,C=et,F=lt;return K<0&&(W=0,C+=Math.abs(K)),X<0&&(L=0,F+=Math.abs(X)),q.translate(-y.scale*W,-S.scale*L),Q.transform(y.scale,0,0,S.scale,0,0),q.save(),this.clipBbox(Q,W,L,C,F),Q.baseTransform=(0,n.getCurrentTransform)(Q.ctx),Q.executeOperatorList(M),Q.endDrawing(),{canvas:N.canvas,scaleX:y.scale,scaleY:S.scale,offsetX:W,offsetY:L}}getSizeAndScale(T,M,i){T=Math.abs(T);const e=Math.max(P.MAX_PATTERN_SIZE,M);let s=Math.ceil(T*i);return s>=e?s=e:i=s/T,{scale:i,size:s}}clipBbox(T,M,i,e,s){const c=e-M,f=s-i;T.ctx.rect(M,i,c,f),T.current.updateRectMinMax((0,n.getCurrentTransform)(T.ctx),[M,i,e,s]),T.clip(),T.endPath()}setFillAndStrokeStyleToContext(T,M,i){const e=T.ctx,s=T.current;switch(M){case v:const c=this.ctx;e.fillStyle=c.fillStyle,e.strokeStyle=c.strokeStyle,s.fillColor=c.fillStyle,s.strokeColor=c.strokeStyle;break;case _:const f=r.Util.makeHexColor(i[0],i[1],i[2]);e.fillStyle=f,e.strokeStyle=f,s.fillColor=f,s.strokeColor=f;break;default:throw new r.FormatError(`Unsupported paint type: ${M}`)}}getPattern(T,M,i,e){let s=i;e!==h.SHADING&&(s=r.Util.transform(s,M.baseTransform),this.matrix&&(s=r.Util.transform(s,this.matrix)));const c=this.createPatternCanvas(M);let f=new DOMMatrix(s);f=f.translate(c.offsetX,c.offsetY),f=f.scale(1/c.scaleX,1/c.scaleY);const O=T.createPattern(c.canvas,"repeat");return O.setTransform(f),O}}l.TilingPattern=P},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.convertBlackAndWhiteToRGBA=n,l.convertToRGBA=function(m){switch(m.kind){case r.ImageKind.GRAYSCALE_1BPP:return n(m);case r.ImageKind.RGB_24BPP:return function(d){let{src:o,srcPos:u=0,dest:g,destPos:A=0,width:v,height:_}=d,P=0;const I=o.length>>2,T=new Uint32Array(o.buffer,u,I);if(r.FeatureTest.isLittleEndian){for(;P<I-2;P+=3,A+=4){const M=T[P],i=T[P+1],e=T[P+2];g[A]=4278190080|M,g[A+1]=M>>>24|i<<8|4278190080,g[A+2]=i>>>16|e<<16|4278190080,g[A+3]=e>>>8|4278190080}for(let M=4*P,i=o.length;M<i;M+=3)g[A++]=o[M]|o[M+1]<<8|o[M+2]<<16|4278190080}else{for(;P<I-2;P+=3,A+=4){const M=T[P],i=T[P+1],e=T[P+2];g[A]=255|M,g[A+1]=M<<24|i>>>8|255,g[A+2]=i<<16|e>>>16|255,g[A+3]=e<<8|255}for(let M=4*P,i=o.length;M<i;M+=3)g[A++]=o[M]<<24|o[M+1]<<16|o[M+2]<<8|255}return{srcPos:u,destPos:A}}(m)}return null},l.grayToRGBA=function(m,b){if(r.FeatureTest.isLittleEndian)for(let d=0,o=m.length;d<o;d++)b[d]=65793*m[d]|4278190080;else for(let d=0,o=m.length;d<o;d++)b[d]=16843008*m[d]|255},t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var r=t(1);function n(h){let{src:m,srcPos:b=0,dest:d,width:o,height:u,nonBlackColor:g=4294967295,inverseDecode:A=!1}=h;const v=r.FeatureTest.isLittleEndian?4278190080:255,[_,P]=A?[g,v]:[v,g],I=o>>3,T=7&o,M=m.length;d=new Uint32Array(d.buffer);let i=0;for(let e=0;e<u;e++){for(const c=b+I;b<c;b++){const f=b<M?m[b]:255;d[i++]=128&f?P:_,d[i++]=64&f?P:_,d[i++]=32&f?P:_,d[i++]=16&f?P:_,d[i++]=8&f?P:_,d[i++]=4&f?P:_,d[i++]=2&f?P:_,d[i++]=1&f?P:_}if(T===0)continue;const s=b<M?m[b++]:255;for(let c=0;c<T;c++)d[i++]=s&1<<7-c?P:_}return{srcPos:b,destPos:i}}},(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;const t=Object.create(null);l.GlobalWorkerOptions=t,t.workerPort=null,t.workerSrc=""},(x,l,t)=>{var P,Tr,T,Pr,i,Te,s;Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0,t(2);var r=t(1);const n=1,h=2,m=1,b=2,d=3,o=4,u=5,g=6,A=7,v=8;function _(c){switch(c instanceof Error||typeof c=="object"&&c!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new r.AbortException(c.message);case"MissingPDFException":return new r.MissingPDFException(c.message);case"PasswordException":return new r.PasswordException(c.message,c.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new r.UnknownErrorException(c.message,c.details);default:return new r.UnknownErrorException(c.message,c.toString())}}l.MessageHandler=(s=class{constructor(f,O,R){$(this,P);$(this,T);$(this,i);this.sourceName=f,this.targetName=O,this.comObj=R,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=K=>{const X=K.data;if(X.targetName!==this.sourceName)return;if(X.stream){Z(this,T,Pr).call(this,X);return}if(X.callback){const lt=X.callbackId,V=this.callbackCapabilities[lt];if(!V)throw new Error(`Cannot resolve callback ${lt}`);if(delete this.callbackCapabilities[lt],X.callback===n)V.resolve(X.data);else{if(X.callback!==h)throw new Error("Unexpected callback case");V.reject(_(X.reason))}return}const et=this.actionHandler[X.action];if(!et)throw new Error(`Unknown action from worker: ${X.action}`);if(X.callbackId){const lt=this.sourceName,V=X.sourceName;new Promise(function(H){H(et(X.data))}).then(function(H){R.postMessage({sourceName:lt,targetName:V,callback:n,callbackId:X.callbackId,data:H})},function(H){R.postMessage({sourceName:lt,targetName:V,callback:h,callbackId:X.callbackId,reason:_(H)})})}else X.streamId?Z(this,P,Tr).call(this,X):et(X.data)},R.addEventListener("message",this._onComObjOnMessage)}on(f,O){const R=this.actionHandler;if(R[f])throw new Error(`There is already an actionName called "${f}"`);R[f]=O}send(f,O,R){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:O},R)}sendWithPromise(f,O,R){const K=this.callbackId++,X=new r.PromiseCapability;this.callbackCapabilities[K]=X;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:K,data:O},R)}catch(et){X.reject(et)}return X.promise}sendWithStream(f,O,R,K){const X=this.streamId++,et=this.sourceName,lt=this.targetName,V=this.comObj;return new ReadableStream({start:H=>{const p=new r.PromiseCapability;return this.streamControllers[X]={controller:H,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},V.postMessage({sourceName:et,targetName:lt,action:f,streamId:X,data:O,desiredSize:H.desiredSize},K),p.promise},pull:H=>{const p=new r.PromiseCapability;return this.streamControllers[X].pullCall=p,V.postMessage({sourceName:et,targetName:lt,stream:g,streamId:X,desiredSize:H.desiredSize}),p.promise},cancel:H=>{(0,r.assert)(H instanceof Error,"cancel must have a valid reason");const p=new r.PromiseCapability;return this.streamControllers[X].cancelCall=p,this.streamControllers[X].isClosed=!0,V.postMessage({sourceName:et,targetName:lt,stream:m,streamId:X,reason:_(H)}),p.promise}},R)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},P=new WeakSet,Tr=function(f){const O=f.streamId,R=this.sourceName,K=f.sourceName,X=this.comObj,et=this,lt=this.actionHandler[f.action],V={enqueue(H){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,y=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const S=this.desiredSize;this.desiredSize-=p,S>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),X.postMessage({sourceName:R,targetName:K,stream:o,streamId:O,chunk:H},y)},close(){this.isCancelled||(this.isCancelled=!0,X.postMessage({sourceName:R,targetName:K,stream:d,streamId:O}),delete et.streamSinks[O])},error(H){(0,r.assert)(H instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,X.postMessage({sourceName:R,targetName:K,stream:u,streamId:O,reason:_(H)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};V.sinkCapability.resolve(),V.ready=V.sinkCapability.promise,this.streamSinks[O]=V,new Promise(function(H){H(lt(f.data,V))}).then(function(){X.postMessage({sourceName:R,targetName:K,stream:v,streamId:O,success:!0})},function(H){X.postMessage({sourceName:R,targetName:K,stream:v,streamId:O,reason:_(H)})})},T=new WeakSet,Pr=function(f){const O=f.streamId,R=this.sourceName,K=f.sourceName,X=this.comObj,et=this.streamControllers[O],lt=this.streamSinks[O];switch(f.stream){case v:f.success?et.startCall.resolve():et.startCall.reject(_(f.reason));break;case A:f.success?et.pullCall.resolve():et.pullCall.reject(_(f.reason));break;case g:if(!lt){X.postMessage({sourceName:R,targetName:K,stream:A,streamId:O,success:!0});break}lt.desiredSize<=0&&f.desiredSize>0&&lt.sinkCapability.resolve(),lt.desiredSize=f.desiredSize,new Promise(function(V){var H;V((H=lt.onPull)==null?void 0:H.call(lt))}).then(function(){X.postMessage({sourceName:R,targetName:K,stream:A,streamId:O,success:!0})},function(V){X.postMessage({sourceName:R,targetName:K,stream:A,streamId:O,reason:_(V)})});break;case o:if((0,r.assert)(et,"enqueue should have stream controller"),et.isClosed)break;et.controller.enqueue(f.chunk);break;case d:if((0,r.assert)(et,"close should have stream controller"),et.isClosed)break;et.isClosed=!0,et.controller.close(),Z(this,i,Te).call(this,et,O);break;case u:(0,r.assert)(et,"error should have stream controller"),et.controller.error(_(f.reason)),Z(this,i,Te).call(this,et,O);break;case b:f.success?et.cancelCall.resolve():et.cancelCall.reject(_(f.reason)),Z(this,i,Te).call(this,et,O);break;case m:if(!lt)break;new Promise(function(V){var H;V((H=lt.onCancel)==null?void 0:H.call(lt,_(f.reason)))}).then(function(){X.postMessage({sourceName:R,targetName:K,stream:b,streamId:O,success:!0})},function(V){X.postMessage({sourceName:R,targetName:K,stream:b,streamId:O,reason:_(V)})}),lt.sinkCapability.reject(_(f.reason)),lt.isCancelled=!0,delete this.streamSinks[O];break;default:throw new Error("Unexpected stream case")}},i=new WeakSet,Te=async function(f,O){var R,K,X;await Promise.allSettled([(R=f.startCall)==null?void 0:R.promise,(K=f.pullCall)==null?void 0:K.promise,(X=f.cancelCall)==null?void 0:X.promise]),delete this.streamControllers[O]},s)},(x,l,t)=>{var n,h,m;Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var r=t(1);l.Metadata=(m=class{constructor(d){$(this,n,void 0);$(this,h,void 0);let{parsedData:o,rawData:u}=d;st(this,n,o),st(this,h,u)}getRaw(){return a(this,h)}get(d){var o;return(o=a(this,n).get(d))!=null?o:null}getAll(){return(0,r.objectFromMap)(a(this,n))}has(d){return a(this,n).has(d)}},n=new WeakMap,h=new WeakMap,m)},(x,l,t)=>{var b,d,o,u,g,A,Ze,_;Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var r=t(1),n=t(170);const h=Symbol("INTERNAL");class m{constructor(I,T){$(this,b,!0);this.name=I,this.intent=T}get visible(){return a(this,b)}_setVisible(I,T){I!==h&&(0,r.unreachable)("Internal method `_setVisible` called."),st(this,b,T)}}b=new WeakMap,l.OptionalContentConfig=(_=class{constructor(I){$(this,A);$(this,d,null);$(this,o,new Map);$(this,u,null);$(this,g,null);if(this.name=null,this.creator=null,I!==null){this.name=I.name,this.creator=I.creator,st(this,g,I.order);for(const T of I.groups)a(this,o).set(T.id,new m(T.name,T.intent));if(I.baseState==="OFF")for(const T of a(this,o).values())T._setVisible(h,!1);for(const T of I.on)a(this,o).get(T)._setVisible(h,!0);for(const T of I.off)a(this,o).get(T)._setVisible(h,!1);st(this,u,this.getHash())}}isVisible(I){if(a(this,o).size===0)return!0;if(!I)return(0,r.warn)("Optional content group not defined."),!0;if(I.type==="OCG")return a(this,o).has(I.id)?a(this,o).get(I.id).visible:((0,r.warn)(`Optional content group not found: ${I.id}`),!0);if(I.type==="OCMD"){if(I.expression)return Z(this,A,Ze).call(this,I.expression);if(!I.policy||I.policy==="AnyOn"){for(const T of I.ids){if(!a(this,o).has(T))return(0,r.warn)(`Optional content group not found: ${T}`),!0;if(a(this,o).get(T).visible)return!0}return!1}if(I.policy==="AllOn"){for(const T of I.ids){if(!a(this,o).has(T))return(0,r.warn)(`Optional content group not found: ${T}`),!0;if(!a(this,o).get(T).visible)return!1}return!0}if(I.policy==="AnyOff"){for(const T of I.ids){if(!a(this,o).has(T))return(0,r.warn)(`Optional content group not found: ${T}`),!0;if(!a(this,o).get(T).visible)return!0}return!1}if(I.policy==="AllOff"){for(const T of I.ids){if(!a(this,o).has(T))return(0,r.warn)(`Optional content group not found: ${T}`),!0;if(a(this,o).get(T).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${I.policy}.`),!0}return(0,r.warn)(`Unknown group type ${I.type}.`),!0}setVisibility(I){let T=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];a(this,o).has(I)?(a(this,o).get(I)._setVisible(h,!!T),st(this,d,null)):(0,r.warn)(`Optional content group not found: ${I}`)}get hasInitialVisibility(){return a(this,u)===null||this.getHash()===a(this,u)}getOrder(){return a(this,o).size?a(this,g)?a(this,g).slice():[...a(this,o).keys()]:null}getGroups(){return a(this,o).size>0?(0,r.objectFromMap)(a(this,o)):null}getGroup(I){return a(this,o).get(I)||null}getHash(){if(a(this,d)!==null)return a(this,d);const I=new n.MurmurHash3_64;for(const[T,M]of a(this,o))I.update(`${T}:${M.visible}`);return st(this,d,I.hexdigest())}},d=new WeakMap,o=new WeakMap,u=new WeakMap,g=new WeakMap,A=new WeakSet,Ze=function(I){const T=I.length;if(T<2)return!0;const M=I[0];for(let i=1;i<T;i++){const e=I[i];let s;if(Array.isArray(e))s=Z(this,A,Ze).call(this,e);else{if(!a(this,o).has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;s=a(this,o).get(e).visible}switch(M){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return M==="And"},_)},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var r=t(1),n=t(168);l.PDFDataTransportStream=class{constructor(d,o){let{length:u,initialData:g,progressiveDone:A=!1,contentDispositionFilename:v=null,disableRange:_=!1,disableStream:P=!1}=d;if((0,r.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=v,(g==null?void 0:g.length)>0){const I=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(I)}this._pdfDataRangeTransport=o,this._isStreamingSupported=!P,this._isRangeSupported=!_,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((I,T)=>{this._onReceiveData({begin:I,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((I,T)=>{this._onProgress({loaded:I,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(I=>{this._onReceiveData({chunk:I})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){let{begin:o,chunk:u}=d;const g=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;if(o===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(g):this._queuedChunks.push(g);else{const A=this._rangeReaders.some(function(v){return v._begin!==o?!1:(v._enqueue(g),!0)});(0,r.assert)(A,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d,o;return(o=(d=this._fullRequestReader)==null?void 0:d._loaded)!=null?o:0}_onProgress(d){var o,u,g,A;d.total===void 0?(u=(o=this._rangeReaders[0])==null?void 0:o.onProgress)==null||u.call(o,{loaded:d.loaded}):(A=(g=this._fullRequestReader)==null?void 0:g.onProgress)==null||A.call(g,{loaded:d.loaded,total:d.total})}_onProgressiveDone(){var d;(d=this._fullRequestReader)==null||d.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const o=this._rangeReaders.indexOf(d);o>=0&&this._rangeReaders.splice(o,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new h(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,o){if(o<=this._progressiveDataLength)return null;const u=new m(this,d,o);return this._pdfDataRangeTransport.requestDataRange(d,o),this._rangeReaders.push(u),u}cancelAllRequests(d){var o;(o=this._fullRequestReader)==null||o.cancel(d);for(const u of this._rangeReaders.slice(0))u.cancel(d);this._pdfDataRangeTransport.abort()}};class h{constructor(d,o){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2],g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=d,this._done=u||!1,this._filename=(0,n.isPdfFile)(g)?g:null,this._queuedChunks=o||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new r.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(d,o,u){this._stream=d,this._begin=o,this._end=u,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new r.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var r=t(1),n=t(182);function h(u,g,A){return{method:"GET",headers:u,signal:A.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function m(u){const g=new Headers;for(const A in u){const v=u[A];v!==void 0&&g.append(A,v)}return g}function b(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:((0,r.warn)(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}l.PDFFetchStream=class{constructor(g){this.source=g,this.isHttp=/^https?:/i.test(g.url),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g,A;return(A=(g=this._fullRequestReader)==null?void 0:g._loaded)!=null?A:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(g,A){if(A<=this._progressiveDataLength)return null;const v=new o(this,g,A);return this._rangeRequestReaders.push(v),v}cancelAllRequests(g){var A;(A=this._fullRequestReader)==null||A.cancel(g);for(const v of this._rangeRequestReaders.slice(0))v.cancel(g)}};class d{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const A=g.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=new r.PromiseCapability,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=m(this._stream.httpHeaders);const v=A.url;fetch(v,h(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,n.validateResponseStatus)(_.status))throw(0,n.createResponseStatusError)(_.status,v);this._reader=_.body.getReader(),this._headersCapability.resolve();const P=M=>_.headers.get(M),{allowRangeRequests:I,suggestedLength:T}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=T||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(P),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._headersCapability.promise;const{value:g,done:A}=await this._reader.read();return A?{value:g,done:A}:(this._loaded+=g.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(g),done:!1})}cancel(g){var A;(A=this._reader)==null||A.cancel(g),this._abortController.abort()}}class o{constructor(g,A,v){this._stream=g,this._reader=null,this._loaded=0;const _=g.source;this._withCredentials=_.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=m(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${v-1}`);const P=_.url;fetch(P,h(this._headers,this._withCredentials,this._abortController)).then(I=>{if(!(0,n.validateResponseStatus)(I.status))throw(0,n.createResponseStatusError)(I.status,P);this._readCapability.resolve(),this._reader=I.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._readCapability.promise;const{value:g,done:A}=await this._reader.read();return A?{value:g,done:A}:(this._loaded+=g.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:b(g),done:!1})}cancel(g){var A;(A=this._reader)==null||A.cancel(g),this._abortController.abort()}}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=function(b,d){return b===404||b===0&&d.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+d+'".'):new r.UnexpectedResponseException(`Unexpected server response (${b}) while retrieving PDF "${d}".`,b)},l.extractFilenameFromHeader=function(b){const d=b("Content-Disposition");if(d){let o=(0,n.getFilenameFromContentDispositionHeader)(d);if(o.includes("%"))try{o=decodeURIComponent(o)}catch{}if((0,h.isPdfFile)(o))return o}return null},l.validateRangeRequestCapabilities=function(b){let{getResponseHeader:d,isHttp:o,rangeChunkSize:u,disableRange:g}=b;const A={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(d("Content-Length"),10);return!Number.isInteger(v)||(A.suggestedLength=v,v<=2*u)||g||!o||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A},l.validateResponseStatus=function(b){return b===200||b===206};var r=t(1),n=t(183),h=t(168)},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=function(h){let m=!0,b=d("filename\\*","i").exec(h);if(b){b=b[1];let _=g(b);return _=unescape(_),_=A(_),_=v(_),u(_)}if(b=function(P){const I=[];let T;const M=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=M.exec(P))!==null;){let[,e,s,c]=T;if(e=parseInt(e,10),e in I){if(e===0)break}else I[e]=[s,c]}const i=[];for(let e=0;e<I.length&&e in I;++e){let[s,c]=I[e];c=g(c),s&&(c=unescape(c),e===0&&(c=A(c))),i.push(c)}return i.join("")}(h),b)return u(v(b));if(b=d("filename","i").exec(h),b){b=b[1];let _=g(b);return _=v(_),u(_)}function d(_,P){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',P)}function o(_,P){if(_){if(!/^[\x00-\xFF]+$/.test(P))return P;try{const I=new TextDecoder(_,{fatal:!0}),T=(0,r.stringToBytes)(P);P=I.decode(T),m=!1}catch{}}return P}function u(_){return m&&/[\x80-\xff]/.test(_)&&(_=o("utf-8",_),m&&(_=o("iso-8859-1",_))),_}function g(_){if(_.startsWith('"')){const P=_.slice(1).split('\\"');for(let I=0;I<P.length;++I){const T=P[I].indexOf('"');T!==-1&&(P[I]=P[I].slice(0,T),P.length=I+1),P[I]=P[I].replaceAll(/\\(.)/g,"$1")}_=P.join('"')}return _}function A(_){const P=_.indexOf("'");return P===-1?_:o(_.slice(0,P),_.slice(P+1).replace(/^[^']*'/,""))}function v(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(P,I,T,M){if(T==="q"||T==="Q")return o(I,M=(M=M.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(i,e){return String.fromCharCode(parseInt(e,16))}));try{M=atob(M)}catch{}return o(I,M)})}return""},t(89),t(149);var r=t(1)},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0,t(89);var r=t(1),n=t(182);class h{constructor(o){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=o,this.isHttp=/^https?:/i.test(o),this.httpHeaders=this.isHttp&&u.httpHeaders||Object.create(null),this.withCredentials=u.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(o,u,g){const A={begin:o,end:u};for(const v in g)A[v]=g[v];return this.request(A)}requestFull(o){return this.request(o)}request(o){const u=new XMLHttpRequest,g=this.currXhrId++,A=this.pendingRequests[g]={xhr:u};u.open("GET",this.url),u.withCredentials=this.withCredentials;for(const v in this.httpHeaders){const _=this.httpHeaders[v];_!==void 0&&u.setRequestHeader(v,_)}return this.isHttp&&"begin"in o&&"end"in o?(u.setRequestHeader("Range",`bytes=${o.begin}-${o.end-1}`),A.expectedStatus=206):A.expectedStatus=200,u.responseType="arraybuffer",o.onError&&(u.onerror=function(v){o.onError(u.status)}),u.onreadystatechange=this.onStateChange.bind(this,g),u.onprogress=this.onProgress.bind(this,g),A.onHeadersReceived=o.onHeadersReceived,A.onDone=o.onDone,A.onError=o.onError,A.onProgress=o.onProgress,u.send(null),g}onProgress(o,u){var A;const g=this.pendingRequests[o];g&&((A=g.onProgress)==null||A.call(g,u))}onStateChange(o,u){var P,I,T;const g=this.pendingRequests[o];if(!g)return;const A=g.xhr;if(A.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),A.readyState!==4||!(o in this.pendingRequests))return;if(delete this.pendingRequests[o],A.status===0&&this.isHttp){(P=g.onError)==null||P.call(g,A.status);return}const v=A.status||200;if(!(v===200&&g.expectedStatus===206)&&v!==g.expectedStatus){(I=g.onError)==null||I.call(g,A.status);return}const _=function(i){const e=i.response;return typeof e!="string"?e:(0,r.stringToBytes)(e).buffer}(A);if(v===206){const M=A.getResponseHeader("Content-Range"),i=/bytes (\d+)-(\d+)\/(\d+)/.exec(M);g.onDone({begin:parseInt(i[1],10),chunk:_})}else _?g.onDone({begin:0,chunk:_}):(T=g.onError)==null||T.call(g,A.status)}getRequestXhr(o){return this.pendingRequests[o].xhr}isPendingRequest(o){return o in this.pendingRequests}abortRequest(o){const u=this.pendingRequests[o].xhr;delete this.pendingRequests[o],u.abort()}}l.PDFNetworkStream=class{constructor(o){this._source=o,this._manager=new h(o.url,{httpHeaders:o.httpHeaders,withCredentials:o.withCredentials}),this._rangeChunkSize=o.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(o){const u=this._rangeRequestReaders.indexOf(o);u>=0&&this._rangeRequestReaders.splice(u,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(o,u){const g=new b(this._manager,o,u);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(o){var u;(u=this._fullRequestReader)==null||u.cancel(o);for(const g of this._rangeRequestReaders.slice(0))g.cancel(o)}};class m{constructor(o,u){this._manager=o;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=u.url,this._fullRequestId=o.requestFull(g),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=u.disableRange||!1,this._contentLength=u.length,this._rangeChunkSize=u.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const o=this._fullRequestId,u=this._manager.getRequestXhr(o),g=_=>u.getResponseHeader(_),{allowRangeRequests:A,suggestedLength:v}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});A&&(this._isRangeSupported=!0),this._contentLength=v||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(o),this._headersReceivedCapability.resolve()}_onDone(o){if(o&&(this._requests.length>0?this._requests.shift().resolve({value:o.chunk,done:!1}):this._cachedChunks.push(o.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(o){this._storedError=(0,n.createResponseStatusError)(o,this._url),this._headersReceivedCapability.reject(this._storedError);for(const u of this._requests)u.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(o){var u;(u=this.onProgress)==null||u.call(this,{loaded:o.loaded,total:o.lengthComputable?o.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const o=new r.PromiseCapability;return this._requests.push(o),o.promise}cancel(o){this._done=!0,this._headersReceivedCapability.reject(o);for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(o,u,g){this._manager=o;const A={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=o.url,this._requestId=o.requestRange(u,g,A),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var o;(o=this.onClosed)==null||o.call(this,this)}_onDone(o){const u=o.chunk;this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunk=u,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(o){this._storedError=(0,n.createResponseStatusError)(o,this._url);for(const u of this._requests)u.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(o){var u;this.isStreamingSupported||((u=this.onProgress)==null||u.call(this,{loaded:o.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};const o=new r.PromiseCapability;return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0,t(89),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var r=t(1),n=t(182);const h=/^file:\/\/\/[a-zA-Z]:\//;l.PDFNodeStream=class{constructor(_){this.source=_,this.url=function(I){const T=require("url"),M=T.parse(I);return M.protocol==="file:"||M.host?M:/^[a-z]:[/\\]/i.test(I)?T.parse(`file:///${I}`):(M.host||(M.protocol="file:"),M)}(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _,P;return(P=(_=this._fullRequestReader)==null?void 0:_._loaded)!=null?P:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new o(this),this._fullRequestReader}getRangeReader(_,P){if(P<=this._progressiveDataLength)return null;const I=this.isFsUrl?new A(this,_,P):new u(this,_,P);return this._rangeRequestReaders.push(I),I}cancelAllRequests(_){var P;(P=this._fullRequestReader)==null||P.cancel(_);for(const I of this._rangeRequestReaders.slice(0))I.cancel(_)}};class m{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;const P=_.source;this._contentLength=P.length,this._loaded=0,this._filename=null,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=_.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){this._readableStream?this._readableStream.destroy(_):this._error(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",P=>{this._error(P)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const P=_.source;this._isStreamingSupported=!P.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=_.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){this._readableStream?this._readableStream.destroy(_):this._error(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",P=>{this._error(P)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(v,_){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:_}}class o extends m{constructor(_){super(_);const P=I=>{if(I.statusCode===404){const e=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e,this._headersCapability.reject(e);return}this._headersCapability.resolve(),this._setReadableStream(I);const T=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:M,suggestedLength:i}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=i||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(T)};if(this._request=null,this._url.protocol==="http:"){const I=require("http");this._request=I.request(d(this._url,_.httpHeaders),P)}else{const I=require("https");this._request=I.request(d(this._url,_.httpHeaders),P)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class u extends b{constructor(_,P,I){super(_),this._httpHeaders={};for(const M in _.httpHeaders){const i=_.httpHeaders[M];i!==void 0&&(this._httpHeaders[M]=i)}this._httpHeaders.Range=`bytes=${P}-${I-1}`;const T=M=>{if(M.statusCode!==404)this._setReadableStream(M);else{const i=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i}};if(this._request=null,this._url.protocol==="http:"){const M=require("http");this._request=M.request(d(this._url,this._httpHeaders),T)}else{const M=require("https");this._request=M.request(d(this._url,this._httpHeaders),T)}this._request.on("error",M=>{this._storedError=M}),this._request.end()}}class g extends m{constructor(_){super(_);let P=decodeURIComponent(this._url.path);h.test(this._url.href)&&(P=P.replace(/^\//,""));const I=require("fs");I.lstat(P,(T,M)=>{T?(T.code==="ENOENT"&&(T=new r.MissingPDFException(`Missing PDF "${P}".`)),this._storedError=T,this._headersCapability.reject(T)):(this._contentLength=M.size,this._setReadableStream(I.createReadStream(P)),this._headersCapability.resolve())})}}class A extends b{constructor(_,P,I){super(_);let T=decodeURIComponent(this._url.path);h.test(this._url.href)&&(T=T.replace(/^\//,""));const M=require("fs");this._setReadableStream(M.createReadStream(T,{start:P,end:I-1}))}}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0,t(84),t(86),t(87),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2),t(89),t(187);var r=t(168),n=t(1);const h="normal",m="normal",b="#000000",d=["butt","round","square"],o=["miter","round","bevel"],u=function(M){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(URL.createObjectURL&&typeof Blob<"u"&&!e)return URL.createObjectURL(new Blob([M],{type:i}));const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let c=`data:${i};base64,`;for(let f=0,O=M.length;f<O;f+=3){const R=255&M[f],K=255&M[f+1],X=255&M[f+2];c+=s[R>>2]+s[(3&R)<<4|K>>4]+s[f+1<O?(15&K)<<2|X>>6:64]+s[f+2<O?63&X:64]}return c},g=function(){const M=new Uint8Array([137,80,78,71,13,10,26,10]),i=new Int32Array(256);for(let f=0;f<256;f++){let O=f;for(let R=0;R<8;R++)O=1&O?3988292384^O>>1&2147483647:O>>1&2147483647;i[f]=O}function e(f,O,R,K){let X=K;const et=O.length;R[X]=et>>24&255,R[X+1]=et>>16&255,R[X+2]=et>>8&255,R[X+3]=255&et,X+=4,R[X]=255&f.charCodeAt(0),R[X+1]=255&f.charCodeAt(1),R[X+2]=255&f.charCodeAt(2),R[X+3]=255&f.charCodeAt(3),X+=4,R.set(O,X),X+=O.length;const lt=function(H,p,y){let S=-1;for(let N=p;N<y;N++){const q=255&(S^H[N]);S=S>>>8^i[q]}return-1^S}(R,K+4,X);R[X]=lt>>24&255,R[X+1]=lt>>16&255,R[X+2]=lt>>8&255,R[X+3]=255&lt}function s(f){let O=f.length;const R=65535,K=Math.ceil(O/R),X=new Uint8Array(2+O+5*K+4);let et=0;X[et++]=120,X[et++]=156;let lt=0;for(;O>R;)X[et++]=0,X[et++]=255,X[et++]=255,X[et++]=0,X[et++]=0,X.set(f.subarray(lt,lt+R),et),et+=R,lt+=R,O-=R;X[et++]=1,X[et++]=255&O,X[et++]=O>>8&255,X[et++]=255&~O,X[et++]=(65535&~O)>>8&255,X.set(f.subarray(lt),et),et+=f.length-lt;const V=function(p,y,S){let N=1,q=0;for(let Q=y;Q<S;++Q)N=(N+(255&p[Q]))%65521,q=(q+N)%65521;return q<<16|N}(f,0,f.length);return X[et++]=V>>24&255,X[et++]=V>>16&255,X[et++]=V>>8&255,X[et++]=255&V,X}function c(f,O,R,K){const X=f.width,et=f.height;let lt,V,H;const p=f.data;switch(O){case n.ImageKind.GRAYSCALE_1BPP:V=0,lt=1,H=X+7>>3;break;case n.ImageKind.RGB_24BPP:V=2,lt=8,H=3*X;break;case n.ImageKind.RGBA_32BPP:V=6,lt=8,H=4*X;break;default:throw new Error("invalid format")}const y=new Uint8Array((1+H)*et);let S=0,N=0;for(let F=0;F<et;++F)y[S++]=0,y.set(p.subarray(N,N+H),S),N+=H,S+=H;if(O===n.ImageKind.GRAYSCALE_1BPP&&K){S=0;for(let F=0;F<et;F++){S++;for(let E=0;E<H;E++)y[S++]^=255}}const q=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,255&X,et>>24&255,et>>16&255,et>>8&255,255&et,lt,V,0,0,0]),Q=function(E){if(!n.isNodeJS)return s(E);try{const B=parseInt(process.versions.node)>=8?E:Buffer.from(E),U=require("zlib").deflateSync(B,{level:9});return U instanceof Uint8Array?U:new Uint8Array(U)}catch(B){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+B)}return s(E)}(y),W=M.length+36+q.length+Q.length,L=new Uint8Array(W);let C=0;return L.set(M,C),C+=M.length,e("IHDR",q,L,C),C+=12+q.length,e("IDATA",Q,L,C),C+=12+Q.length,e("IEND",new Uint8Array(0),L,C),u(L,"image/png",R)}return function(O,R,K){return c(O,O.kind===void 0?n.ImageKind.GRAYSCALE_1BPP:O.kind,R,K)}}();class A{constructor(){this.fontSizeScale=1,this.fontWeight=m,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=b,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,e){this.x=i,this.y=e}}function v(M){if(Number.isInteger(M))return M.toString();const i=M.toFixed(10);let e=i.length-1;if(i[e]!=="0")return i;do e--;while(i[e]==="0");return i.substring(0,i[e]==="."?e:e+1)}function _(M){if(M[4]===0&&M[5]===0){if(M[1]===0&&M[2]===0)return M[0]===1&&M[3]===1?"":`scale(${v(M[0])} ${v(M[3])})`;if(M[0]===M[3]&&M[1]===-M[2])return`rotate(${v(180*Math.acos(M[0])/Math.PI)})`}else if(M[0]===1&&M[1]===0&&M[2]===0&&M[3]===1)return`translate(${v(M[4])} ${v(M[5])})`;return`matrix(${v(M[0])} ${v(M[1])} ${v(M[2])} ${v(M[3])} ${v(M[4])} ${v(M[5])})`}let P=0,I=0,T=0;l.SVGGraphics=class{constructor(i,e){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new A,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!s,this._operatorIdMapping=[];for(const c in n.OPS)this._operatorIdMapping[n.OPS[c]]=c}getObject(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):e}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const e=i.fnArray,s=i.argsArray;for(let c=0,f=e.length;c<f;c++)if(e[c]===n.OPS.dependency)for(const O of s[c]){const R=O.startsWith("g_")?this.commonObjs:this.objs,K=new Promise(X=>{R.get(O,X)});this.current.dependencies.push(K)}return Promise.all(this.current.dependencies)}transform(i,e,s,c,f,O){const R=[i,e,s,c,f,O];this.transformMatrix=n.Util.transform(this.transformMatrix,R),this.tgrp=null}getSVG(i,e){this.viewport=e;const s=this._initialize(e);return this.loadDependencies(i).then(()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),s))}convertOpList(i){const e=this._operatorIdMapping,s=i.argsArray,c=i.fnArray,f=[];for(let O=0,R=c.length;O<R;O++){const K=c[O];f.push({fnId:K,fn:e[K],args:s[O]})}return function(R){let K=[];const X=[];for(const et of R)et.fn!=="save"?et.fn==="restore"?K=X.pop():K.push(et):(K.push({fnId:92,fn:"group",items:[]}),X.push(K),K=K.at(-1).items);return K}(f)}executeOpTree(i){for(const e of i){const s=e.fn,c=e.fnId,f=e.args;switch(0|c){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(f);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case n.OPS.setFont:this.setFont(f);break;case n.OPS.showText:case n.OPS.showSpacedText:this.showText(f[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(f[0],f[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case n.OPS.setHScale:this.setHScale(f[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case n.OPS.setTextRise:this.setTextRise(f[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case n.OPS.setLineWidth:this.setLineWidth(f[0]);break;case n.OPS.setLineJoin:this.setLineJoin(f[0]);break;case n.OPS.setLineCap:this.setLineCap(f[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case n.OPS.setFillColorN:this.setFillColorN(f);break;case n.OPS.shadingFill:this.shadingFill(f[0]);break;case n.OPS.setDash:this.setDash(f[0],f[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case n.OPS.setFlatness:this.setFlatness(f[0]);break;case n.OPS.setGState:this.setGState(f[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case n.OPS.constructPath:this.constructPath(f[0],f[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,n.warn)(`Unimplemented operator ${s}`)}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,e,s,c,f,O){const R=this.current;R.textMatrix=R.lineMatrix=[i,e,s,c,f,O],R.textMatrixScale=Math.hypot(i,e),R.x=R.lineX=0,R.y=R.lineY=0,R.xcoords=[],R.ycoords=[],R.tspan=this.svgFactory.createElement("svg:tspan"),R.tspan.setAttributeNS(null,"font-family",R.fontFamily),R.tspan.setAttributeNS(null,"font-size",`${v(R.fontSize)}px`),R.tspan.setAttributeNS(null,"y",v(-R.y)),R.txtElement=this.svgFactory.createElement("svg:text"),R.txtElement.append(R.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=n.IDENTITY_MATRIX,i.lineMatrix=n.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,e){const s=this.current;s.x=s.lineX+=i,s.y=s.lineY+=e,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${v(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",v(-s.y))}showText(i){const e=this.current,s=e.font,c=e.fontSize;if(c===0)return;const f=e.fontSizeScale,O=e.charSpacing,R=e.wordSpacing,K=e.fontDirection,X=e.textHScale*K,et=s.vertical,lt=et?1:-1,V=s.defaultVMetrics,H=c*e.fontMatrix[0];let p=0;for(const N of i){if(N===null){p+=K*R;continue}if(typeof N=="number"){p+=lt*N*c/1e3;continue}const q=(N.isSpace?R:0)+O,Q=N.fontChar;let W,L,C=N.width;if(et){let F;const E=N.vmetric||V;F=N.vmetric?E[1]:.5*C,F=-F*H;const B=E[2]*H;C=E?-E[0]:C,W=F/f,L=(p+B)/f}else W=p/f,L=0;(N.isInFont||s.missingFile)&&(e.xcoords.push(e.x+W),et&&e.ycoords.push(-e.y+L),e.tspan.textContent+=Q),p+=et?C*H-q*K:C*H+q*K}e.tspan.setAttributeNS(null,"x",e.xcoords.map(v).join(" ")),et?e.tspan.setAttributeNS(null,"y",e.ycoords.map(v).join(" ")):e.tspan.setAttributeNS(null,"y",v(-e.y)),et?e.y-=p:e.x+=p*X,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${v(e.fontSize)}px`),e.fontStyle!==h&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==m&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const y=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(y===n.TextRenderingMode.FILL||y===n.TextRenderingMode.FILL_STROKE?(e.fillColor!==b&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),y===n.TextRenderingMode.STROKE||y===n.TextRenderingMode.FILL_STROKE){const N=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,N)}let S=e.textMatrix;e.textRise!==0&&(S=S.slice(),S[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${_(S)} scale(${v(X)}, -1)`),e.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(i,e){this.setLeading(-e),this.moveText(i,e)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=u(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${e}); }
`}setFont(i){const e=this.current,s=this.commonObjs.get(i[0]);let c=i[1];e.font=s,this.embedFonts&&!s.missingFile&&!this.embeddedFonts[s.loadedName]&&(this.addFontStyle(s),this.embeddedFonts[s.loadedName]=s),e.fontMatrix=s.fontMatrix||n.FONT_IDENTITY_MATRIX;let f="normal";s.black?f="900":s.bold&&(f="bold");const O=s.italic?"italic":"normal";c<0?(c=-c,e.fontDirection=-1):e.fontDirection=1,e.fontSize=c,e.fontFamily=s.loadedName,e.fontWeight=f,e.fontStyle=O,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",v(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var e;const i=this.current;i.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&((e=i.txtElement)!=null&&e.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=d[i]}setLineJoin(i){this.current.lineJoin=o[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,e,s){this.current.strokeColor=n.Util.makeHexColor(i,e,s)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,e,s){this.current.fillColor=n.Util.makeHexColor(i,e,s),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const{width:e,height:s}=this.viewport,c=n.Util.inverseTransform(this.transformMatrix),[f,O,R,K]=n.Util.getAxialAlignedBoundingBox([0,0,e,s],c),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",f),X.setAttributeNS(null,"y",O),X.setAttributeNS(null,"width",R-f),X.setAttributeNS(null,"height",K-O),X.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(X)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const e=i[1],s=i[2],c=i[3]||n.IDENTITY_MATRIX,[f,O,R,K]=i[4],X=i[5],et=i[6],lt=i[7],V="shading"+T++,[H,p,y,S]=n.Util.normalizeRect([...n.Util.applyTransform([f,O],c),...n.Util.applyTransform([R,K],c)]),[N,q]=n.Util.singularValueDecompose2dScale(c),Q=X*N,W=et*q,L=this.svgFactory.createElement("svg:pattern");L.setAttributeNS(null,"id",V),L.setAttributeNS(null,"patternUnits","userSpaceOnUse"),L.setAttributeNS(null,"width",Q),L.setAttributeNS(null,"height",W),L.setAttributeNS(null,"x",`${H}`),L.setAttributeNS(null,"y",`${p}`);const C=this.svg,F=this.transformMatrix,E=this.current.fillColor,B=this.current.strokeColor,U=this.svgFactory.create(y-H,S-p);if(this.svg=U,this.transformMatrix=c,lt===2){const D=n.Util.makeHexColor(...e);this.current.fillColor=D,this.current.strokeColor=D}return this.executeOpTree(this.convertOpList(s)),this.svg=C,this.transformMatrix=F,this.current.fillColor=E,this.current.strokeColor=B,L.append(U.childNodes[0]),this.defs.append(L),`url(#${V})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const e="shading"+T++,s=i[3];let c;switch(i[1]){case"axial":const f=i[4],O=i[5];c=this.svgFactory.createElement("svg:linearGradient"),c.setAttributeNS(null,"id",e),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"x1",f[0]),c.setAttributeNS(null,"y1",f[1]),c.setAttributeNS(null,"x2",O[0]),c.setAttributeNS(null,"y2",O[1]);break;case"radial":const R=i[4],K=i[5],X=i[6],et=i[7];c=this.svgFactory.createElement("svg:radialGradient"),c.setAttributeNS(null,"id",e),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"cx",K[0]),c.setAttributeNS(null,"cy",K[1]),c.setAttributeNS(null,"r",et),c.setAttributeNS(null,"fx",R[0]),c.setAttributeNS(null,"fy",R[1]),c.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const f of s){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",f[0]),O.setAttributeNS(null,"stop-color",f[1]),c.append(O)}return this.defs.append(c),`url(#${e})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,e){this.current.dashArray=i,this.current.dashPhase=e}constructPath(i,e){const s=this.current;let c=s.x,f=s.y,O=[],R=0;for(const K of i)switch(0|K){case n.OPS.rectangle:c=e[R++],f=e[R++];const X=c+e[R++],et=f+e[R++];O.push("M",v(c),v(f),"L",v(X),v(f),"L",v(X),v(et),"L",v(c),v(et),"Z");break;case n.OPS.moveTo:c=e[R++],f=e[R++],O.push("M",v(c),v(f));break;case n.OPS.lineTo:c=e[R++],f=e[R++],O.push("L",v(c),v(f));break;case n.OPS.curveTo:c=e[R+4],f=e[R+5],O.push("C",v(e[R]),v(e[R+1]),v(e[R+2]),v(e[R+3]),v(c),v(f)),R+=6;break;case n.OPS.curveTo2:O.push("C",v(c),v(f),v(e[R]),v(e[R+1]),v(e[R+2]),v(e[R+3])),c=e[R+2],f=e[R+3],R+=4;break;case n.OPS.curveTo3:c=e[R+2],f=e[R+3],O.push("C",v(e[R]),v(e[R+1]),v(c),v(f),v(c),v(f)),R+=4;break;case n.OPS.closePath:O.push("Z")}O=O.join(" "),s.path&&i.length>0&&i[0]!==n.OPS.rectangle&&i[0]!==n.OPS.moveTo?O=s.path.getAttributeNS(null,"d")+O:(s.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(s.path)),s.path.setAttributeNS(null,"d",O),s.path.setAttributeNS(null,"fill","none"),s.element=s.path,s.setCurrentPoint(c,f)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const e="clippath"+P++,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",e),s.setAttributeNS(null,"transform",_(this.transformMatrix));const c=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,s.append(c),this.defs.append(s),i.activeClipUrl){i.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;s.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const e=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",e)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[e,s]of i)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,n.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=this.current;let c=s.dashArray;e!==1&&c.length>0&&(c=c.map(function(f){return e*f})),i.setAttributeNS(null,"stroke",s.strokeColor),i.setAttributeNS(null,"stroke-opacity",s.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",v(s.miterLimit)),i.setAttributeNS(null,"stroke-linecap",s.lineCap),i.setAttributeNS(null,"stroke-linejoin",s.lineJoin),i.setAttributeNS(null,"stroke-width",v(e*s.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",c.map(v).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",v(e*s.dashPhase)+"px")}eoFill(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const e=this.getObject(i);e?this.paintInlineImageXObject(e):(0,n.warn)(`Dependent image with object ID ${i} is not ready yet`)}paintInlineImageXObject(i,e){const s=i.width,c=i.height,f=g(i,this.forceDataSchema,!!e),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",v(s)),O.setAttributeNS(null,"height",v(c)),this.current.element=O,this.clip("nonzero");const R=this.svgFactory.createElement("svg:image");R.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f),R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y",v(-c)),R.setAttributeNS(null,"width",v(s)+"px"),R.setAttributeNS(null,"height",v(c)+"px"),R.setAttributeNS(null,"transform",`scale(${v(1/s)} ${v(-1/c)})`),e?e.append(R):this._ensureTransformGroup().append(R)}paintImageMaskXObject(i){const e=this.getObject(i.data,i);if(e.bitmap){(0,n.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const s=this.current,c=e.width,f=e.height,O=s.fillColor;s.maskId="mask"+I++;const R=this.svgFactory.createElement("svg:mask");R.setAttributeNS(null,"id",s.maskId);const K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y","0"),K.setAttributeNS(null,"width",v(c)),K.setAttributeNS(null,"height",v(f)),K.setAttributeNS(null,"fill",O),K.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(R),this._ensureTransformGroup().append(K),this.paintInlineImageXObject(e,R)}paintFormXObjectBegin(i,e){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e){const s=e[2]-e[0],c=e[3]-e[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",e[0]),f.setAttributeNS(null,"y",e[1]),f.setAttributeNS(null,"width",v(s)),f.setAttributeNS(null,"height",v(c)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const e=this.svgFactory.create(i.width,i.height),s=this.svgFactory.createElement("svg:defs");e.append(s),this.defs=s;const c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",_(i.transform)),e.append(c),this.svg=c,e}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(x,l,t)=>{var r=t(3),n=t(188),h=t(193);r({target:"Array",proto:!0},{group:function(b){return n(this,b,arguments.length>1?arguments[1]:void 0)}}),h("group")},(x,l,t)=>{var r=t(99),n=t(14),h=t(13),m=t(40),b=t(18),d=t(64),o=t(189),u=t(108),g=Array,A=n([].push);x.exports=function(v,_,P,I){for(var T,M,i,e=m(v),s=h(e),c=r(_,P),f=o(null),O=d(s),R=0;O>R;R++)i=s[R],(M=b(c(i,R,e)))in f?A(f[M],i):f[M]=[i];if(I&&(T=I(e))!==g)for(M in f)f[M]=u(T,f[M]);return f}},(x,l,t)=>{var r,n=t(47),h=t(190),m=t(66),b=t(55),d=t(192),o=t(43),u=t(54),g="prototype",A="script",v=u("IE_PROTO"),_=function(){},P=function(M){return"<"+A+">"+M+"</"+A+">"},I=function(M){M.write(P("")),M.close();var i=M.parentWindow.Object;return M=null,i},T=function(){try{r=new ActiveXObject("htmlfile")}catch{}T=typeof document<"u"?document.domain&&r?I(r):function(){var i,e=o("iframe"),s="java"+A+":";return e.style.display="none",d.appendChild(e),e.src=String(s),(i=e.contentWindow.document).open(),i.write(P("document.F=Object")),i.close(),i.F}():I(r);for(var M=m.length;M--;)delete T[g][m[M]];return T()};b[v]=!0,x.exports=Object.create||function(i,e){var s;return i!==null?(_[g]=n(i),s=new _,_[g]=null,s[v]=i):s=T(),e===void 0?s:h.f(s,e)}},(x,l,t)=>{var r=t(6),n=t(46),h=t(45),m=t(47),b=t(12),d=t(191);l.f=r&&!n?Object.defineProperties:function(u,g){m(u);for(var A,v=b(g),_=d(g),P=_.length,I=0;P>I;)h.f(u,A=_[I++],v[A]);return u}},(x,l,t)=>{var r=t(59),n=t(66);x.exports=Object.keys||function(m){return r(m,n)}},(x,l,t)=>{var r=t(24);x.exports=r("document","documentElement")},(x,l,t)=>{var r=t(34),n=t(189),h=t(45).f,m=r("unscopables"),b=Array.prototype;b[m]===void 0&&h(b,m,{configurable:!0,value:n(null)}),x.exports=function(d){b[m][d]=!0}},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0,t(89);class r{static textContent(h){const m=[],b={items:m,styles:Object.create(null)};return function d(o){var A;if(!o)return;let u=null;const g=o.name;if(g==="#text")u=o.value;else{if(!r.shouldBuildText(g))return;(A=o==null?void 0:o.attributes)!=null&&A.textContent?u=o.attributes.textContent:o.value&&(u=o.value)}if(u!==null&&m.push({str:u}),o.children)for(const v of o.children)d(v)}(h),b}static shouldBuildText(h){return!(h==="textarea"||h==="input"||h==="option"||h==="select")}}l.XfaText=r},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TextLayerRenderTask=void 0,l.renderTextLayer=function(v){!v.textContentSource&&(v.textContent||v.textContentStream)&&((0,n.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),v.textContentSource=v.textContent||v.textContentStream);const{container:_,viewport:P}=v,I=getComputedStyle(_),T=I.getPropertyValue("visibility"),M=parseFloat(I.getPropertyValue("--scale-factor"));T==="visible"&&(!M||Math.abs(M-P.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const i=new g(v);return i._render(),i},l.updateTextLayer=function(v){let{container:_,viewport:P,textDivs:I,textDivProperties:T,isOffscreenCanvasSupported:M,mustRotate:i=!0,mustRescale:e=!0}=v;if(i&&(0,n.setLayerDimensions)(_,{rotation:P.rotation}),e){const s=d(0,M),c={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s};for(const f of I)c.properties=T.get(f),c.div=f,u(c)}},t(89),t(2);var r=t(1),n=t(168);const h=30,m=.8,b=new Map;function d(A,v){let _;if(v&&r.FeatureTest.isOffscreenCanvasSupported)_=new OffscreenCanvas(A,A).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=A,_=P.getContext("2d",{alpha:!1})}return _}function o(A,v,_){const P=document.createElement("span"),I={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};A._textDivs.push(P);const T=r.Util.transform(A._transform,v.transform);let M=Math.atan2(T[1],T[0]);const i=_[v.fontName];i.vertical&&(M+=Math.PI/2);const e=Math.hypot(T[2],T[3]),s=e*function(et,lt){const V=b.get(et);if(V)return V;const H=d(h,lt);H.font=`${h}px ${et}`;const p=H.measureText("");let y=p.fontBoundingBoxAscent,S=Math.abs(p.fontBoundingBoxDescent);if(y){const q=y/(y+S);return b.set(et,q),H.canvas.width=H.canvas.height=0,q}H.strokeStyle="red",H.clearRect(0,0,h,h),H.strokeText("g",0,0);let N=H.getImageData(0,0,h,h).data;S=0;for(let q=N.length-1-3;q>=0;q-=4)if(N[q]>0){S=Math.ceil(q/4/h);break}H.clearRect(0,0,h,h),H.strokeText("A",0,h),N=H.getImageData(0,0,h,h).data,y=0;for(let q=0,Q=N.length;q<Q;q+=4)if(N[q]>0){y=h-Math.floor(q/4/h);break}if(H.canvas.width=H.canvas.height=0,y){const q=y/(y+S);return b.set(et,q),q}return b.set(et,m),m}(i.fontFamily,A._isOffscreenCanvasSupported);let c,f;M===0?(c=T[4],f=T[5]-s):(c=T[4]+s*Math.sin(M),f=T[5]-s*Math.cos(M));const O="calc(var(--scale-factor)*",R=P.style;A._container===A._rootContainer?(R.left=`${(100*c/A._pageWidth).toFixed(2)}%`,R.top=`${(100*f/A._pageHeight).toFixed(2)}%`):(R.left=`${O}${c.toFixed(2)}px)`,R.top=`${O}${f.toFixed(2)}px)`),R.fontSize=`${O}${e.toFixed(2)}px)`,R.fontFamily=i.fontFamily,I.fontSize=e,P.setAttribute("role","presentation"),P.textContent=v.str,P.dir=v.dir,A._fontInspectorEnabled&&(P.dataset.fontName=v.fontName),M!==0&&(I.angle=M*(180/Math.PI));let K=!1;if(v.str.length>1)K=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const X=Math.abs(v.transform[0]),et=Math.abs(v.transform[3]);X!==et&&Math.max(X,et)/Math.min(X,et)>1.5&&(K=!0)}K&&(I.canvasWidth=i.vertical?v.height:v.width),A._textDivProperties.set(P,I),A._isReadableStream&&A._layoutText(P)}function u(A){const{div:v,scale:_,properties:P,ctx:I,prevFontSize:T,prevFontFamily:M}=A,{style:i}=v;let e="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:s}=i,{canvasWidth:c,fontSize:f}=P;(T!==f||M!==s)&&(I.font=`${f*_}px ${s}`,A.prevFontSize=f,A.prevFontFamily=s);const{width:O}=I.measureText(v.textContent);O>0&&(e=`scaleX(${c*_/O})`)}P.angle!==0&&(e=`rotate(${P.angle}deg) ${e}`),e.length>0&&(i.transform=e)}class g{constructor(v){var R;let{textContentSource:_,container:P,viewport:I,textDivs:T,textDivProperties:M,textContentItemsStr:i,isOffscreenCanvasSupported:e}=v;this._textContentSource=_,this._isReadableStream=_ instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=T||[],this._textContentItemsStr=i||[],this._isOffscreenCanvasSupported=e,this._fontInspectorEnabled=!!((R=globalThis.FontInspector)!=null&&R.enabled),this._reader=null,this._textDivProperties=M||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,e)};const{pageWidth:s,pageHeight:c,pageX:f,pageY:O}=I.rawDims;this._transform=[1,0,0,-1,-f,O+c],this._pageWidth=s,this._pageHeight=c,(0,n.setLayerDimensions)(P,I),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(v,_){for(const P of v)if(P.str!==void 0)this._textContentItemsStr.push(P.str),o(this,P,_);else if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const I=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),I.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode)}_layoutText(v){const _=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,u(this._layoutTextParams),_.hasText&&this._container.append(v),_.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const v=new r.PromiseCapability;let _=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(I=>{let{value:T,done:M}=I;M?v.resolve():(Object.assign(_,T.styles),this._processItems(T.items,_),P())},v.reject)};this._reader=this._textContentSource.getReader(),P()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:P,styles:I}=this._textContentSource;this._processItems(P,I),v.resolve()}}v.promise.then(()=>{_=null,function(I){if(I._canceled)return;const T=I._textDivs,M=I._capability;if(T.length>1e5)M.resolve();else{if(!I._isReadableStream)for(const i of T)I._layoutText(i);M.resolve()}}(this)},this._capability.reject)}}l.TextLayerRenderTask=g},(x,l,t)=>{var u,g,A,v,_,P,I,T,M,i,e,tr,c,Pe,O,er,K,rr;Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditorLayer=void 0,t(125),t(136),t(138),t(141),t(143),t(145),t(147);var r=t(1),n=t(164),h=t(197),m=t(202),b=t(168),d=t(203);const et=class et{constructor(V){$(this,e);$(this,c);$(this,O);$(this,K);$(this,u,void 0);$(this,g,!1);$(this,A,null);$(this,v,this.pointerup.bind(this));$(this,_,this.pointerdown.bind(this));$(this,P,new Map);$(this,I,!1);$(this,T,!1);$(this,M,!1);$(this,i,void 0);let{uiManager:H,pageIndex:p,div:y,accessibilityManager:S,annotationLayer:N,viewport:q,l10n:Q}=V;const W=[h.FreeTextEditor,m.InkEditor,d.StampEditor];if(!et._initialized){et._initialized=!0;for(const L of W)L.initialize(Q)}H.registerEditorTypes(W),st(this,i,H),this.pageIndex=p,this.div=y,st(this,u,S),st(this,A,N),this.viewport=q,a(this,i).addLayer(this)}get isEmpty(){return a(this,P).size===0}updateToolbar(V){a(this,i).updateToolbar(V)}updateMode(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(this,i).getMode();Z(this,K,rr).call(this),V===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),V!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",V===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",V===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",V===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(V){if(!(!V&&a(this,i).getMode()!==r.AnnotationEditorType.INK)){if(!V){for(const H of a(this,P).values())if(H.isEmpty()){H.setInBackground();return}}Z(this,c,Pe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(V){a(this,i).setEditingState(V)}addCommands(V){a(this,i).addCommands(V)}enable(){this.div.style.pointerEvents="auto";const V=new Set;for(const p of a(this,P).values())p.enableEditing(),p.annotationElementId&&V.add(p.annotationElementId);if(!a(this,A))return;const H=a(this,A).getEditableAnnotations();for(const p of H){if(p.hide(),a(this,i).isDeletedAnnotationElement(p.data.id)||V.has(p.data.id))continue;const y=this.deserialize(p);y&&(this.addOrRebuild(y),y.enableEditing())}}disable(){var H;st(this,M,!0),this.div.style.pointerEvents="none";const V=new Set;for(const p of a(this,P).values())p.disableEditing(),p.annotationElementId&&p.serialize()===null?((H=this.getEditableAnnotation(p.annotationElementId))==null||H.show(),p.remove()):V.add(p.annotationElementId);if(a(this,A)){const p=a(this,A).getEditableAnnotations();for(const y of p){const{id:S}=y.data;V.has(S)||a(this,i).isDeletedAnnotationElement(S)||y.show()}}Z(this,K,rr).call(this),this.isEmpty&&(this.div.hidden=!0),st(this,M,!1)}getEditableAnnotation(V){var H;return((H=a(this,A))==null?void 0:H.getEditableAnnotation(V))||null}setActiveEditor(V){a(this,i).getActive()!==V&&a(this,i).setActiveEditor(V)}enableClick(){this.div.addEventListener("pointerdown",a(this,_)),this.div.addEventListener("pointerup",a(this,v))}disableClick(){this.div.removeEventListener("pointerdown",a(this,_)),this.div.removeEventListener("pointerup",a(this,v))}attach(V){a(this,P).set(V.id,V);const{annotationElementId:H}=V;H&&a(this,i).isDeletedAnnotationElement(H)&&a(this,i).removeDeletedAnnotationElement(V)}detach(V){var H;a(this,P).delete(V.id),(H=a(this,u))==null||H.removePointerInTextLayer(V.contentDiv),!a(this,M)&&V.annotationElementId&&a(this,i).addDeletedAnnotationElement(V)}remove(V){this.detach(V),a(this,i).removeEditor(V),V.div.contains(document.activeElement)&&setTimeout(()=>{a(this,i).focusMainContainer()},0),V.div.remove(),V.isAttachedToDOM=!1,a(this,T)||this.addInkEditorIfNeeded(!1)}changeParent(V){var H;V.parent!==this&&(V.annotationElementId&&(a(this,i).addDeletedAnnotationElement(V.annotationElementId),n.AnnotationEditor.deleteAnnotationElement(V),V.annotationElementId=null),this.attach(V),(H=V.parent)==null||H.detach(V),V.setParent(this),V.div&&V.isAttachedToDOM&&(V.div.remove(),this.div.append(V.div)))}add(V){if(this.changeParent(V),a(this,i).addEditor(V),this.attach(V),!V.isAttachedToDOM){const H=V.render();this.div.append(H),V.isAttachedToDOM=!0}V.fixAndSetPosition(),V.onceAdded(),a(this,i).addToAnnotationStorage(V)}moveEditorInDOM(V){var p;if(!V.isAttachedToDOM)return;const{activeElement:H}=document;V.div.contains(H)&&(V._focusEventsAllowed=!1,setTimeout(()=>{V.div.contains(document.activeElement)?V._focusEventsAllowed=!0:(V.div.addEventListener("focusin",()=>{V._focusEventsAllowed=!0},{once:!0}),H.focus())},0)),V._structTreeParentId=(p=a(this,u))==null?void 0:p.moveElementInDOM(this.div,V.div,V.contentDiv,!0)}addOrRebuild(V){V.needsToBeRebuilt()?V.rebuild():this.add(V)}addUndoableEditor(V){this.addCommands({cmd:()=>V._uiManager.rebuild(V),undo:()=>{V.remove()},mustExec:!1})}getNextId(){return a(this,i).getId()}pasteEditor(V,H){a(this,i).updateToolbar(V),a(this,i).updateMode(V);const{offsetX:p,offsetY:y}=Z(this,O,er).call(this),S=this.getNextId(),N=Z(this,e,tr).call(this,{parent:this,id:S,x:p,y,uiManager:a(this,i),isCentered:!0,...H});N&&this.add(N)}deserialize(V){var H;switch((H=V.annotationType)!=null?H:V.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return h.FreeTextEditor.deserialize(V,this,a(this,i));case r.AnnotationEditorType.INK:return m.InkEditor.deserialize(V,this,a(this,i));case r.AnnotationEditorType.STAMP:return d.StampEditor.deserialize(V,this,a(this,i))}return null}addNewEditor(){Z(this,c,Pe).call(this,Z(this,O,er).call(this),!0)}setSelected(V){a(this,i).setSelected(V)}toggleSelected(V){a(this,i).toggleSelected(V)}isSelected(V){return a(this,i).isSelected(V)}unselect(V){a(this,i).unselect(V)}pointerup(V){const{isMac:H}=r.FeatureTest.platform;!(V.button!==0||V.ctrlKey&&H)&&V.target===this.div&&a(this,I)&&(st(this,I,!1),a(this,g)?a(this,i).getMode()!==r.AnnotationEditorType.STAMP?Z(this,c,Pe).call(this,V,!1):a(this,i).unselectAll():st(this,g,!0))}pointerdown(V){if(a(this,I)){st(this,I,!1);return}const{isMac:H}=r.FeatureTest.platform;if(V.button!==0||V.ctrlKey&&H||V.target!==this.div)return;st(this,I,!0);const p=a(this,i).getActive();st(this,g,!p||p.isEmpty())}findNewParent(V,H,p){const y=a(this,i).findParent(H,p);return y===null||y===this?!1:(y.changeParent(V),!0)}destroy(){var V,H;((V=a(this,i).getActive())==null?void 0:V.parent)===this&&(a(this,i).commitOrRemove(),a(this,i).setActiveEditor(null));for(const p of a(this,P).values())(H=a(this,u))==null||H.removePointerInTextLayer(p.contentDiv),p.setParent(null),p.isAttachedToDOM=!1,p.div.remove();this.div=null,a(this,P).clear(),a(this,i).removeLayer(this)}render(V){let{viewport:H}=V;this.viewport=H,(0,b.setLayerDimensions)(this.div,H);for(const p of a(this,i).getEditors(this.pageIndex))this.add(p);this.updateMode()}update(V){let{viewport:H}=V;a(this,i).commitOrRemove(),this.viewport=H,(0,b.setLayerDimensions)(this.div,{rotation:H.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:V,pageHeight:H}=this.viewport.rawDims;return[V,H]}};u=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,_=new WeakMap,P=new WeakMap,I=new WeakMap,T=new WeakMap,M=new WeakMap,i=new WeakMap,e=new WeakSet,tr=function(V){switch(a(this,i).getMode()){case r.AnnotationEditorType.FREETEXT:return new h.FreeTextEditor(V);case r.AnnotationEditorType.INK:return new m.InkEditor(V);case r.AnnotationEditorType.STAMP:return new d.StampEditor(V)}return null},c=new WeakSet,Pe=function(V,H){const p=this.getNextId(),y=Z(this,e,tr).call(this,{parent:this,id:p,x:V.offsetX,y:V.offsetY,uiManager:a(this,i),isCentered:H});return y&&this.add(y),y},O=new WeakSet,er=function(){const{x:V,y:H,width:p,height:y}=this.div.getBoundingClientRect(),S=Math.max(0,V),N=Math.max(0,H),q=(S+Math.min(window.innerWidth,V+p))/2-V,Q=(N+Math.min(window.innerHeight,H+y))/2-H,[W,L]=this.viewport.rotation%180==0?[q,Q]:[Q,q];return{offsetX:W,offsetY:L}},K=new WeakSet,rr=function(){st(this,T,!0);for(const V of a(this,P).values())V.isEmpty()&&V.remove();st(this,T,!1)},te(et,"_initialized",!1);let o=et;l.AnnotationEditorLayer=o},(x,l,t)=>{var d,o,u,g,A,v,_,P,I,T,kr,i,Mr,s,Rr,f,be,R,ir,X,Fr,lt,sr;Object.defineProperty(l,"__esModule",{value:!0}),l.FreeTextEditor=void 0,t(89);var r=t(1),n=t(165),h=t(164),m=t(198);const H=class H extends h.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});$(this,T);$(this,i);$(this,s);$(this,f);$(this,R);$(this,X);$(this,lt);$(this,d,this.editorDivBlur.bind(this));$(this,o,this.editorDivFocus.bind(this));$(this,u,this.editorDivInput.bind(this));$(this,g,this.editorDivKeydown.bind(this));$(this,A,void 0);$(this,v,"");$(this,_,`${this.id}-editor`);$(this,P,void 0);$(this,I,null);st(this,A,S.color||H._defaultColor||h.AnnotationEditor._defaultLineColor),st(this,P,S.fontSize||H._defaultFontSize)}static get _keyboardManager(){const S=H.prototype,N=W=>W.isEmpty(),q=n.AnnotationEditorUIManager.TRANSLATE_SMALL,Q=n.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new n.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],S.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],S.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],S._translateEmpty,{args:[-q,0],checker:N}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],S._translateEmpty,{args:[-Q,0],checker:N}],[["ArrowRight","mac+ArrowRight"],S._translateEmpty,{args:[q,0],checker:N}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],S._translateEmpty,{args:[Q,0],checker:N}],[["ArrowUp","mac+ArrowUp"],S._translateEmpty,{args:[0,-q],checker:N}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],S._translateEmpty,{args:[0,-Q],checker:N}],[["ArrowDown","mac+ArrowDown"],S._translateEmpty,{args:[0,q],checker:N}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],S._translateEmpty,{args:[0,Q],checker:N}]]))}static initialize(S){h.AnnotationEditor.initialize(S,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const N=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(N.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,N){switch(S){case r.AnnotationEditorParamsType.FREETEXT_SIZE:H._defaultFontSize=N;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:H._defaultColor=N}}updateParams(S,N){switch(S){case r.AnnotationEditorParamsType.FREETEXT_SIZE:Z(this,T,kr).call(this,N);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:Z(this,i,Mr).call(this,N)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,H._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,H._defaultColor||h.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,P)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,A)]]}_translateEmpty(S,N){this._uiManager.translateSelectedEditors(S,N,!0)}getInitialTranslation(){const S=this.parentScale;return[-H._internalPadding*S,-(H._internalPadding+a(this,P))*S]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,g)),this.editorDiv.addEventListener("focus",a(this,o)),this.editorDiv.addEventListener("blur",a(this,d)),this.editorDiv.addEventListener("input",a(this,u)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,_)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,g)),this.editorDiv.removeEventListener("focus",a(this,o)),this.editorDiv.removeEventListener("blur",a(this,d)),this.editorDiv.removeEventListener("input",a(this,u)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(S){this._focusEventsAllowed&&(super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var S;this.width?Z(this,lt,sr).call(this):(this.enableEditMode(),this.editorDiv.focus(),(S=this._initialOptions)!=null&&S.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const S=a(this,v),N=st(this,v,Z(this,s,Rr).call(this).trimEnd());if(S===N)return;const q=Q=>{st(this,v,Q),Q?(Z(this,R,ir).call(this),this._uiManager.rebuild(this),Z(this,f,be).call(this)):this.remove()};this.addCommands({cmd:()=>{q(N)},undo:()=>{q(S)},mustExec:!1}),Z(this,f,be).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(S){this.enterInEditMode()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enterInEditMode(),S.preventDefault())}editorDivKeydown(S){H._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}editorDivInput(S){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,N;this.width&&(S=this.x,N=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,_)),this.enableEditing(),h.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Q=>{var W;return(W=this.editorDiv)==null?void 0:W.setAttribute("aria-label",Q)}),h.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Q=>{var W;return(W=this.editorDiv)==null?void 0:W.setAttribute("default-content",Q)}),this.editorDiv.contentEditable=!0;const{style:q}=this.editorDiv;if(q.fontSize=`calc(${a(this,P)}px * var(--scale-factor))`,q.color=a(this,A),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,n.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Q,W]=this.parentDimensions;if(this.annotationElementId){const{position:L}=a(this,I);let[C,F]=this.getInitialTranslation();[C,F]=this.pageTranslationToScreen(C,F);const[E,B]=this.pageDimensions,[U,D]=this.pageTranslation;let z,Y;switch(this.rotation){case 0:z=S+(L[0]-U)/E,Y=N+this.height-(L[1]-D)/B;break;case 90:z=S+(L[0]-U)/E,Y=N-(L[1]-D)/B,[C,F]=[F,-C];break;case 180:z=S-this.width+(L[0]-U)/E,Y=N-(L[1]-D)/B,[C,F]=[-C,-F];break;case 270:z=S+(L[0]-U-this.height*B)/E,Y=N+(L[1]-D-this.width*E)/B,[C,F]=[-F,C]}this.setAt(z*Q,Y*W,C,F)}else this.setAt(S*Q,N*W,this.width*Q,this.height*W);Z(this,R,ir).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,N,q){let Q=null;if(S instanceof m.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:L,fontColor:C},rect:F,rotation:E,id:B},textContent:U,textPosition:D,parent:{page:{pageNumber:z}}}=S;if(!U||U.length===0)return null;Q=S={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(C),fontSize:L,value:U.join(`
`),position:D,pageIndex:z-1,rect:F,rotation:E,id:B,deleted:!1}}const W=super.deserialize(S,N,q);return st(W,P,S.fontSize),st(W,A,r.Util.makeHexColor(...S.color)),st(W,v,S.value),W.annotationElementId=S.id||null,st(W,I,Q),W}serialize(){let S=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const N=H._internalPadding*this.parentScale,q=this.getRect(N,N),Q=h.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,A)),W={annotationType:r.AnnotationEditorType.FREETEXT,color:Q,fontSize:a(this,P),value:a(this,v),pageIndex:this.pageIndex,rect:q,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return S?W:this.annotationElementId&&!Z(this,X,Fr).call(this,W)?null:(W.id=this.annotationElementId,W)}};d=new WeakMap,o=new WeakMap,u=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,_=new WeakMap,P=new WeakMap,I=new WeakMap,T=new WeakSet,kr=function(S){const N=Q=>{this.editorDiv.style.fontSize=`calc(${Q}px * var(--scale-factor))`,this.translate(0,-(Q-a(this,P))*this.parentScale),st(this,P,Q),Z(this,f,be).call(this)},q=a(this,P);this.addCommands({cmd:()=>{N(S)},undo:()=>{N(q)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,Mr=function(S){const N=a(this,A);this.addCommands({cmd:()=>{st(this,A,this.editorDiv.style.color=S)},undo:()=>{st(this,A,this.editorDiv.style.color=N)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s=new WeakSet,Rr=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const N=[];for(const q of S)N.push(q.innerText.replace(/\r\n?|\n/,""));return N.join(`
`)},f=new WeakSet,be=function(){const[S,N]=this.parentDimensions;let q;if(this.isAttachedToDOM)q=this.div.getBoundingClientRect();else{const{currentLayer:Q,div:W}=this,L=W.style.display;W.style.display="hidden",Q.div.append(this.div),q=W.getBoundingClientRect(),W.remove(),W.style.display=L}this.rotation%180==this.parentRotation%180?(this.width=q.width/S,this.height=q.height/N):(this.width=q.height/S,this.height=q.width/N),this.fixAndSetPosition()},R=new WeakSet,ir=function(){if(this.editorDiv.replaceChildren(),a(this,v))for(const S of a(this,v).split(`
`)){const N=document.createElement("div");N.append(S?document.createTextNode(S):document.createElement("br")),this.editorDiv.append(N)}},X=new WeakSet,Fr=function(S){const{value:N,fontSize:q,color:Q,rect:W,pageIndex:L}=a(this,I);return S.value!==N||S.fontSize!==q||S.rect.some((C,F)=>Math.abs(C-W[F])>=1)||S.color.some((C,F)=>C!==Q[F])||S.pageIndex!==L},lt=new WeakSet,sr=function(){let S=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.annotationElementId)return;if(Z(this,f,be).call(this),!S&&(this.width===0||this.height===0)){setTimeout(()=>Z(this,lt,sr).call(this,!0),0);return}const N=H._internalPadding*this.parentScale;a(this,I).rect=this.getRect(N,N)},te(H,"_freeTextDefaultContent",""),te(H,"_internalPadding",0),te(H,"_defaultColor",null),te(H,"_defaultFontSize",10),te(H,"_type","freetext");let b=H;l.FreeTextEditor=b},(x,l,t)=>{var L,F,le,B,Dr,D,z,Y,it,nt,dt,ut,vt,yt,ft,mt,Mt,At,Pt,Ft,Lt,Nt,Bt,Ir,Gt,ke,Kt,nr,Yt,ar,Vt,Zt,zt,Xt,ct,gt,Tt,or,rt,ot,xt,St,Or,Rt,lr,pt;Object.defineProperty(l,"__esModule",{value:!0}),l.StampAnnotationElement=l.InkAnnotationElement=l.FreeTextAnnotationElement=l.AnnotationLayer=void 0,t(89),t(125),t(136),t(138),t(141),t(143),t(145),t(147);var r=t(1),n=t(168),h=t(163),m=t(199),b=t(200),d=t(201);const o=1e3,u=new WeakSet;function g(j){return{width:j[2]-j[0],height:j[3]-j[1]}}class A{static create(w){switch(w.data.annotationType){case r.AnnotationType.LINK:return new _(w);case r.AnnotationType.TEXT:return new P(w);case r.AnnotationType.WIDGET:switch(w.data.fieldType){case"Tx":return new T(w);case"Btn":return w.data.radioButton?new e(w):w.data.checkBox?new i(w):new s(w);case"Ch":return new c(w);case"Sig":return new M(w)}return new I(w);case r.AnnotationType.POPUP:return new f(w);case r.AnnotationType.FREETEXT:return new R(w);case r.AnnotationType.LINE:return new K(w);case r.AnnotationType.SQUARE:return new X(w);case r.AnnotationType.CIRCLE:return new et(w);case r.AnnotationType.POLYLINE:return new lt(w);case r.AnnotationType.CARET:return new H(w);case r.AnnotationType.INK:return new p(w);case r.AnnotationType.POLYGON:return new V(w);case r.AnnotationType.HIGHLIGHT:return new y(w);case r.AnnotationType.UNDERLINE:return new S(w);case r.AnnotationType.SQUIGGLY:return new N(w);case r.AnnotationType.STRIKEOUT:return new q(w);case r.AnnotationType.STAMP:return new Q(w);case r.AnnotationType.FILEATTACHMENT:return new W(w);default:return new v(w)}}}const C=class C{constructor(w){$(this,L,!1);let{isRenderable:k=!1,ignoreBorder:G=!1,createQuadrilaterals:J=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=k,this.data=w.data,this.layer=w.layer,this.linkService=w.linkService,this.downloadManager=w.downloadManager,this.imageResourcesPath=w.imageResourcesPath,this.renderForms=w.renderForms,this.svgFactory=w.svgFactory,this.annotationStorage=w.annotationStorage,this.enableScripting=w.enableScripting,this.hasJSActions=w.hasJSActions,this._fieldObjects=w.fieldObjects,this.parent=w.parent,k&&(this.container=this._createContainer(G)),J&&this._createQuadrilaterals()}static _hasPopupData(w){let{titleObj:k,contentsObj:G,richText:J}=w;return!!(k!=null&&k.str||G!=null&&G.str||J!=null&&J.str)}get hasPopupData(){return C._hasPopupData(this.data)}_createContainer(w){const{data:k,parent:{page:G,viewport:J}}=this,tt=document.createElement("section");tt.setAttribute("data-annotation-id",k.id),this instanceof I||(tt.tabIndex=o),tt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&tt.setAttribute("aria-haspopup","dialog"),k.noRotate&&tt.classList.add("norotate");const{pageWidth:at,pageHeight:ht,pageX:_t,pageY:Et}=J.rawDims;if(!k.rect||this instanceof f){const{rotation:Dt}=k;return k.hasOwnCanvas||Dt===0||this.setRotation(Dt,tt),tt}const{width:bt,height:jt}=g(k.rect),Ct=r.Util.normalizeRect([k.rect[0],G.view[3]-k.rect[1]+G.view[1],k.rect[2],G.view[3]-k.rect[3]+G.view[1]]);if(!w&&k.borderStyle.width>0){tt.style.borderWidth=`${k.borderStyle.width}px`;const Dt=k.borderStyle.horizontalCornerRadius,It=k.borderStyle.verticalCornerRadius;if(Dt>0||It>0){const qt=`calc(${Dt}px * var(--scale-factor)) / calc(${It}px * var(--scale-factor))`;tt.style.borderRadius=qt}else if(this instanceof e){const qt=`calc(${bt}px * var(--scale-factor)) / calc(${jt}px * var(--scale-factor))`;tt.style.borderRadius=qt}switch(k.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:tt.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:tt.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:tt.style.borderBottomStyle="solid"}const Ut=k.borderColor||null;Ut?(st(this,L,!0),tt.style.borderColor=r.Util.makeHexColor(0|Ut[0],0|Ut[1],0|Ut[2])):tt.style.borderWidth=0}tt.style.left=100*(Ct[0]-_t)/at+"%",tt.style.top=100*(Ct[1]-Et)/ht+"%";const{rotation:kt}=k;return k.hasOwnCanvas||kt===0?(tt.style.width=100*bt/at+"%",tt.style.height=100*jt/ht+"%"):this.setRotation(kt,tt),tt}setRotation(w){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:G,pageHeight:J}=this.parent.viewport.rawDims,{width:tt,height:at}=g(this.data.rect);let ht,_t;w%180==0?(ht=100*tt/G,_t=100*at/J):(ht=100*at/G,_t=100*tt/J),k.style.width=`${ht}%`,k.style.height=`${_t}%`,k.setAttribute("data-main-rotation",(360-w)%360)}get _commonActions(){const w=(k,G,J)=>{const tt=J.detail[k],at=tt[0],ht=tt.slice(1);J.target.style[G]=m.ColorConverters[`${at}_HTML`](ht),this.annotationStorage.setValue(this.data.id,{[G]:m.ColorConverters[`${at}_rgb`](ht)})};return(0,r.shadow)(this,"_commonActions",{display:k=>{const{display:G}=k.detail,J=G%2==1;this.container.style.visibility=J?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:J,noPrint:G===1||G===2})},print:k=>{this.annotationStorage.setValue(this.data.id,{noPrint:!k.detail.print})},hidden:k=>{const{hidden:G}=k.detail;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:G,noView:G})},focus:k=>{setTimeout(()=>k.target.focus({preventScroll:!1}),0)},userName:k=>{k.target.title=k.detail.userName},readonly:k=>{k.target.disabled=k.detail.readonly},required:k=>{this._setRequired(k.target,k.detail.required)},bgColor:k=>{w("bgColor","backgroundColor",k)},fillColor:k=>{w("fillColor","backgroundColor",k)},fgColor:k=>{w("fgColor","color",k)},textColor:k=>{w("textColor","color",k)},borderColor:k=>{w("borderColor","borderColor",k)},strokeColor:k=>{w("strokeColor","borderColor",k)},rotation:k=>{const G=k.detail.rotation;this.setRotation(G),this.annotationStorage.setValue(this.data.id,{rotation:G})}})}_dispatchEventFromSandbox(w,k){const G=this._commonActions;for(const J of Object.keys(k.detail)){const tt=w[J]||G[J];tt==null||tt(k)}}_setDefaultPropertiesFromJS(w){if(!this.enableScripting)return;const k=this.annotationStorage.getRawValue(this.data.id);if(!k)return;const G=this._commonActions;for(const[J,tt]of Object.entries(k)){const at=G[J];at&&(at({detail:{[J]:tt},target:w}),delete k[J])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:w}=this.data;if(!w)return;const[k,G,J,tt]=this.data.rect;if(w.length===1){const[,{x:It,y:Ut},{x:qt,y:Ht}]=w[0];if(J===It&&tt===Ut&&k===qt&&G===Ht)return}const{style:at}=this.container;let ht;if(a(this,L)){const{borderColor:It,borderWidth:Ut}=at;at.borderWidth=0,ht=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${It}" stroke-width="${Ut}">`],this.container.classList.add("hasBorder")}const _t=J-k,Et=tt-G,{svgFactory:bt}=this,jt=bt.createElement("svg");jt.classList.add("quadrilateralsContainer"),jt.setAttribute("width",0),jt.setAttribute("height",0);const Ct=bt.createElement("defs");jt.append(Ct);const kt=bt.createElement("clipPath"),Dt=`clippath_${this.data.id}`;kt.setAttribute("id",Dt),kt.setAttribute("clipPathUnits","objectBoundingBox"),Ct.append(kt);for(const[,{x:It,y:Ut},{x:qt,y:Ht}]of w){const re=bt.createElement("rect"),ie=(qt-k)/_t,ae=(tt-Ut)/Et,oe=(It-qt)/_t,vr=(Ut-Ht)/Et;re.setAttribute("x",ie),re.setAttribute("y",ae),re.setAttribute("width",oe),re.setAttribute("height",vr),kt.append(re),ht==null||ht.push(`<rect vector-effect="non-scaling-stroke" x="${ie}" y="${ae}" width="${oe}" height="${vr}"/>`)}a(this,L)&&(ht.push("</g></svg>')"),at.backgroundImage=ht.join("")),this.container.append(jt),this.container.style.clipPath=`url(#${Dt})`}_createPopup(){const{container:w,data:k}=this;w.setAttribute("aria-haspopup","dialog");const G=new f({data:{color:k.color,titleObj:k.titleObj,modificationDate:k.modificationDate,contentsObj:k.contentsObj,richText:k.richText,parentRect:k.rect,borderStyle:0,id:`popup_${k.id}`,rotation:k.rotation},parent:this.parent,elements:[this]});this.parent.div.append(G.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(w){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const G=[];if(this._fieldObjects){const J=this._fieldObjects[w];if(J)for(const{page:tt,id:at,exportValues:ht}of J){if(tt===-1||at===k)continue;const _t=typeof ht=="string"?ht:null,Et=document.querySelector(`[data-element-id="${at}"]`);!Et||u.has(Et)?G.push({id:at,exportValue:_t,domElement:Et}):(0,r.warn)(`_getElementsByName - element not allowed: ${at}`)}return G}for(const J of document.getElementsByName(w)){const{exportValue:tt}=J,at=J.getAttribute("data-element-id");at!==k&&u.has(J)&&G.push({id:at,exportValue:tt,domElement:J})}return G}show(){var w;this.container&&(this.container.hidden=!1),(w=this.popup)==null||w.maybeShow()}hide(){var w;this.container&&(this.container.hidden=!0),(w=this.popup)==null||w.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const w=this.getElementsToTriggerPopup();if(Array.isArray(w))for(const k of w)k.classList.add("highlightArea");else w.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:w,data:{id:k}}=this;this.container.addEventListener("dblclick",()=>{var G;(G=this.linkService.eventBus)==null||G.dispatch("switchannotationeditormode",{source:this,mode:w,editId:k})})}};L=new WeakMap;let v=C;class _ extends v{constructor(k){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(k,{isRenderable:!0,ignoreBorder:!!(G!=null&&G.ignoreBorder),createQuadrilaterals:!0});$(this,F);$(this,B);this.isTooltipOnly=k.data.isTooltipOnly}render(){const{data:k,linkService:G}=this,J=document.createElement("a");J.setAttribute("data-element-id",k.id);let tt=!1;return k.url?(G.addLinkAttributes(J,k.url,k.newWindow),tt=!0):k.action?(this._bindNamedAction(J,k.action),tt=!0):k.attachment?(this._bindAttachment(J,k.attachment),tt=!0):k.setOCGState?(Z(this,B,Dr).call(this,J,k.setOCGState),tt=!0):k.dest?(this._bindLink(J,k.dest),tt=!0):(k.actions&&(k.actions.Action||k.actions["Mouse Up"]||k.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(J,k),tt=!0),k.resetForm?(this._bindResetFormAction(J,k.resetForm),tt=!0):this.isTooltipOnly&&!tt&&(this._bindLink(J,""),tt=!0)),this.container.classList.add("linkAnnotation"),tt&&this.container.append(J),this.container}_bindLink(k,G){k.href=this.linkService.getDestinationHash(G),k.onclick=()=>(G&&this.linkService.goToDestination(G),!1),(G||G==="")&&Z(this,F,le).call(this)}_bindNamedAction(k,G){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeNamedAction(G),!1),Z(this,F,le).call(this)}_bindAttachment(k,G){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>{var J;return(J=this.downloadManager)==null||J.openOrDownloadData(this.container,G.content,G.filename),!1},Z(this,F,le).call(this)}_bindJSAction(k,G){k.href=this.linkService.getAnchorUrl("");const J=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const tt of Object.keys(G.actions)){const at=J.get(tt);at&&(k[at]=()=>{var ht;return(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G.id,name:tt}}),!1})}k.onclick||(k.onclick=()=>!1),Z(this,F,le).call(this)}_bindResetFormAction(k,G){const J=k.onclick;J||(k.href=this.linkService.getAnchorUrl("")),Z(this,F,le).call(this),this._fieldObjects?k.onclick=()=>{var jt;J==null||J();const{fields:tt,refs:at,include:ht}=G,_t=[];if(tt.length!==0||at.length!==0){const Ct=new Set(at);for(const kt of tt){const Dt=this._fieldObjects[kt]||[];for(const{id:It}of Dt)Ct.add(It)}for(const kt of Object.values(this._fieldObjects))for(const Dt of kt)Ct.has(Dt.id)===ht&&_t.push(Dt)}else for(const Ct of Object.values(this._fieldObjects))_t.push(...Ct);const Et=this.annotationStorage,bt=[];for(const Ct of _t){const{id:kt}=Ct;switch(bt.push(kt),Ct.type){case"text":{const It=Ct.defaultValue||"";Et.setValue(kt,{value:It});break}case"checkbox":case"radiobutton":{const It=Ct.defaultValue===Ct.exportValues;Et.setValue(kt,{value:It});break}case"combobox":case"listbox":{const It=Ct.defaultValue||"";Et.setValue(kt,{value:It});break}default:continue}const Dt=document.querySelector(`[data-element-id="${kt}"]`);Dt&&(u.has(Dt)?Dt.dispatchEvent(new Event("resetform")):(0,r.warn)(`_bindResetFormAction - element not allowed: ${kt}`))}return this.enableScripting&&((jt=this.linkService.eventBus)==null||jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:bt,name:"ResetForm"}})),!1}:((0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),J||(k.onclick=()=>!1))}}F=new WeakSet,le=function(){this.container.setAttribute("data-internal-link","")},B=new WeakSet,Dr=function(k,G){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeSetOCGState(G),!1),Z(this,F,le).call(this)};class P extends v{constructor(w){super(w,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const w=document.createElement("img");return w.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",w.alt="[{{type}} Annotation]",w.dataset.l10nId="text_annotation_type",w.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(w),this.container}}class I extends v{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(w){var k;this.data.hasOwnCanvas&&(((k=w.previousSibling)==null?void 0:k.nodeName)==="CANVAS"&&(w.previousSibling.hidden=!0),w.hidden=!1)}_getKeyModifier(w){const{isWin:k,isMac:G}=r.FeatureTest.platform;return k&&w.ctrlKey||G&&w.metaKey}_setEventListener(w,k,G,J,tt){G.includes("mouse")?w.addEventListener(G,at=>{var ht;(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:J,value:tt(at),shift:at.shiftKey,modifier:this._getKeyModifier(at)}})}):w.addEventListener(G,at=>{var ht;if(G==="blur"){if(!k.focused||!at.relatedTarget)return;k.focused=!1}else if(G==="focus"){if(k.focused)return;k.focused=!0}tt&&((ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:J,value:tt(at)}}))})}_setEventListeners(w,k,G,J){var tt,at,ht;for(const[_t,Et]of G)(Et==="Action"||(tt=this.data.actions)!=null&&tt[Et])&&(Et!=="Focus"&&Et!=="Blur"||k||(k={focused:!1}),this._setEventListener(w,k,_t,Et,J),Et!=="Focus"||(at=this.data.actions)!=null&&at.Blur?Et!=="Blur"||(ht=this.data.actions)!=null&&ht.Focus||this._setEventListener(w,k,"focus","Focus",null):this._setEventListener(w,k,"blur","Blur",null))}_setBackgroundColor(w){const k=this.data.backgroundColor||null;w.style.backgroundColor=k===null?"transparent":r.Util.makeHexColor(k[0],k[1],k[2])}_setTextStyle(w){const k=["left","center","right"],{fontColor:G}=this.data.defaultAppearanceData,J=this.data.defaultAppearanceData.fontSize||9,tt=w.style;let at;const ht=_t=>Math.round(10*_t)/10;if(this.data.multiLine){const _t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Et=_t/(Math.round(_t/(r.LINE_FACTOR*J))||1);at=Math.min(J,ht(Et/r.LINE_FACTOR))}else{const _t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);at=Math.min(J,ht(_t/r.LINE_FACTOR))}tt.fontSize=`calc(${at}px * var(--scale-factor))`,tt.color=r.Util.makeHexColor(G[0],G[1],G[2]),this.data.textAlignment!==null&&(tt.textAlign=k[this.data.textAlignment])}_setRequired(w,k){k?w.setAttribute("required",!0):w.removeAttribute("required"),w.setAttribute("aria-required",k)}}class T extends I{constructor(w){super(w,{isRenderable:w.renderForms||!w.data.hasAppearance&&!!w.data.fieldValue})}setPropertyOnSiblings(w,k,G,J){const tt=this.annotationStorage;for(const at of this._getElementsByName(w.name,w.id))at.domElement&&(at.domElement[k]=G),tt.setValue(at.id,{[J]:G})}render(){var J,tt;const w=this.annotationStorage,k=this.data.id;this.container.classList.add("textWidgetAnnotation");let G=null;if(this.renderForms){const at=w.getValue(k,{value:this.data.fieldValue});let ht=at.value||"";const _t=w.getValue(k,{charLimit:this.data.maxLen}).charLimit;_t&&ht.length>_t&&(ht=ht.slice(0,_t));let Et=at.formattedValue||((J=this.data.textContent)==null?void 0:J.join(`
`))||null;Et&&this.data.comb&&(Et=Et.replaceAll(/\s+/g,""));const bt={userValue:ht,formattedValue:Et,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(G=document.createElement("textarea"),G.textContent=Et!=null?Et:ht,this.data.doNotScroll&&(G.style.overflowY="hidden")):(G=document.createElement("input"),G.type="text",G.setAttribute("value",Et!=null?Et:ht),this.data.doNotScroll&&(G.style.overflowX="hidden")),this.data.hasOwnCanvas&&(G.hidden=!0),u.add(G),G.setAttribute("data-element-id",k),G.disabled=this.data.readOnly,G.name=this.data.fieldName,G.tabIndex=o,this._setRequired(G,this.data.required),_t&&(G.maxLength=_t),G.addEventListener("input",Ct=>{w.setValue(k,{value:Ct.target.value}),this.setPropertyOnSiblings(G,"value",Ct.target.value,"value"),bt.formattedValue=null}),G.addEventListener("resetform",Ct=>{var Dt;const kt=(Dt=this.data.defaultFieldValue)!=null?Dt:"";G.value=bt.userValue=kt,bt.formattedValue=null});let jt=Ct=>{const{formattedValue:kt}=bt;kt!=null&&(Ct.target.value=kt),Ct.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){G.addEventListener("focus",kt=>{if(bt.focused)return;const{target:Dt}=kt;bt.userValue&&(Dt.value=bt.userValue),bt.lastCommittedValue=Dt.value,bt.commitKey=1,bt.focused=!0}),G.addEventListener("updatefromsandbox",kt=>{this.showElementAndHideCanvas(kt.target);const Dt={value(It){var Ut;bt.userValue=(Ut=It.detail.value)!=null?Ut:"",w.setValue(k,{value:bt.userValue.toString()}),It.target.value=bt.userValue},formattedValue(It){const{formattedValue:Ut}=It.detail;bt.formattedValue=Ut,Ut!=null&&It.target!==document.activeElement&&(It.target.value=Ut),w.setValue(k,{formattedValue:Ut})},selRange(It){It.target.setSelectionRange(...It.detail.selRange)},charLimit:It=>{var re;const{charLimit:Ut}=It.detail,{target:qt}=It;if(Ut===0){qt.removeAttribute("maxLength");return}qt.setAttribute("maxLength",Ut);let Ht=bt.userValue;Ht&&!(Ht.length<=Ut)&&(Ht=Ht.slice(0,Ut),qt.value=bt.userValue=Ht,w.setValue(k,{value:Ht}),(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ht,willCommit:!0,commitKey:1,selStart:qt.selectionStart,selEnd:qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Dt,kt)}),G.addEventListener("keydown",kt=>{var Ut;bt.commitKey=1;let Dt=-1;if(kt.key==="Escape"?Dt=0:kt.key!=="Enter"||this.data.multiLine?kt.key==="Tab"&&(bt.commitKey=3):Dt=2,Dt===-1)return;const{value:It}=kt.target;bt.lastCommittedValue!==It&&(bt.lastCommittedValue=It,bt.userValue=It,(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:It,willCommit:!0,commitKey:Dt,selStart:kt.target.selectionStart,selEnd:kt.target.selectionEnd}}))});const Ct=jt;jt=null,G.addEventListener("blur",kt=>{var It;if(!bt.focused||!kt.relatedTarget)return;bt.focused=!1;const{value:Dt}=kt.target;bt.userValue=Dt,bt.lastCommittedValue!==Dt&&((It=this.linkService.eventBus)==null||It.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Dt,willCommit:!0,commitKey:bt.commitKey,selStart:kt.target.selectionStart,selEnd:kt.target.selectionEnd}})),Ct(kt)}),(tt=this.data.actions)!=null&&tt.Keystroke&&G.addEventListener("beforeinput",kt=>{var ae;bt.lastCommittedValue=null;const{data:Dt,target:It}=kt,{value:Ut,selectionStart:qt,selectionEnd:Ht}=It;let re=qt,ie=Ht;switch(kt.inputType){case"deleteWordBackward":{const oe=Ut.substring(0,qt).match(/\w*[^\w]*$/);oe&&(re-=oe[0].length);break}case"deleteWordForward":{const oe=Ut.substring(qt).match(/^[^\w]*\w*/);oe&&(ie+=oe[0].length);break}case"deleteContentBackward":qt===Ht&&(re-=1);break;case"deleteContentForward":qt===Ht&&(ie+=1)}kt.preventDefault(),(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ut,change:Dt||"",willCommit:!1,selStart:re,selEnd:ie}})}),this._setEventListeners(G,bt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],kt=>kt.target.value)}if(jt&&G.addEventListener("blur",jt),this.data.comb){const Ct=(this.data.rect[2]-this.data.rect[0])/_t;G.classList.add("comb"),G.style.letterSpacing=`calc(${Ct}px * var(--scale-factor) - 1ch)`}}else G=document.createElement("div"),G.textContent=this.data.fieldValue,G.style.verticalAlign="middle",G.style.display="table-cell";return this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class M extends I{constructor(w){super(w,{isRenderable:!!w.data.hasOwnCanvas})}}class i extends I{constructor(w){super(w,{isRenderable:w.renderForms})}render(){const w=this.annotationStorage,k=this.data,G=k.id;let J=w.getValue(G,{value:k.exportValue===k.fieldValue}).value;typeof J=="string"&&(J=J!=="Off",w.setValue(G,{value:J})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const tt=document.createElement("input");return u.add(tt),tt.setAttribute("data-element-id",G),tt.disabled=k.readOnly,this._setRequired(tt,this.data.required),tt.type="checkbox",tt.name=k.fieldName,J&&tt.setAttribute("checked",!0),tt.setAttribute("exportValue",k.exportValue),tt.tabIndex=o,tt.addEventListener("change",at=>{const{name:ht,checked:_t}=at.target;for(const Et of this._getElementsByName(ht,G)){const bt=_t&&Et.exportValue===k.exportValue;Et.domElement&&(Et.domElement.checked=bt),w.setValue(Et.id,{value:bt})}w.setValue(G,{value:_t})}),tt.addEventListener("resetform",at=>{const ht=k.defaultFieldValue||"Off";at.target.checked=ht===k.exportValue}),this.enableScripting&&this.hasJSActions&&(tt.addEventListener("updatefromsandbox",at=>{const ht={value(_t){_t.target.checked=_t.detail.value!=="Off",w.setValue(G,{value:_t.target.checked})}};this._dispatchEventFromSandbox(ht,at)}),this._setEventListeners(tt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)),this._setBackgroundColor(tt),this._setDefaultPropertiesFromJS(tt),this.container.append(tt),this.container}}class e extends I{constructor(w){super(w,{isRenderable:w.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const w=this.annotationStorage,k=this.data,G=k.id;let J=w.getValue(G,{value:k.fieldValue===k.buttonValue}).value;typeof J=="string"&&(J=J!==k.buttonValue,w.setValue(G,{value:J}));const tt=document.createElement("input");if(u.add(tt),tt.setAttribute("data-element-id",G),tt.disabled=k.readOnly,this._setRequired(tt,this.data.required),tt.type="radio",tt.name=k.fieldName,J&&tt.setAttribute("checked",!0),tt.tabIndex=o,tt.addEventListener("change",at=>{const{name:ht,checked:_t}=at.target;for(const Et of this._getElementsByName(ht,G))w.setValue(Et.id,{value:!1});w.setValue(G,{value:_t})}),tt.addEventListener("resetform",at=>{const ht=k.defaultFieldValue;at.target.checked=ht!=null&&ht===k.buttonValue}),this.enableScripting&&this.hasJSActions){const at=k.buttonValue;tt.addEventListener("updatefromsandbox",ht=>{const _t={value:Et=>{const bt=at===Et.detail.value;for(const jt of this._getElementsByName(Et.target.name)){const Ct=bt&&jt.id===G;jt.domElement&&(jt.domElement.checked=Ct),w.setValue(jt.id,{value:Ct})}}};this._dispatchEventFromSandbox(_t,ht)}),this._setEventListeners(tt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ht=>ht.target.checked)}return this._setBackgroundColor(tt),this._setDefaultPropertiesFromJS(tt),this.container.append(tt),this.container}}class s extends _{constructor(w){super(w,{ignoreBorder:w.data.hasAppearance})}render(){const w=super.render();w.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(w.title=this.data.alternativeText);const k=w.lastChild;return this.enableScripting&&this.hasJSActions&&k&&(this._setDefaultPropertiesFromJS(k),k.addEventListener("updatefromsandbox",G=>{this._dispatchEventFromSandbox({},G)})),w}}class c extends I{constructor(w){super(w,{isRenderable:w.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const w=this.annotationStorage,k=this.data.id,G=w.getValue(k,{value:this.data.fieldValue}),J=document.createElement("select");u.add(J),J.setAttribute("data-element-id",k),J.disabled=this.data.readOnly,this._setRequired(J,this.data.required),J.name=this.data.fieldName,J.tabIndex=o;let tt=this.data.combo&&this.data.options.length>0;this.data.combo||(J.size=this.data.options.length,this.data.multiSelect&&(J.multiple=!0)),J.addEventListener("resetform",bt=>{const jt=this.data.defaultFieldValue;for(const Ct of J.options)Ct.selected=Ct.value===jt});for(const bt of this.data.options){const jt=document.createElement("option");jt.textContent=bt.displayValue,jt.value=bt.exportValue,G.value.includes(bt.exportValue)&&(jt.setAttribute("selected",!0),tt=!1),J.append(jt)}let at=null;if(tt){const bt=document.createElement("option");bt.value=" ",bt.setAttribute("hidden",!0),bt.setAttribute("selected",!0),J.prepend(bt),at=()=>{bt.remove(),J.removeEventListener("input",at),at=null},J.addEventListener("input",at)}const ht=bt=>{const jt=bt?"value":"textContent",{options:Ct,multiple:kt}=J;return kt?Array.prototype.filter.call(Ct,Dt=>Dt.selected).map(Dt=>Dt[jt]):Ct.selectedIndex===-1?null:Ct[Ct.selectedIndex][jt]};let _t=ht(!1);const Et=bt=>{const jt=bt.target.options;return Array.prototype.map.call(jt,Ct=>({displayValue:Ct.textContent,exportValue:Ct.value}))};return this.enableScripting&&this.hasJSActions?(J.addEventListener("updatefromsandbox",bt=>{const jt={value(Ct){at==null||at();const kt=Ct.detail.value,Dt=new Set(Array.isArray(kt)?kt:[kt]);for(const It of J.options)It.selected=Dt.has(It.value);w.setValue(k,{value:ht(!0)}),_t=ht(!1)},multipleSelection(Ct){J.multiple=!0},remove(Ct){const kt=J.options,Dt=Ct.detail.remove;kt[Dt].selected=!1,J.remove(Dt),kt.length>0&&Array.prototype.findIndex.call(kt,It=>It.selected)===-1&&(kt[0].selected=!0),w.setValue(k,{value:ht(!0),items:Et(Ct)}),_t=ht(!1)},clear(Ct){for(;J.length!==0;)J.remove(0);w.setValue(k,{value:null,items:[]}),_t=ht(!1)},insert(Ct){const{index:kt,displayValue:Dt,exportValue:It}=Ct.detail.insert,Ut=J.children[kt],qt=document.createElement("option");qt.textContent=Dt,qt.value=It,Ut?Ut.before(qt):J.append(qt),w.setValue(k,{value:ht(!0),items:Et(Ct)}),_t=ht(!1)},items(Ct){const{items:kt}=Ct.detail;for(;J.length!==0;)J.remove(0);for(const Dt of kt){const{displayValue:It,exportValue:Ut}=Dt,qt=document.createElement("option");qt.textContent=It,qt.value=Ut,J.append(qt)}J.options.length>0&&(J.options[0].selected=!0),w.setValue(k,{value:ht(!0),items:Et(Ct)}),_t=ht(!1)},indices(Ct){const kt=new Set(Ct.detail.indices);for(const Dt of Ct.target.options)Dt.selected=kt.has(Dt.index);w.setValue(k,{value:ht(!0)}),_t=ht(!1)},editable(Ct){Ct.target.disabled=!Ct.detail.editable}};this._dispatchEventFromSandbox(jt,bt)}),J.addEventListener("input",bt=>{var Ct;const jt=ht(!0);w.setValue(k,{value:jt}),bt.preventDefault(),(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:_t,changeEx:jt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(J,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],bt=>bt.target.value)):J.addEventListener("input",function(bt){w.setValue(k,{value:ht(!0)})}),this.data.combo&&this._setTextStyle(J),this._setBackgroundColor(J),this._setDefaultPropertiesFromJS(J),this.container.append(J),this.container}}class f extends v{constructor(w){const{data:k,elements:G}=w;super(w,{isRenderable:v._hasPopupData(k)}),this.elements=G}render(){this.container.classList.add("popupAnnotation");const w=new O({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),k=[];for(const G of this.elements)G.popup=w,k.push(G.data.id),G.addHighlightArea();return this.container.setAttribute("aria-controls",k.map(G=>`${r.AnnotationPrefix}${G}`).join(",")),this.container}}class O{constructor(w){$(this,Bt);$(this,Gt);$(this,Kt);$(this,Yt);$(this,D,null);$(this,z,Z(this,Bt,Ir).bind(this));$(this,Y,Z(this,Yt,ar).bind(this));$(this,it,Z(this,Kt,nr).bind(this));$(this,nt,Z(this,Gt,ke).bind(this));$(this,dt,null);$(this,ut,null);$(this,vt,null);$(this,yt,null);$(this,ft,null);$(this,mt,null);$(this,Mt,!1);$(this,At,null);$(this,Pt,null);$(this,Ft,null);$(this,Lt,null);$(this,Nt,!1);var Dt;let{container:k,color:G,elements:J,titleObj:tt,modificationDate:at,contentsObj:ht,richText:_t,parent:Et,rect:bt,parentRect:jt,open:Ct}=w;st(this,ut,k),st(this,Lt,tt),st(this,vt,ht),st(this,Ft,_t),st(this,ft,Et),st(this,dt,G),st(this,Pt,bt),st(this,mt,jt),st(this,yt,J);const kt=n.PDFDateString.toDateObject(at);kt&&st(this,D,Et.l10n.get("annotation_date_string",{date:kt.toLocaleDateString(),time:kt.toLocaleTimeString()})),this.trigger=J.flatMap(It=>It.getElementsToTriggerPopup());for(const It of this.trigger)It.addEventListener("click",a(this,nt)),It.addEventListener("mouseenter",a(this,it)),It.addEventListener("mouseleave",a(this,Y)),It.classList.add("popupTriggerArea");for(const It of J)(Dt=It.container)==null||Dt.addEventListener("keydown",a(this,z));a(this,ut).hidden=!0,Ct&&Z(this,Gt,ke).call(this)}render(){if(a(this,At))return;const{page:{view:w},viewport:{rawDims:{pageWidth:k,pageHeight:G,pageX:J,pageY:tt}}}=a(this,ft),at=st(this,At,document.createElement("div"));if(at.className="popup",a(this,dt)){const Ht=at.style.outlineColor=r.Util.makeHexColor(...a(this,dt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?at.style.backgroundColor=`color-mix(in srgb, ${Ht} 30%, white)`:at.style.backgroundColor=r.Util.makeHexColor(...a(this,dt).map(ie=>Math.floor(.7*(255-ie)+ie)))}const ht=document.createElement("span");ht.className="header";const _t=document.createElement("h1");if(ht.append(_t),{dir:_t.dir,str:_t.textContent}=a(this,Lt),at.append(ht),a(this,D)){const Ht=document.createElement("span");Ht.classList.add("popupDate"),a(this,D).then(re=>{Ht.textContent=re}),ht.append(Ht)}const Et=a(this,vt),bt=a(this,Ft);if(!(bt!=null&&bt.str)||Et!=null&&Et.str&&Et.str!==bt.str){const Ht=this._formatContents(Et);at.append(Ht)}else d.XfaLayer.render({xfaHtml:bt.html,intent:"richText",div:at}),at.lastChild.classList.add("richText","popupContent");let jt=!!a(this,mt),Ct=jt?a(this,mt):a(this,Pt);for(const Ht of a(this,yt))if(!Ct||r.Util.intersect(Ht.data.rect,Ct)!==null){Ct=Ht.data.rect,jt=!0;break}const kt=r.Util.normalizeRect([Ct[0],w[3]-Ct[1]+w[1],Ct[2],w[3]-Ct[3]+w[1]]),Dt=jt?Ct[2]-Ct[0]+5:0,It=kt[0]+Dt,Ut=kt[1],{style:qt}=a(this,ut);qt.left=100*(It-J)/k+"%",qt.top=100*(Ut-tt)/G+"%",a(this,ut).append(at)}_formatContents(w){let{str:k,dir:G}=w;const J=document.createElement("p");J.classList.add("popupContent"),J.dir=G;const tt=k.split(/(?:\r\n?|\n)/);for(let at=0,ht=tt.length;at<ht;++at){const _t=tt[at];J.append(document.createTextNode(_t)),at<ht-1&&J.append(document.createElement("br"))}return J}forceHide(){st(this,Nt,this.isVisible),a(this,Nt)&&(a(this,ut).hidden=!0)}maybeShow(){a(this,Nt)&&(st(this,Nt,!1),a(this,ut).hidden=!1)}get isVisible(){return a(this,ut).hidden===!1}}D=new WeakMap,z=new WeakMap,Y=new WeakMap,it=new WeakMap,nt=new WeakMap,dt=new WeakMap,ut=new WeakMap,vt=new WeakMap,yt=new WeakMap,ft=new WeakMap,mt=new WeakMap,Mt=new WeakMap,At=new WeakMap,Pt=new WeakMap,Ft=new WeakMap,Lt=new WeakMap,Nt=new WeakMap,Bt=new WeakSet,Ir=function(w){w.altKey||w.shiftKey||w.ctrlKey||w.metaKey||(w.key==="Enter"||w.key==="Escape"&&a(this,Mt))&&Z(this,Gt,ke).call(this)},Gt=new WeakSet,ke=function(){st(this,Mt,!a(this,Mt)),a(this,Mt)?(Z(this,Kt,nr).call(this),a(this,ut).addEventListener("click",a(this,nt)),a(this,ut).addEventListener("keydown",a(this,z))):(Z(this,Yt,ar).call(this),a(this,ut).removeEventListener("click",a(this,nt)),a(this,ut).removeEventListener("keydown",a(this,z)))},Kt=new WeakSet,nr=function(){a(this,At)||this.render(),this.isVisible?a(this,Mt)&&a(this,ut).classList.add("focused"):(a(this,ut).hidden=!1,a(this,ut).style.zIndex=parseInt(a(this,ut).style.zIndex)+1e3)},Yt=new WeakSet,ar=function(){a(this,ut).classList.remove("focused"),!a(this,Mt)&&this.isVisible&&(a(this,ut).hidden=!0,a(this,ut).style.zIndex=parseInt(a(this,ut).style.zIndex)-1e3)};class R extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0}),this.textContent=w.data.textContent,this.textPosition=w.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const w=document.createElement("div");w.classList.add("annotationTextContent"),w.setAttribute("role","comment");for(const k of this.textContent){const G=document.createElement("span");G.textContent=k,w.append(G)}this.container.append(w)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}l.FreeTextAnnotationElement=R;class K extends v{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});$(this,Vt,null)}render(){this.container.classList.add("lineAnnotation");const k=this.data,{width:G,height:J}=g(k.rect),tt=this.svgFactory.create(G,J,!0),at=st(this,Vt,this.svgFactory.createElement("svg:line"));return at.setAttribute("x1",k.rect[2]-k.lineCoordinates[0]),at.setAttribute("y1",k.rect[3]-k.lineCoordinates[1]),at.setAttribute("x2",k.rect[2]-k.lineCoordinates[2]),at.setAttribute("y2",k.rect[3]-k.lineCoordinates[3]),at.setAttribute("stroke-width",k.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),tt.append(at),this.container.append(tt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vt=new WeakMap;class X extends v{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});$(this,Zt,null)}render(){this.container.classList.add("squareAnnotation");const k=this.data,{width:G,height:J}=g(k.rect),tt=this.svgFactory.create(G,J,!0),at=k.borderStyle.width,ht=st(this,Zt,this.svgFactory.createElement("svg:rect"));return ht.setAttribute("x",at/2),ht.setAttribute("y",at/2),ht.setAttribute("width",G-at),ht.setAttribute("height",J-at),ht.setAttribute("stroke-width",at||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),tt.append(ht),this.container.append(tt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap;class et extends v{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});$(this,zt,null)}render(){this.container.classList.add("circleAnnotation");const k=this.data,{width:G,height:J}=g(k.rect),tt=this.svgFactory.create(G,J,!0),at=k.borderStyle.width,ht=st(this,zt,this.svgFactory.createElement("svg:ellipse"));return ht.setAttribute("cx",G/2),ht.setAttribute("cy",J/2),ht.setAttribute("rx",G/2-at/2),ht.setAttribute("ry",J/2-at/2),ht.setAttribute("stroke-width",at||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),tt.append(ht),this.container.append(tt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class lt extends v{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});$(this,Xt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:G,height:J}=g(k.rect),tt=this.svgFactory.create(G,J,!0);let at=[];for(const _t of k.vertices){const Et=_t.x-k.rect[0],bt=k.rect[3]-_t.y;at.push(Et+","+bt)}at=at.join(" ");const ht=st(this,Xt,this.svgFactory.createElement(this.svgElementName));return ht.setAttribute("points",at),ht.setAttribute("stroke-width",k.borderStyle.width||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),tt.append(ht),this.container.append(tt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xt=new WeakMap;class V extends lt{constructor(w){super(w),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class H extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class p extends v{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});$(this,ct,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:G,height:J}=g(k.rect),tt=this.svgFactory.create(G,J,!0);for(const at of k.inkLists){let ht=[];for(const Et of at){const bt=Et.x-k.rect[0],jt=k.rect[3]-Et.y;ht.push(`${bt},${jt}`)}ht=ht.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);a(this,ct).push(_t),_t.setAttribute("points",ht),_t.setAttribute("stroke-width",k.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),!k.popupRef&&this.hasPopupData&&this._createPopup(),tt.append(_t)}return this.container.append(tt),this.container}getElementsToTriggerPopup(){return a(this,ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}ct=new WeakMap,l.InkAnnotationElement=p;class y extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class S extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class N extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class q extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Q extends v{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}l.StampAnnotationElement=Q;class W extends v{constructor(k){var tt;super(k,{isRenderable:!0});$(this,Tt);$(this,gt,null);const{filename:G,content:J}=this.data.file;this.filename=(0,n.getFilenameFromUrl)(G,!0),this.content=J,(tt=this.linkService.eventBus)==null||tt.dispatch("fileattachmentannotation",{source:this,filename:G,content:J})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:k,data:G}=this;let J;G.hasAppearance||G.fillAlpha===0?J=document.createElement("div"):(J=document.createElement("img"),J.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(G.name)?"paperclip":"pushpin"}.svg`,G.fillAlpha&&G.fillAlpha<1&&(J.style=`filter: opacity(${Math.round(100*G.fillAlpha)}%);`)),J.addEventListener("dblclick",Z(this,Tt,or).bind(this)),st(this,gt,J);const{isMac:tt}=r.FeatureTest.platform;return k.addEventListener("keydown",at=>{at.key==="Enter"&&(tt?at.metaKey:at.ctrlKey)&&Z(this,Tt,or).call(this)}),!G.popupRef&&this.hasPopupData?this._createPopup():J.classList.add("popupTriggerArea"),k.append(J),k}getElementsToTriggerPopup(){return a(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap,Tt=new WeakSet,or=function(){var k;(k=this.downloadManager)==null||k.openOrDownloadData(this.container,this.content,this.filename)},l.AnnotationLayer=(pt=class{constructor(w){$(this,St);$(this,Rt);$(this,rt,null);$(this,ot,null);$(this,xt,new Map);let{div:k,accessibilityManager:G,annotationCanvasMap:J,l10n:tt,page:at,viewport:ht}=w;this.div=k,st(this,rt,G),st(this,ot,J),this.l10n=tt,this.page=at,this.viewport=ht,this.zIndex=0,this.l10n||(this.l10n=b.NullL10n)}async render(w){const{annotations:k}=w,G=this.div;(0,n.setLayerDimensions)(G,this.viewport);const J=new Map,tt={data:null,layer:G,linkService:w.linkService,downloadManager:w.downloadManager,imageResourcesPath:w.imageResourcesPath||"",renderForms:w.renderForms!==!1,svgFactory:new n.DOMSVGFactory,annotationStorage:w.annotationStorage||new h.AnnotationStorage,enableScripting:w.enableScripting===!0,hasJSActions:w.hasJSActions,fieldObjects:w.fieldObjects,parent:this,elements:null};for(const at of k){if(at.noHTML)continue;const ht=at.annotationType===r.AnnotationType.POPUP;if(ht){const bt=J.get(at.id);if(!bt)continue;tt.elements=bt}else{const{width:bt,height:jt}=g(at.rect);if(bt<=0||jt<=0)continue}tt.data=at;const _t=A.create(tt);if(!_t.isRenderable)continue;if(!ht&&at.popupRef){const bt=J.get(at.popupRef);bt?bt.push(_t):J.set(at.popupRef,[_t])}_t.annotationEditorType>0&&a(this,xt).set(_t.data.id,_t);const Et=_t.render();at.hidden&&(Et.style.visibility="hidden"),Z(this,St,Or).call(this,Et,at.id)}Z(this,Rt,lr).call(this),await this.l10n.translate(G)}update(w){let{viewport:k}=w;const G=this.div;this.viewport=k,(0,n.setLayerDimensions)(G,{rotation:k.rotation}),Z(this,Rt,lr).call(this),G.hidden=!1}getEditableAnnotations(){return Array.from(a(this,xt).values())}getEditableAnnotation(w){return a(this,xt).get(w)}},rt=new WeakMap,ot=new WeakMap,xt=new WeakMap,St=new WeakSet,Or=function(w,k){var J;const G=w.firstChild||w;G.id=`${r.AnnotationPrefix}${k}`,this.div.append(w),(J=a(this,rt))==null||J.moveElementInDOM(this.div,w,G,!1)},Rt=new WeakSet,lr=function(){if(!a(this,ot))return;const w=this.div;for(const[k,G]of a(this,ot)){const J=w.querySelector(`[data-annotation-id="${k}"]`);if(!J)continue;const{firstChild:tt}=J;tt?tt.nodeName==="CANVAS"?tt.replaceWith(G):tt.before(G):J.append(G)}a(this,ot).clear()},pt)},(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0;function t(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}function r(n){return Math.max(0,Math.min(255,255*n))}l.ColorConverters=class{static CMYK_G(h){let[m,b,d,o]=h;return["G",1-Math.min(1,.3*m+.59*d+.11*b+o)]}static G_CMYK(h){let[m]=h;return["CMYK",0,0,0,1-m]}static G_RGB(h){let[m]=h;return["RGB",m,m,m]}static G_rgb(h){let[m]=h;return m=r(m),[m,m,m]}static G_HTML(h){let[m]=h;const b=t(m);return`#${b}${b}${b}`}static RGB_G(h){let[m,b,d]=h;return["G",.3*m+.59*b+.11*d]}static RGB_rgb(h){return h.map(r)}static RGB_HTML(h){return`#${h.map(t).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(h){let[m,b,d,o]=h;return["RGB",1-Math.min(1,m+o),1-Math.min(1,d+o),1-Math.min(1,b+o)]}static CMYK_rgb(h){let[m,b,d,o]=h;return[r(1-Math.min(1,m+o)),r(1-Math.min(1,d+o)),r(1-Math.min(1,b+o))]}static CMYK_HTML(h){const m=this.CMYK_RGB(h).slice(1);return this.RGB_HTML(m)}static RGB_CMYK(h){let[m,b,d]=h;const o=1-m,u=1-b,g=1-d;return["CMYK",o,u,g,Math.min(o,u,g)]}}},(x,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NullL10n=void 0,l.getL10nFallback=r;const t={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative",print_progress_percent:"{{progress}}%"};function r(h,m){switch(h){case"find_match_count":h=`find_match_count[${m.total===1?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${m.limit===1?"one":"other"}]`}return t[h]||""}const n={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(h){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return function(d,o){return o?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(u,g)=>g in o?o[g]:"{{"+g+"}}"):d}(arguments.length>2&&arguments[2]!==void 0?arguments[2]:r(h,m),m)},async translate(h){}};l.NullL10n=n},(x,l,t)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0,t(89);var r=t(194);l.XfaLayer=class{static setupStorage(h,m,b,d,o){const u=d.getValue(m,{value:null});switch(b.name){case"textarea":if(u.value!==null&&(h.textContent=u.value),o==="print")break;h.addEventListener("input",g=>{d.setValue(m,{value:g.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(u.value===b.attributes.xfaOn?h.setAttribute("checked",!0):u.value===b.attributes.xfaOff&&h.removeAttribute("checked"),o==="print")break;h.addEventListener("change",g=>{d.setValue(m,{value:g.target.checked?g.target.getAttribute("xfaOn"):g.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&h.setAttribute("value",u.value),o==="print")break;h.addEventListener("input",g=>{d.setValue(m,{value:g.target.value})})}break;case"select":if(u.value!==null){h.setAttribute("value",u.value);for(const g of b.children)g.attributes.value===u.value?g.attributes.selected=!0:g.attributes.hasOwnProperty("selected")&&delete g.attributes.selected}h.addEventListener("input",g=>{const A=g.target.options,v=A.selectedIndex===-1?"":A[A.selectedIndex].value;d.setValue(m,{value:v})})}}static setAttributes(h){let{html:m,element:b,storage:d=null,intent:o,linkService:u}=h;const{attributes:g}=b,A=m instanceof HTMLAnchorElement;g.type==="radio"&&(g.name=`${g.name}-${o}`);for(const[v,_]of Object.entries(g))if(_!=null)switch(v){case"class":_.length&&m.setAttribute(v,_.join(" "));break;case"dataId":break;case"id":m.setAttribute("data-element-id",_);break;case"style":Object.assign(m.style,_);break;case"textContent":m.textContent=_;break;default:(!A||v!=="href"&&v!=="newWindow")&&m.setAttribute(v,_)}A&&u.addLinkAttributes(m,g.href,g.newWindow),d&&g.dataId&&this.setupStorage(m,g.dataId,b,d)}static render(h){var _;const m=h.annotationStorage,b=h.linkService,d=h.xfaHtml,o=h.intent||"display",u=document.createElement(d.name);d.attributes&&this.setAttributes({html:u,element:d,intent:o,linkService:b});const g=[[d,-1,u]],A=h.div;if(A.append(u),h.viewport){const P=`matrix(${h.viewport.transform.join(",")})`;A.style.transform=P}o!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");const v=[];for(;g.length>0;){const[P,I,T]=g.at(-1);if(I+1===P.children.length){g.pop();continue}const M=P.children[++g.at(-1)[1]];if(M===null)continue;const{name:i}=M;if(i==="#text"){const s=document.createTextNode(M.value);v.push(s),T.append(s);continue}const e=(_=M==null?void 0:M.attributes)!=null&&_.xmlns?document.createElementNS(M.attributes.xmlns,i):document.createElement(i);if(T.append(e),M.attributes&&this.setAttributes({html:e,element:M,storage:m,intent:o,linkService:b}),M.children&&M.children.length>0)g.push([M,-1,e]);else if(M.value){const s=document.createTextNode(M.value);r.XfaText.shouldBuildText(i)&&v.push(s),e.append(s)}}for(const P of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))P.setAttribute("readOnly",!0);return{textDivs:v}}static update(h){const m=`matrix(${h.viewport.transform.join(",")})`;h.div.style.transform=m,h.div.hidden=!1}}},(x,l,t)=>{var o,u,g,A,v,_,P,I,T,M,i,e,s,c,f,Lr,R,Nr,X,jr,lt,Br,H,cr,y,Ur,N,hr,Q,Wr,L,zr,F,qr,B,Hr,D,Vr,Y,ne,nt,dr,ut,Me,yt,Re,mt,ue,At,ur,Ft,Fe,Nt,Gr,ee,pr,Jt,$r,$t,Xr,Qt,fr,Zt,De,Xt,pe;Object.defineProperty(l,"__esModule",{value:!0}),l.InkEditor=void 0,t(89),t(2);var r=t(1),n=t(164),h=t(198),m=t(168),b=t(165);const gt=class gt extends n.AnnotationEditor{constructor(rt){super({...rt,name:"inkEditor"});$(this,f);$(this,R);$(this,X);$(this,lt);$(this,H);$(this,y);$(this,N);$(this,Q);$(this,L);$(this,F);$(this,B);$(this,D);$(this,Y);$(this,nt);$(this,ut);$(this,yt);$(this,mt);$(this,At);$(this,Ft);$(this,$t);$(this,Qt);$(this,Zt);$(this,Xt);$(this,o,0);$(this,u,0);$(this,g,this.canvasPointermove.bind(this));$(this,A,this.canvasPointerleave.bind(this));$(this,v,this.canvasPointerup.bind(this));$(this,_,this.canvasPointerdown.bind(this));$(this,P,new Path2D);$(this,I,!1);$(this,T,!1);$(this,M,!1);$(this,i,null);$(this,e,0);$(this,s,0);$(this,c,null);this.color=rt.color||null,this.thickness=rt.thickness||null,this.opacity=rt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(rt){n.AnnotationEditor.initialize(rt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(rt,ot){switch(rt){case r.AnnotationEditorParamsType.INK_THICKNESS:gt._defaultThickness=ot;break;case r.AnnotationEditorParamsType.INK_COLOR:gt._defaultColor=ot;break;case r.AnnotationEditorParamsType.INK_OPACITY:gt._defaultOpacity=ot/100}}updateParams(rt,ot){switch(rt){case r.AnnotationEditorParamsType.INK_THICKNESS:Z(this,f,Lr).call(this,ot);break;case r.AnnotationEditorParamsType.INK_COLOR:Z(this,R,Nr).call(this,ot);break;case r.AnnotationEditorParamsType.INK_OPACITY:Z(this,X,jr).call(this,ot)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,gt._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,gt._defaultColor||n.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*gt._defaultOpacity)]]}get propertiesToUpdate(){var rt;return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||gt._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||gt._defaultColor||n.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((rt=this.opacity)!=null?rt:gt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Z(this,ut,Me).call(this),Z(this,yt,Re).call(this)),this.isAttachedToDOM||(this.parent.add(this),Z(this,mt,ue).call(this)),Z(this,Xt,pe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,i).disconnect(),st(this,i,null),super.remove())}setParent(rt){!this.parent&&rt?this._uiManager.removeShouldRescale(this):this.parent&&rt===null&&this._uiManager.addShouldRescale(this),super.setParent(rt)}onScaleChanging(){const[rt,ot]=this.parentDimensions,xt=this.width*rt,St=this.height*ot;this.setDimensions(xt,St)}enableEditMode(){!a(this,I)&&this.canvas!==null&&(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,_)))}disableEditMode(){this.isInEditMode()&&this.canvas!==null&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,_)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,I)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),st(this,I,!0),this.div.classList.add("disabled"),Z(this,Xt,pe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(rt){this._focusEventsAllowed&&(super.focusin(rt),this.enableEditMode())}canvasPointerdown(rt){rt.button===0&&this.isInEditMode()&&!a(this,I)&&(this.setInForeground(),rt.preventDefault(),rt.type!=="mouse"&&this.div.focus(),Z(this,y,Ur).call(this,rt.offsetX,rt.offsetY))}canvasPointermove(rt){rt.preventDefault(),Z(this,N,hr).call(this,rt.offsetX,rt.offsetY)}canvasPointerup(rt){rt.preventDefault(),Z(this,nt,dr).call(this,rt)}canvasPointerleave(rt){Z(this,nt,dr).call(this,rt)}get isResizable(){return!this.isEmpty()&&a(this,I)}render(){if(this.div)return this.div;let rt,ot;this.width&&(rt=this.x,ot=this.y),super.render(),n.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Ot=>{var pt;return(pt=this.div)==null?void 0:pt.setAttribute("aria-label",Ot)});const[xt,St,wt,Rt]=Z(this,lt,Br).call(this);if(this.setAt(xt,St,0,0),this.setDims(wt,Rt),Z(this,ut,Me).call(this),this.width){const[Ot,pt]=this.parentDimensions;this.setAspectRatio(this.width*Ot,this.height*pt),this.setAt(rt*Ot,ot*pt,this.width*Ot,this.height*pt),st(this,M,!0),Z(this,mt,ue).call(this),this.setDims(this.width*Ot,this.height*pt),Z(this,Y,ne).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Z(this,yt,Re).call(this),this.div}setDimensions(rt,ot){const xt=Math.round(rt),St=Math.round(ot);if(a(this,e)===xt&&a(this,s)===St)return;st(this,e,xt),st(this,s,St),this.canvas.style.visibility="hidden";const[wt,Rt]=this.parentDimensions;this.width=rt/wt,this.height=ot/Rt,this.fixAndSetPosition(),a(this,I)&&Z(this,At,ur).call(this,rt,ot),Z(this,mt,ue).call(this),Z(this,Y,ne).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(rt,ot,xt){var at,ht,_t;if(rt instanceof h.InkAnnotationElement)return null;const St=super.deserialize(rt,ot,xt);St.thickness=rt.thickness,St.color=r.Util.makeHexColor(...rt.color),St.opacity=rt.opacity;const[wt,Rt]=St.pageDimensions,Ot=St.width*wt,pt=St.height*Rt,j=St.parentScale,w=rt.thickness/2;st(St,I,!0),st(St,e,Math.round(Ot)),st(St,s,Math.round(pt));const{paths:k,rect:G,rotation:J}=rt;for(let{bezier:Et}of k){Et=Z(at=gt,Jt,$r).call(at,Et,G,J);const bt=[];St.paths.push(bt);let jt=j*(Et[0]-w),Ct=j*(Et[1]-w);for(let Dt=2,It=Et.length;Dt<It;Dt+=6){const Ut=j*(Et[Dt]-w),qt=j*(Et[Dt+1]-w),Ht=j*(Et[Dt+2]-w),re=j*(Et[Dt+3]-w),ie=j*(Et[Dt+4]-w),ae=j*(Et[Dt+5]-w);bt.push([[jt,Ct],[Ut,qt],[Ht,re],[ie,ae]]),jt=ie,Ct=ae}const kt=Z(this,Nt,Gr).call(this,bt);St.bezierPath2D.push(kt)}const tt=Z(ht=St,Qt,fr).call(ht);return st(St,u,Math.max(n.AnnotationEditor.MIN_SIZE,tt[2]-tt[0])),st(St,o,Math.max(n.AnnotationEditor.MIN_SIZE,tt[3]-tt[1])),Z(_t=St,At,ur).call(_t,Ot,pt),St}serialize(){if(this.isEmpty())return null;const rt=this.getRect(0,0),ot=n.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:ot,thickness:this.thickness,opacity:this.opacity,paths:Z(this,$t,Xr).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,rt),pageIndex:this.pageIndex,rect:rt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};o=new WeakMap,u=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,_=new WeakMap,P=new WeakMap,I=new WeakMap,T=new WeakMap,M=new WeakMap,i=new WeakMap,e=new WeakMap,s=new WeakMap,c=new WeakMap,f=new WeakSet,Lr=function(rt){const ot=this.thickness;this.addCommands({cmd:()=>{this.thickness=rt,Z(this,Xt,pe).call(this)},undo:()=>{this.thickness=ot,Z(this,Xt,pe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,Nr=function(rt){const ot=this.color;this.addCommands({cmd:()=>{this.color=rt,Z(this,Y,ne).call(this)},undo:()=>{this.color=ot,Z(this,Y,ne).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,jr=function(rt){rt/=100;const ot=this.opacity;this.addCommands({cmd:()=>{this.opacity=rt,Z(this,Y,ne).call(this)},undo:()=>{this.opacity=ot,Z(this,Y,ne).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},lt=new WeakSet,Br=function(){const{parentRotation:rt,parentDimensions:[ot,xt]}=this;switch(rt){case 90:return[0,xt,xt,ot];case 180:return[ot,xt,ot,xt];case 270:return[ot,0,xt,ot];default:return[0,0,ot,xt]}},H=new WeakSet,cr=function(){const{ctx:rt,color:ot,opacity:xt,thickness:St,parentScale:wt,scaleFactor:Rt}=this;rt.lineWidth=St*wt/Rt,rt.lineCap="round",rt.lineJoin="round",rt.miterLimit=10,rt.strokeStyle=`${ot}${(0,b.opacityToHex)(xt)}`},y=new WeakSet,Ur=function(rt,ot){var xt;this.canvas.addEventListener("contextmenu",m.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,A)),this.canvas.addEventListener("pointermove",a(this,g)),this.canvas.addEventListener("pointerup",a(this,v)),this.canvas.removeEventListener("pointerdown",a(this,_)),this.isEditing=!0,a(this,M)||(st(this,M,!0),Z(this,mt,ue).call(this),this.thickness||(this.thickness=gt._defaultThickness),this.color||(this.color=gt._defaultColor||n.AnnotationEditor._defaultLineColor),(xt=this.opacity)!=null||(this.opacity=gt._defaultOpacity)),this.currentPath.push([rt,ot]),st(this,T,!1),Z(this,H,cr).call(this),st(this,c,()=>{Z(this,F,qr).call(this),a(this,c)&&window.requestAnimationFrame(a(this,c))}),window.requestAnimationFrame(a(this,c))},N=new WeakSet,hr=function(rt,ot){const[xt,St]=this.currentPath.at(-1);if(this.currentPath.length>1&&rt===xt&&ot===St)return;const wt=this.currentPath;let Rt=a(this,P);wt.push([rt,ot]),st(this,T,!0),wt.length<=2?(Rt.moveTo(...wt[0]),Rt.lineTo(rt,ot)):(wt.length===3&&(st(this,P,Rt=new Path2D),Rt.moveTo(...wt[0])),Z(this,B,Hr).call(this,Rt,...wt.at(-3),...wt.at(-2),rt,ot))},Q=new WeakSet,Wr=function(){if(this.currentPath.length===0)return;const rt=this.currentPath.at(-1);a(this,P).lineTo(...rt)},L=new WeakSet,zr=function(rt,ot){st(this,c,null),rt=Math.min(Math.max(rt,0),this.canvas.width),ot=Math.min(Math.max(ot,0),this.canvas.height),Z(this,N,hr).call(this,rt,ot),Z(this,Q,Wr).call(this);let xt;if(this.currentPath.length!==1)xt=Z(this,D,Vr).call(this);else{const Rt=[rt,ot];xt=[[Rt,Rt.slice(),Rt.slice(),Rt]]}const St=a(this,P),wt=this.currentPath;this.currentPath=[],st(this,P,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(wt),this.paths.push(xt),this.bezierPath2D.push(St),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Z(this,ut,Me).call(this),Z(this,yt,Re).call(this)),Z(this,Xt,pe).call(this))},mustExec:!0})},F=new WeakSet,qr=function(){if(!a(this,T))return;st(this,T,!1);const rt=Math.ceil(this.thickness*this.parentScale),ot=this.currentPath.slice(-3),xt=ot.map(Rt=>Rt[0]),St=ot.map(Rt=>Rt[1]),{ctx:wt}=(Math.min(...xt),Math.max(...xt),Math.min(...St),Math.max(...St),this);wt.save(),wt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Rt of this.bezierPath2D)wt.stroke(Rt);wt.stroke(a(this,P)),wt.restore()},B=new WeakSet,Hr=function(rt,ot,xt,St,wt,Rt,Ot){const pt=(ot+St)/2,j=(xt+wt)/2,w=(St+Rt)/2,k=(wt+Ot)/2;rt.bezierCurveTo(pt+2*(St-pt)/3,j+2*(wt-j)/3,w+2*(St-w)/3,k+2*(wt-k)/3,w,k)},D=new WeakSet,Vr=function(){const rt=this.currentPath;if(rt.length<=2)return[[rt[0],rt[0],rt.at(-1),rt.at(-1)]];const ot=[];let xt,[St,wt]=rt[0];for(xt=1;xt<rt.length-2;xt++){const[G,J]=rt[xt],[tt,at]=rt[xt+1],ht=(G+tt)/2,_t=(J+at)/2,Et=[St+2*(G-St)/3,wt+2*(J-wt)/3],bt=[ht+2*(G-ht)/3,_t+2*(J-_t)/3];ot.push([[St,wt],Et,bt,[ht,_t]]),[St,wt]=[ht,_t]}const[Rt,Ot]=rt[xt],[pt,j]=rt[xt+1],w=[St+2*(Rt-St)/3,wt+2*(Ot-wt)/3],k=[pt+2*(Rt-pt)/3,j+2*(Ot-j)/3];return ot.push([[St,wt],w,k,[pt,j]]),ot},Y=new WeakSet,ne=function(){if(this.isEmpty()){Z(this,Ft,Fe).call(this);return}Z(this,H,cr).call(this);const{canvas:rt,ctx:ot}=this;ot.setTransform(1,0,0,1,0,0),ot.clearRect(0,0,rt.width,rt.height),Z(this,Ft,Fe).call(this);for(const xt of this.bezierPath2D)ot.stroke(xt)},nt=new WeakSet,dr=function(rt){this.canvas.removeEventListener("pointerleave",a(this,A)),this.canvas.removeEventListener("pointermove",a(this,g)),this.canvas.removeEventListener("pointerup",a(this,v)),this.canvas.addEventListener("pointerdown",a(this,_)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",m.noContextMenu)},10),Z(this,L,zr).call(this,rt.offsetX,rt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ut=new WeakSet,Me=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",n.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(rt=>{var ot;return(ot=this.canvas)==null?void 0:ot.setAttribute("aria-label",rt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},yt=new WeakSet,Re=function(){st(this,i,new ResizeObserver(rt=>{const ot=rt[0].contentRect;ot.width&&ot.height&&this.setDimensions(ot.width,ot.height)})),a(this,i).observe(this.div)},mt=new WeakSet,ue=function(){if(!a(this,M))return;const[rt,ot]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*rt),this.canvas.height=Math.ceil(this.height*ot),Z(this,Ft,Fe).call(this)},At=new WeakSet,ur=function(rt,ot){const xt=Z(this,Zt,De).call(this),St=(rt-xt)/a(this,u),wt=(ot-xt)/a(this,o);this.scaleFactor=Math.min(St,wt)},Ft=new WeakSet,Fe=function(){const rt=Z(this,Zt,De).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+rt,this.translationY*this.scaleFactor+rt)},Nt=new WeakSet,Gr=function(rt){const ot=new Path2D;for(let xt=0,St=rt.length;xt<St;xt++){const[wt,Rt,Ot,pt]=rt[xt];xt===0&&ot.moveTo(...wt),ot.bezierCurveTo(Rt[0],Rt[1],Ot[0],Ot[1],pt[0],pt[1])}return ot},ee=new WeakSet,pr=function(rt,ot,xt){const[St,wt,Rt,Ot]=ot;switch(xt){case 0:for(let pt=0,j=rt.length;pt<j;pt+=2)rt[pt]+=St,rt[pt+1]=Ot-rt[pt+1];break;case 90:for(let pt=0,j=rt.length;pt<j;pt+=2){const w=rt[pt];rt[pt]=rt[pt+1]+St,rt[pt+1]=w+wt}break;case 180:for(let pt=0,j=rt.length;pt<j;pt+=2)rt[pt]=Rt-rt[pt],rt[pt+1]+=wt;break;case 270:for(let pt=0,j=rt.length;pt<j;pt+=2){const w=rt[pt];rt[pt]=Rt-rt[pt+1],rt[pt+1]=Ot-w}break;default:throw new Error("Invalid rotation")}return rt},Jt=new WeakSet,$r=function(rt,ot,xt){const[St,wt,Rt,Ot]=ot;switch(xt){case 0:for(let pt=0,j=rt.length;pt<j;pt+=2)rt[pt]-=St,rt[pt+1]=Ot-rt[pt+1];break;case 90:for(let pt=0,j=rt.length;pt<j;pt+=2){const w=rt[pt];rt[pt]=rt[pt+1]-wt,rt[pt+1]=w-St}break;case 180:for(let pt=0,j=rt.length;pt<j;pt+=2)rt[pt]=Rt-rt[pt],rt[pt+1]-=wt;break;case 270:for(let pt=0,j=rt.length;pt<j;pt+=2){const w=rt[pt];rt[pt]=Ot-rt[pt+1],rt[pt+1]=Rt-w}break;default:throw new Error("Invalid rotation")}return rt},$t=new WeakSet,Xr=function(rt,ot,xt,St){var j,w;const wt=[],Rt=this.thickness/2,Ot=rt*ot+Rt,pt=rt*xt+Rt;for(const k of this.paths){const G=[],J=[];for(let tt=0,at=k.length;tt<at;tt++){const[ht,_t,Et,bt]=k[tt],jt=rt*ht[0]+Ot,Ct=rt*ht[1]+pt,kt=rt*_t[0]+Ot,Dt=rt*_t[1]+pt,It=rt*Et[0]+Ot,Ut=rt*Et[1]+pt,qt=rt*bt[0]+Ot,Ht=rt*bt[1]+pt;tt===0&&(G.push(jt,Ct),J.push(jt,Ct)),G.push(kt,Dt,It,Ut,qt,Ht),J.push(kt,Dt),tt===at-1&&J.push(qt,Ht)}wt.push({bezier:Z(j=gt,ee,pr).call(j,G,St,this.rotation),points:Z(w=gt,ee,pr).call(w,J,St,this.rotation)})}return wt},Qt=new WeakSet,fr=function(){let rt=1/0,ot=-1/0,xt=1/0,St=-1/0;for(const wt of this.paths)for(const[Rt,Ot,pt,j]of wt){const w=r.Util.bezierBoundingBox(...Rt,...Ot,...pt,...j);rt=Math.min(rt,w[0]),xt=Math.min(xt,w[1]),ot=Math.max(ot,w[2]),St=Math.max(St,w[3])}return[rt,xt,ot,St]},Zt=new WeakSet,De=function(){return a(this,I)?Math.ceil(this.thickness*this.parentScale):0},Xt=new WeakSet,pe=function(){let rt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isEmpty())return;if(!a(this,I)){Z(this,Y,ne).call(this);return}const ot=Z(this,Qt,fr).call(this),xt=Z(this,Zt,De).call(this);st(this,u,Math.max(n.AnnotationEditor.MIN_SIZE,ot[2]-ot[0])),st(this,o,Math.max(n.AnnotationEditor.MIN_SIZE,ot[3]-ot[1]));const St=Math.ceil(xt+a(this,u)*this.scaleFactor),wt=Math.ceil(xt+a(this,o)*this.scaleFactor),[Rt,Ot]=this.parentDimensions;this.width=St/Rt,this.height=wt/Ot,this.setAspectRatio(St,wt);const pt=this.translationX,j=this.translationY;this.translationX=-ot[0],this.translationY=-ot[1],Z(this,mt,ue).call(this),Z(this,Y,ne).call(this),st(this,e,St),st(this,s,wt),this.setDims(St,wt);const w=rt?xt/this.scaleFactor/2:0;this.translate(pt-this.translationX-w,j-this.translationY-w)},$(gt,Nt),$(gt,ee),$(gt,Jt),te(gt,"_defaultColor",null),te(gt,"_defaultOpacity",1),te(gt,"_defaultThickness",1),te(gt,"_type","ink");let d=gt;l.InkEditor=d},(x,l,t)=>{var d,o,u,g,A,v,_,P,I,T,M,_e,e,ye,c,Ie,O,gr,K,Yr,et,Kr,V,mr,p,Oe,S,Jr;Object.defineProperty(l,"__esModule",{value:!0}),l.StampEditor=void 0,t(149),t(152);var r=t(1),n=t(164),h=t(168),m=t(198);const q=class q extends n.AnnotationEditor{constructor(L){super({...L,name:"stampEditor"});$(this,M);$(this,e);$(this,c);$(this,O);$(this,K);$(this,et);$(this,V);$(this,p);$(this,S);$(this,d,null);$(this,o,null);$(this,u,null);$(this,g,null);$(this,A,null);$(this,v,null);$(this,_,null);$(this,P,null);$(this,I,!1);$(this,T,!1);st(this,g,L.bitmapUrl),st(this,A,L.bitmapFile)}static initialize(L){n.AnnotationEditor.initialize(L)}static get supportedTypes(){return(0,r.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(L=>`image/${L}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(L){return this.supportedTypes.includes(L)}static paste(L,C){C.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:L.getAsFile()})}remove(){var L,C;a(this,o)&&(st(this,d,null),this._uiManager.imageManager.deleteId(a(this,o)),(L=a(this,v))==null||L.remove(),st(this,v,null),(C=a(this,_))==null||C.disconnect(),st(this,_,null)),super.remove()}rebuild(){this.parent?(super.rebuild(),this.div!==null&&(a(this,o)&&Z(this,c,Ie).call(this),this.isAttachedToDOM||this.parent.add(this))):a(this,o)&&Z(this,c,Ie).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,u)||a(this,d)||a(this,g)||a(this,A))}get isResizable(){return!0}render(){if(this.div)return this.div;let L,C;if(this.width&&(L=this.x,C=this.y),super.render(),this.div.hidden=!0,a(this,d)?Z(this,O,gr).call(this):Z(this,c,Ie).call(this),this.width){const[F,E]=this.parentDimensions;this.setAt(L*F,C*E,this.width*F,this.height*E)}return this.div}static deserialize(L,C,F){if(L instanceof m.StampAnnotationElement)return null;const E=super.deserialize(L,C,F),{rect:B,bitmapUrl:U,bitmapId:D,isSvg:z,accessibilityData:Y}=L;D&&F.imageManager.isValidId(D)?st(E,o,D):st(E,g,U),st(E,I,z);const[it,nt]=E.pageDimensions;return E.width=(B[2]-B[0])/it,E.height=(B[3]-B[1])/nt,Y&&(E.altTextData=Y),E}serialize(){let L=arguments.length>0&&arguments[0]!==void 0&&arguments[0],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.isEmpty())return null;const F={annotationType:r.AnnotationEditorType.STAMP,bitmapId:a(this,o),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,I),structTreeParentId:this._structTreeParentId};if(L)return F.bitmapUrl=Z(this,p,Oe).call(this,!0),F.accessibilityData=this.altTextData,F;const{decorative:E,altText:B}=this.altTextData;if(!E&&B&&(F.accessibilityData={type:"Figure",alt:B}),C===null)return F;C.stamps||(C.stamps=new Map);const U=a(this,I)?(F.rect[2]-F.rect[0])*(F.rect[3]-F.rect[1]):null;if(C.stamps.has(a(this,o))){if(a(this,I)){const D=C.stamps.get(a(this,o));U>D.area&&(D.area=U,D.serialized.bitmap.close(),D.serialized.bitmap=Z(this,p,Oe).call(this,!1))}}else C.stamps.set(a(this,o),{area:U,serialized:F}),F.bitmap=Z(this,p,Oe).call(this,!1);return F}};d=new WeakMap,o=new WeakMap,u=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,_=new WeakMap,P=new WeakMap,I=new WeakMap,T=new WeakMap,M=new WeakSet,_e=function(L){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];L?(st(this,d,L.bitmap),C||(st(this,o,L.id),st(this,I,L.isSvg)),Z(this,O,gr).call(this)):this.remove()},e=new WeakSet,ye=function(){st(this,u,null),this._uiManager.enableWaiting(!1),a(this,v)&&this.div.focus()},c=new WeakSet,Ie=function(){if(a(this,o)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,o)).then(C=>Z(this,M,_e).call(this,C,!0)).finally(()=>Z(this,e,ye).call(this));return}if(a(this,g)){const C=a(this,g);st(this,g,null),this._uiManager.enableWaiting(!0),st(this,u,this._uiManager.imageManager.getFromUrl(C).then(F=>Z(this,M,_e).call(this,F)).finally(()=>Z(this,e,ye).call(this)));return}if(a(this,A)){const C=a(this,A);st(this,A,null),this._uiManager.enableWaiting(!0),st(this,u,this._uiManager.imageManager.getFromFile(C).then(F=>Z(this,M,_e).call(this,F)).finally(()=>Z(this,e,ye).call(this)));return}const L=document.createElement("input");L.type="file",L.accept=q.supportedTypesStr,st(this,u,new Promise(C=>{L.addEventListener("change",async()=>{if(L.files&&L.files.length!==0){this._uiManager.enableWaiting(!0);const F=await this._uiManager.imageManager.getFromFile(L.files[0]);Z(this,M,_e).call(this,F)}else this.remove();C()}),L.addEventListener("cancel",()=>{this.remove(),C()})}).finally(()=>Z(this,e,ye).call(this))),L.click()},O=new WeakSet,gr=function(){const{div:L}=this;let{width:C,height:F}=a(this,d);const[E,B]=this.pageDimensions,U=.75;if(this.width)C=this.width*E,F=this.height*B;else if(C>U*E||F>U*B){const it=Math.min(U*E/C,U*B/F);C*=it,F*=it}const[D,z]=this.parentDimensions;this.setDims(C*D/E,F*z/B),this._uiManager.enableWaiting(!1);const Y=st(this,v,document.createElement("canvas"));L.append(Y),L.hidden=!1,Z(this,V,mr).call(this,C,F),Z(this,S,Jr).call(this),a(this,T)||(this.parent.addUndoableEditor(this),st(this,T,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},K=new WeakSet,Yr=function(L,C){var B;const[F,E]=this.parentDimensions;this.width=L/F,this.height=C/E,this.setDims(L,C),(B=this._initialOptions)!=null&&B.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,P)!==null&&clearTimeout(a(this,P)),st(this,P,setTimeout(()=>{st(this,P,null),Z(this,V,mr).call(this,L,C)},200))},et=new WeakSet,Kr=function(L,C){const{width:F,height:E}=a(this,d);let B=F,U=E,D=a(this,d);for(;B>2*L||U>2*C;){const z=B,Y=U;B>2*L&&(B=B>=16384?Math.floor(B/2)-1:Math.ceil(B/2)),U>2*C&&(U=U>=16384?Math.floor(U/2)-1:Math.ceil(U/2));const it=new OffscreenCanvas(B,U);it.getContext("2d").drawImage(D,0,0,z,Y,0,0,B,U),D=it.transferToImageBitmap()}return D},V=new WeakSet,mr=function(L,C){L=Math.ceil(L),C=Math.ceil(C);const F=a(this,v);if(!F||F.width===L&&F.height===C)return;F.width=L,F.height=C;const E=a(this,I)?a(this,d):Z(this,et,Kr).call(this,L,C),B=F.getContext("2d");B.filter=this._uiManager.hcmFilter,B.drawImage(E,0,0,E.width,E.height,0,0,L,C)},p=new WeakSet,Oe=function(L){if(L){if(a(this,I)){const F=this._uiManager.imageManager.getSvgUrl(a(this,o));if(F)return F}const C=document.createElement("canvas");return{width:C.width,height:C.height}=a(this,d),C.getContext("2d").drawImage(a(this,d),0,0),C.toDataURL()}if(a(this,I)){const[C,F]=this.pageDimensions,E=Math.round(this.width*C*h.PixelsPerInch.PDF_TO_CSS_UNITS),B=Math.round(this.height*F*h.PixelsPerInch.PDF_TO_CSS_UNITS),U=new OffscreenCanvas(E,B);return U.getContext("2d").drawImage(a(this,d),0,0,a(this,d).width,a(this,d).height,0,0,E,B),U.transferToImageBitmap()}return structuredClone(a(this,d))},S=new WeakSet,Jr=function(){st(this,_,new ResizeObserver(L=>{const C=L[0].contentRect;C.width&&C.height&&Z(this,K,Yr).call(this,C.width,C.height)})),a(this,_).observe(this.div)},te(q,"_type","stamp");let b=q;l.StampEditor=b}],__webpack_module_cache__={};function __w_pdfjs_require__(x){var l=__webpack_module_cache__[x];if(l!==void 0)return l.exports;var t=__webpack_module_cache__[x]={exports:{}};return __webpack_modules__[x].call(t.exports,t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var x=__webpack_exports__;Object.defineProperty(x,"__esModule",{value:!0}),Object.defineProperty(x,"AbortException",{enumerable:!0,get:function(){return l.AbortException}}),Object.defineProperty(x,"AnnotationEditorLayer",{enumerable:!0,get:function(){return h.AnnotationEditorLayer}}),Object.defineProperty(x,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return l.AnnotationEditorParamsType}}),Object.defineProperty(x,"AnnotationEditorType",{enumerable:!0,get:function(){return l.AnnotationEditorType}}),Object.defineProperty(x,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return m.AnnotationEditorUIManager}}),Object.defineProperty(x,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(x,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(x,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(x,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(x,"FeatureTest",{enumerable:!0,get:function(){return l.FeatureTest}}),Object.defineProperty(x,"GlobalWorkerOptions",{enumerable:!0,get:function(){return d.GlobalWorkerOptions}}),Object.defineProperty(x,"ImageKind",{enumerable:!0,get:function(){return l.ImageKind}}),Object.defineProperty(x,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(x,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(x,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(x,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(x,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(x,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(x,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(x,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(x,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(x,"PromiseCapability",{enumerable:!0,get:function(){return l.PromiseCapability}}),Object.defineProperty(x,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(x,"SVGGraphics",{enumerable:!0,get:function(){return t.SVGGraphics}}),Object.defineProperty(x,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(x,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(x,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(x,"XfaLayer",{enumerable:!0,get:function(){return o.XfaLayer}}),Object.defineProperty(x,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(x,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(x,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(x,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(x,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(x,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(x,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(x,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(x,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(x,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(x,"normalizeUnicode",{enumerable:!0,get:function(){return l.normalizeUnicode}}),Object.defineProperty(x,"renderTextLayer",{enumerable:!0,get:function(){return n.renderTextLayer}}),Object.defineProperty(x,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(x,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(x,"updateTextLayer",{enumerable:!0,get:function(){return n.updateTextLayer}}),Object.defineProperty(x,"version",{enumerable:!0,get:function(){return t.version}});var l=__w_pdfjs_require__(1),t=__w_pdfjs_require__(124),r=__w_pdfjs_require__(168),n=__w_pdfjs_require__(195),h=__w_pdfjs_require__(196),m=__w_pdfjs_require__(165),b=__w_pdfjs_require__(198),d=__w_pdfjs_require__(176),o=__w_pdfjs_require__(201)})(),__webpack_exports__})());
